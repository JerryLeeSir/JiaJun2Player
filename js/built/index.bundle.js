var JiaJunApp = (() => {
  var __create = Object.create;
  var __defProp = Object.defineProperty;
  var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
  var __getOwnPropNames = Object.getOwnPropertyNames;
  var __getProtoOf = Object.getPrototypeOf;
  var __hasOwnProp = Object.prototype.hasOwnProperty;
  var __require = /* @__PURE__ */ ((x) => typeof require !== "undefined" ? require : typeof Proxy !== "undefined" ? new Proxy(x, {
    get: (a, b) => (typeof require !== "undefined" ? require : a)[b]
  }) : x)(function(x) {
    if (typeof require !== "undefined") return require.apply(this, arguments);
    throw Error('Dynamic require of "' + x + '" is not supported');
  });
  var __copyProps = (to, from, except, desc) => {
    if (from && typeof from === "object" || typeof from === "function") {
      for (let key of __getOwnPropNames(from))
        if (!__hasOwnProp.call(to, key) && key !== except)
          __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
    }
    return to;
  };
  var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
    // If the importer is in node compatibility mode or this is not an ESM
    // file that has been converted to a CommonJS file using a Babel-
    // compatible transform (i.e. "__esModule" has not been set), then set
    // "default" to the CommonJS "module.exports" for node compatibility.
    isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
    mod
  ));

  // js/config.js
  var PASSWORD_CONFIG2 = {
    localStorageKey: "passwordVerified",
    // 存储验证状态的键名
    verificationTTL: 90 * 24 * 60 * 60 * 1e3
    // 验证有效期（90天，约3个月）
  };
  var API_SITES2 = {
    testSource: {
      api: "https://www.example.com/api.php/provide/vod",
      name: "\u7A7A\u5185\u5BB9\u6D4B\u8BD5\u6E90",
      adult: true
    }
    //ARCHIVE https://telegra.ph/APIs-08-12
  };
  function extendAPISites(newSites) {
    Object.assign(API_SITES2, newSites);
  }
  window.API_SITES = API_SITES2;
  window.extendAPISites = extendAPISites;

  // js/proxy-auth.js
  var cachedPasswordHash = null;
  async function getPasswordHash() {
    if (cachedPasswordHash) {
      return cachedPasswordHash;
    }
    const storedHash = localStorage.getItem("proxyAuthHash");
    if (storedHash) {
      cachedPasswordHash = storedHash;
      return storedHash;
    }
    const passwordVerified = localStorage.getItem("passwordVerified");
    const storedPasswordHash = localStorage.getItem("passwordHash");
    if (passwordVerified === "true" && storedPasswordHash) {
      localStorage.setItem("proxyAuthHash", storedPasswordHash);
      cachedPasswordHash = storedPasswordHash;
      return storedPasswordHash;
    }
    const userPassword = localStorage.getItem("userPassword");
    if (userPassword) {
      try {
        const { sha256: sha2563 } = await import("./sha256.js");
        const hash = await sha2563(userPassword);
        localStorage.setItem("proxyAuthHash", hash);
        cachedPasswordHash = hash;
        return hash;
      } catch (error) {
        console.error("\u751F\u6210\u5BC6\u7801\u54C8\u5E0C\u5931\u8D25:", error);
      }
    }
    if (window.__ENV__ && window.__ENV__.PASSWORD) {
      cachedPasswordHash = window.__ENV__.PASSWORD;
      return window.__ENV__.PASSWORD;
    }
    return null;
  }
  async function addAuthToProxyUrl(url) {
    try {
      const hash = await getPasswordHash();
      if (!hash) {
        console.warn("\u65E0\u6CD5\u83B7\u53D6\u5BC6\u7801\u54C8\u5E0C\uFF0C\u4EE3\u7406\u8BF7\u6C42\u53EF\u80FD\u5931\u8D25");
        return url;
      }
      const timestamp = Date.now();
      const separator = url.includes("?") ? "&" : "?";
      return `${url}${separator}auth=${encodeURIComponent(hash)}&t=${timestamp}`;
    } catch (error) {
      console.error("\u6DFB\u52A0\u4EE3\u7406\u9274\u6743\u5931\u8D25:", error);
      return url;
    }
  }
  function validateProxyAuth(authHash, serverPasswordHash, timestamp) {
    if (!authHash || !serverPasswordHash) {
      return false;
    }
    if (authHash !== serverPasswordHash) {
      return false;
    }
    const now = Date.now();
    const maxAge = 10 * 60 * 1e3;
    if (timestamp && now - parseInt(timestamp) > maxAge) {
      console.warn("\u4EE3\u7406\u8BF7\u6C42\u65F6\u95F4\u6233\u8FC7\u671F");
      return false;
    }
    return true;
  }
  function clearAuthCache() {
    cachedPasswordHash = null;
    localStorage.removeItem("proxyAuthHash");
  }
  window.addEventListener("storage", (e) => {
    if (e.key === "userPassword" || window.PASSWORD_CONFIG && e.key === window.PASSWORD_CONFIG.localStorageKey) {
      clearAuthCache();
    }
  });
  window.ProxyAuth = {
    addAuthToProxyUrl,
    validateProxyAuth,
    clearAuthCache,
    getPasswordHash
  };

  // js/customer_site.js
  var CUSTOMER_SITES = {
    maotai: {
      api: "https://caiji.maotaizy.cc/api.php/provide/vod/at/josn",
      name: "\u8305\u53F0\u8D44\u6E90"
    }
  };
  if (window.extendAPISites) {
    window.extendAPISites(CUSTOMER_SITES);
  } else {
    console.error("\u9519\u8BEF\uFF1A\u8BF7\u5148\u52A0\u8F7D config.js\uFF01");
  }

  // js/ui.js
  function toggleSettings(e) {
    try {
      if (window.ensurePasswordProtection) {
        window.ensurePasswordProtection();
      } else {
        if (window.isPasswordProtected && window.isPasswordVerified) {
          if (window.isPasswordProtected() && !window.isPasswordVerified()) {
            showPasswordModal && showPasswordModal();
            return;
          }
        }
      }
    } catch (error) {
      console.warn("Password protection check failed:", error.message);
      return;
    }
    e && e.stopPropagation();
    const panel = document.getElementById("settingsPanel");
    panel.classList.toggle("show");
  }
  var originalToggleSettings = toggleSettings;
  toggleSettings = function(e) {
    if (e) e.stopPropagation();
    originalToggleSettings(e);
    const historyPanel = document.getElementById("historyPanel");
    if (historyPanel && historyPanel.classList.contains("show")) {
      historyPanel.classList.remove("show");
    }
  };
  document.addEventListener("DOMContentLoaded", function() {
    document.addEventListener("click", function(e) {
      const historyPanel = document.getElementById("historyPanel");
      const historyButton = document.querySelector('button[onclick="toggleHistory(event)"]');
      if (historyPanel && historyButton && !historyPanel.contains(e.target) && !historyButton.contains(e.target) && historyPanel.classList.contains("show")) {
        historyPanel.classList.remove("show");
      }
    });
  });

  // js/api.js
  async function handleApiRequest(url) {
    var _a, _b;
    const customApi = url.searchParams.get("customApi") || "";
    const customDetail = url.searchParams.get("customDetail") || "";
    const source = url.searchParams.get("source") || "heimuer";
    try {
      if (url.pathname === "/api/search") {
        const searchQuery = url.searchParams.get("wd");
        if (!searchQuery) {
          throw new Error("\u7F3A\u5C11\u641C\u7D22\u53C2\u6570");
        }
        if (source === "custom" && !customApi) {
          throw new Error("\u4F7F\u7528\u81EA\u5B9A\u4E49API\u65F6\u5FC5\u987B\u63D0\u4F9BAPI\u5730\u5740");
        }
        if (!API_SITES[source] && source !== "custom") {
          throw new Error("\u65E0\u6548\u7684API\u6765\u6E90");
        }
        const apiUrl = customApi ? `${customApi}${API_CONFIG.search.path}${encodeURIComponent(searchQuery)}` : `${API_SITES[source].api}${API_CONFIG.search.path}${encodeURIComponent(searchQuery)}`;
        const controller = new AbortController();
        const timeoutId = setTimeout(() => controller.abort(), 1e4);
        try {
          const proxiedUrl = await ((_a = window.ProxyAuth) == null ? void 0 : _a.addAuthToProxyUrl) ? await window.ProxyAuth.addAuthToProxyUrl(PROXY_URL + encodeURIComponent(apiUrl)) : PROXY_URL + encodeURIComponent(apiUrl);
          const response = await fetch(proxiedUrl, {
            headers: API_CONFIG.search.headers,
            signal: controller.signal
          });
          clearTimeout(timeoutId);
          if (!response.ok) {
            throw new Error(`API\u8BF7\u6C42\u5931\u8D25: ${response.status}`);
          }
          const data = await response.json();
          if (!data || !Array.isArray(data.list)) {
            throw new Error("API\u8FD4\u56DE\u7684\u6570\u636E\u683C\u5F0F\u65E0\u6548");
          }
          data.list.forEach((item) => {
            item.source_name = source === "custom" ? "\u81EA\u5B9A\u4E49\u6E90" : API_SITES[source].name;
            item.source_code = source;
            if (source === "custom") {
              item.api_url = customApi;
            }
          });
          return JSON.stringify({
            code: 200,
            list: data.list || []
          });
        } catch (fetchError) {
          clearTimeout(timeoutId);
          throw fetchError;
        }
      }
      if (url.pathname === "/api/detail") {
        const id = url.searchParams.get("id");
        const sourceCode = url.searchParams.get("source") || "heimuer";
        if (!id) {
          throw new Error("\u7F3A\u5C11\u89C6\u9891ID\u53C2\u6570");
        }
        if (!/^[\w-]+$/.test(id)) {
          throw new Error("\u65E0\u6548\u7684\u89C6\u9891ID\u683C\u5F0F");
        }
        if (sourceCode === "custom" && !customApi) {
          throw new Error("\u4F7F\u7528\u81EA\u5B9A\u4E49API\u65F6\u5FC5\u987B\u63D0\u4F9BAPI\u5730\u5740");
        }
        if (!API_SITES[sourceCode] && sourceCode !== "custom") {
          throw new Error("\u65E0\u6548\u7684API\u6765\u6E90");
        }
        if (sourceCode !== "custom" && API_SITES[sourceCode].detail) {
          return await handleSpecialSourceDetail(id, sourceCode);
        }
        if (sourceCode === "custom" && customDetail) {
          return await handleCustomApiSpecialDetail(id, customDetail);
        }
        if (sourceCode === "custom" && url.searchParams.get("useDetail") === "true") {
          return await handleCustomApiSpecialDetail(id, customApi);
        }
        const detailUrl = customApi ? `${customApi}${API_CONFIG.detail.path}${id}` : `${API_SITES[sourceCode].api}${API_CONFIG.detail.path}${id}`;
        const controller = new AbortController();
        const timeoutId = setTimeout(() => controller.abort(), 1e4);
        try {
          const proxiedUrl = await ((_b = window.ProxyAuth) == null ? void 0 : _b.addAuthToProxyUrl) ? await window.ProxyAuth.addAuthToProxyUrl(PROXY_URL + encodeURIComponent(detailUrl)) : PROXY_URL + encodeURIComponent(detailUrl);
          const response = await fetch(proxiedUrl, {
            headers: API_CONFIG.detail.headers,
            signal: controller.signal
          });
          clearTimeout(timeoutId);
          if (!response.ok) {
            throw new Error(`\u8BE6\u60C5\u8BF7\u6C42\u5931\u8D25: ${response.status}`);
          }
          const data = await response.json();
          if (!data || !data.list || !Array.isArray(data.list) || data.list.length === 0) {
            throw new Error("\u83B7\u53D6\u5230\u7684\u8BE6\u60C5\u5185\u5BB9\u65E0\u6548");
          }
          const videoDetail = data.list[0];
          let episodes = [];
          if (videoDetail.vod_play_url) {
            const playSources = videoDetail.vod_play_url.split("$$$");
            if (playSources.length > 0) {
              const mainSource = playSources[0];
              const episodeList = mainSource.split("#");
              episodes = episodeList.map((ep) => {
                const parts = ep.split("$");
                return parts.length > 1 ? parts[1] : "";
              }).filter((url2) => url2 && (url2.startsWith("http://") || url2.startsWith("https://")));
            }
          }
          if (episodes.length === 0 && videoDetail.vod_content) {
            const matches = videoDetail.vod_content.match(M3U8_PATTERN) || [];
            episodes = matches.map((link) => link.replace(/^\$/, ""));
          }
          return JSON.stringify({
            code: 200,
            episodes,
            detailUrl,
            videoInfo: {
              title: videoDetail.vod_name,
              cover: videoDetail.vod_pic,
              desc: videoDetail.vod_content,
              type: videoDetail.type_name,
              year: videoDetail.vod_year,
              area: videoDetail.vod_area,
              director: videoDetail.vod_director,
              actor: videoDetail.vod_actor,
              remarks: videoDetail.vod_remarks,
              // 添加源信息
              source_name: sourceCode === "custom" ? "\u81EA\u5B9A\u4E49\u6E90" : API_SITES[sourceCode].name,
              source_code: sourceCode
            }
          });
        } catch (fetchError) {
          clearTimeout(timeoutId);
          throw fetchError;
        }
      }
      throw new Error("\u672A\u77E5\u7684API\u8DEF\u5F84");
    } catch (error) {
      console.error("API\u5904\u7406\u9519\u8BEF:", error);
      return JSON.stringify({
        code: 400,
        msg: error.message || "\u8BF7\u6C42\u5904\u7406\u5931\u8D25",
        list: [],
        episodes: []
      });
    }
  }
  async function handleCustomApiSpecialDetail(id, customApi) {
    var _a;
    try {
      const detailUrl = `${customApi}/index.php/vod/detail/id/${id}.html`;
      const controller = new AbortController();
      const timeoutId = setTimeout(() => controller.abort(), 1e4);
      const proxiedUrl = await ((_a = window.ProxyAuth) == null ? void 0 : _a.addAuthToProxyUrl) ? await window.ProxyAuth.addAuthToProxyUrl(PROXY_URL + encodeURIComponent(detailUrl)) : PROXY_URL + encodeURIComponent(detailUrl);
      const response = await fetch(proxiedUrl, {
        headers: {
          "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36"
        },
        signal: controller.signal
      });
      clearTimeout(timeoutId);
      if (!response.ok) {
        throw new Error(`\u81EA\u5B9A\u4E49API\u8BE6\u60C5\u9875\u8BF7\u6C42\u5931\u8D25: ${response.status}`);
      }
      const html = await response.text();
      const generalPattern = /\$(https?:\/\/[^"'\s]+?\.m3u8)/g;
      let matches = html.match(generalPattern) || [];
      matches = matches.map((link) => {
        link = link.substring(1, link.length);
        const parenIndex = link.indexOf("(");
        return parenIndex > 0 ? link.substring(0, parenIndex) : link;
      });
      const titleMatch = html.match(/<h1[^>]*>([^<]+)<\/h1>/);
      const titleText = titleMatch ? titleMatch[1].trim() : "";
      const descMatch = html.match(/<div[^>]*class=["']sketch["'][^>]*>([\s\S]*?)<\/div>/);
      const descText = descMatch ? descMatch[1].replace(/<[^>]+>/g, " ").trim() : "";
      return JSON.stringify({
        code: 200,
        episodes: matches,
        detailUrl,
        videoInfo: {
          title: titleText,
          desc: descText,
          source_name: "\u81EA\u5B9A\u4E49\u6E90",
          source_code: "custom"
        }
      });
    } catch (error) {
      console.error(`\u81EA\u5B9A\u4E49API\u8BE6\u60C5\u83B7\u53D6\u5931\u8D25:`, error);
      throw error;
    }
  }
  async function handleSpecialSourceDetail(id, sourceCode) {
    var _a;
    try {
      const detailUrl = `${API_SITES[sourceCode].detail}/index.php/vod/detail/id/${id}.html`;
      const controller = new AbortController();
      const timeoutId = setTimeout(() => controller.abort(), 1e4);
      const proxiedUrl = await ((_a = window.ProxyAuth) == null ? void 0 : _a.addAuthToProxyUrl) ? await window.ProxyAuth.addAuthToProxyUrl(PROXY_URL + encodeURIComponent(detailUrl)) : PROXY_URL + encodeURIComponent(detailUrl);
      const response = await fetch(proxiedUrl, {
        headers: {
          "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36"
        },
        signal: controller.signal
      });
      clearTimeout(timeoutId);
      if (!response.ok) {
        throw new Error(`\u8BE6\u60C5\u9875\u8BF7\u6C42\u5931\u8D25: ${response.status}`);
      }
      const html = await response.text();
      let matches = [];
      if (sourceCode === "ffzy") {
        const ffzyPattern = /\$(https?:\/\/[^"'\s]+?\/\d{8}\/\d+_[a-f0-9]+\/index\.m3u8)/g;
        matches = html.match(ffzyPattern) || [];
      }
      if (matches.length === 0) {
        const generalPattern = /\$(https?:\/\/[^"'\s]+?\.m3u8)/g;
        matches = html.match(generalPattern) || [];
      }
      matches = [...new Set(matches)];
      matches = matches.map((link) => {
        link = link.substring(1, link.length);
        const parenIndex = link.indexOf("(");
        return parenIndex > 0 ? link.substring(0, parenIndex) : link;
      });
      const titleMatch = html.match(/<h1[^>]*>([^<]+)<\/h1>/);
      const titleText = titleMatch ? titleMatch[1].trim() : "";
      const descMatch = html.match(/<div[^>]*class=["']sketch["'][^>]*>([\s\S]*?)<\/div>/);
      const descText = descMatch ? descMatch[1].replace(/<[^>]+>/g, " ").trim() : "";
      return JSON.stringify({
        code: 200,
        episodes: matches,
        detailUrl,
        videoInfo: {
          title: titleText,
          desc: descText,
          source_name: API_SITES[sourceCode].name,
          source_code: sourceCode
        }
      });
    } catch (error) {
      console.error(`${API_SITES[sourceCode].name}\u8BE6\u60C5\u83B7\u53D6\u5931\u8D25:`, error);
      throw error;
    }
  }
  (function() {
    const originalFetch = window.fetch;
    window.fetch = async function(input, init) {
      const requestUrl = typeof input === "string" ? new URL(input, window.location.origin) : input.url;
      if (requestUrl.pathname.startsWith("/api/")) {
        if (window.isPasswordProtected && window.isPasswordVerified) {
          if (window.isPasswordProtected() && !window.isPasswordVerified()) {
            return;
          }
        }
        try {
          const data = await handleApiRequest(requestUrl);
          return new Response(data, {
            headers: {
              "Content-Type": "application/json",
              "Access-Control-Allow-Origin": "*"
            }
          });
        } catch (error) {
          return new Response(JSON.stringify({
            code: 500,
            msg: "\u670D\u52A1\u5668\u5185\u90E8\u9519\u8BEF"
          }), {
            status: 500,
            headers: {
              "Content-Type": "application/json"
            }
          });
        }
      }
      return originalFetch.apply(this, arguments);
    };
  })();

  // js/douban.js
  var defaultMovieTags = ["\u70ED\u95E8", "\u6700\u65B0", "\u7ECF\u5178", "\u8C46\u74E3\u9AD8\u5206", "\u51B7\u95E8\u4F73\u7247", "\u534E\u8BED", "\u6B27\u7F8E", "\u97E9\u56FD", "\u65E5\u672C", "\u52A8\u4F5C", "\u559C\u5267", "\u65E5\u7EFC", "\u7231\u60C5", "\u79D1\u5E7B", "\u60AC\u7591", "\u6050\u6016", "\u6CBB\u6108"];
  var defaultTvTags = ["\u70ED\u95E8", "\u7F8E\u5267", "\u82F1\u5267", "\u97E9\u5267", "\u65E5\u5267", "\u56FD\u4EA7\u5267", "\u6E2F\u5267", "\u65E5\u672C\u52A8\u753B", "\u7EFC\u827A", "\u7EAA\u5F55\u7247"];
  var movieTags = [];
  var tvTags = [];
  function loadUserTags() {
    try {
      const savedMovieTags = localStorage.getItem("userMovieTags");
      const savedTvTags = localStorage.getItem("userTvTags");
      if (savedMovieTags) {
        movieTags = JSON.parse(savedMovieTags);
      } else {
        movieTags = [...defaultMovieTags];
      }
      if (savedTvTags) {
        tvTags = JSON.parse(savedTvTags);
      } else {
        tvTags = [...defaultTvTags];
      }
    } catch (e) {
      console.error("\u52A0\u8F7D\u6807\u7B7E\u5931\u8D25\uFF1A", e);
      movieTags = [...defaultMovieTags];
      tvTags = [...defaultTvTags];
    }
  }
  function saveUserTags() {
    try {
      localStorage.setItem("userMovieTags", JSON.stringify(movieTags));
      localStorage.setItem("userTvTags", JSON.stringify(tvTags));
    } catch (e) {
      console.error("\u4FDD\u5B58\u6807\u7B7E\u5931\u8D25\uFF1A", e);
      showToast("\u4FDD\u5B58\u6807\u7B7E\u5931\u8D25", "error");
    }
  }
  var doubanMovieTvCurrentSwitch = "movie";
  var doubanCurrentTag = "\u70ED\u95E8";
  var doubanPageStart = 0;
  var doubanPageSize = 16;
  function initDouban2() {
    const doubanToggle = document.getElementById("doubanToggle");
    if (doubanToggle) {
      const isEnabled = localStorage.getItem("doubanEnabled") === "true";
      doubanToggle.checked = isEnabled;
      const toggleBg = doubanToggle.nextElementSibling;
      const toggleDot = toggleBg.nextElementSibling;
      if (isEnabled) {
        toggleBg.classList.add("bg-pink-600");
        toggleDot.classList.add("translate-x-6");
      }
      doubanToggle.addEventListener("change", function(e) {
        const isChecked = e.target.checked;
        localStorage.setItem("doubanEnabled", isChecked);
        if (isChecked) {
          toggleBg.classList.add("bg-pink-600");
          toggleDot.classList.add("translate-x-6");
        } else {
          toggleBg.classList.remove("bg-pink-600");
          toggleDot.classList.remove("translate-x-6");
        }
        updateDoubanVisibility2();
      });
      updateDoubanVisibility2();
      window.scrollTo(0, 0);
    }
    loadUserTags();
    renderDoubanMovieTvSwitch();
    renderDoubanTags();
    setupDoubanRefreshBtn();
    if (localStorage.getItem("doubanEnabled") === "true") {
      renderRecommend(doubanCurrentTag, doubanPageSize, doubanPageStart);
    }
  }
  function updateDoubanVisibility2() {
    const doubanArea = document.getElementById("doubanArea");
    if (!doubanArea) return;
    const isEnabled = localStorage.getItem("doubanEnabled") === "true";
    const isSearching = document.getElementById("resultsArea") && !document.getElementById("resultsArea").classList.contains("hidden");
    if (isEnabled && !isSearching) {
      doubanArea.classList.remove("hidden");
      if (document.getElementById("douban-results").children.length === 0) {
        renderRecommend(doubanCurrentTag, doubanPageSize, doubanPageStart);
      }
    } else {
      doubanArea.classList.add("hidden");
    }
  }
  function renderDoubanMovieTvSwitch() {
    const movieToggle = document.getElementById("douban-movie-toggle");
    const tvToggle = document.getElementById("douban-tv-toggle");
    if (!movieToggle || !tvToggle) return;
    movieToggle.addEventListener("click", function() {
      if (doubanMovieTvCurrentSwitch !== "movie") {
        movieToggle.classList.add("bg-pink-600", "text-white");
        movieToggle.classList.remove("text-gray-300");
        tvToggle.classList.remove("bg-pink-600", "text-white");
        tvToggle.classList.add("text-gray-300");
        doubanMovieTvCurrentSwitch = "movie";
        doubanCurrentTag = "\u70ED\u95E8";
        renderDoubanTags(movieTags);
        setupDoubanRefreshBtn();
        if (localStorage.getItem("doubanEnabled") === "true") {
          renderRecommend(doubanCurrentTag, doubanPageSize, doubanPageStart);
        }
      }
    });
    tvToggle.addEventListener("click", function() {
      if (doubanMovieTvCurrentSwitch !== "tv") {
        tvToggle.classList.add("bg-pink-600", "text-white");
        tvToggle.classList.remove("text-gray-300");
        movieToggle.classList.remove("bg-pink-600", "text-white");
        movieToggle.classList.add("text-gray-300");
        doubanMovieTvCurrentSwitch = "tv";
        doubanCurrentTag = "\u70ED\u95E8";
        renderDoubanTags(tvTags);
        setupDoubanRefreshBtn();
        if (localStorage.getItem("doubanEnabled") === "true") {
          renderRecommend(doubanCurrentTag, doubanPageSize, doubanPageStart);
        }
      }
    });
  }
  function renderDoubanTags(tags) {
    const tagContainer = document.getElementById("douban-tags");
    if (!tagContainer) return;
    const currentTags = doubanMovieTvCurrentSwitch === "movie" ? movieTags : tvTags;
    tagContainer.innerHTML = "";
    const manageBtn = document.createElement("button");
    manageBtn.className = "py-1.5 px-3.5 rounded text-sm font-medium transition-all duration-300 bg-[#1a1a1a] text-gray-300 hover:bg-pink-700 hover:text-white border border-[#333] hover:border-white";
    manageBtn.innerHTML = '<span class="flex items-center"><svg class="w-3 h-3 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg>\u7BA1\u7406\u6807\u7B7E</span>';
    manageBtn.onclick = function() {
      showTagManageModal();
    };
    tagContainer.appendChild(manageBtn);
    currentTags.forEach((tag) => {
      const btn = document.createElement("button");
      let btnClass = "py-1.5 px-3.5 rounded text-sm font-medium transition-all duration-300 border ";
      if (tag === doubanCurrentTag) {
        btnClass += "bg-pink-600 text-white shadow-md border-white";
      } else {
        btnClass += "bg-[#1a1a1a] text-gray-300 hover:bg-pink-700 hover:text-white border-[#333] hover:border-white";
      }
      btn.className = btnClass;
      btn.textContent = tag;
      btn.onclick = function() {
        if (doubanCurrentTag !== tag) {
          doubanCurrentTag = tag;
          doubanPageStart = 0;
          renderRecommend(doubanCurrentTag, doubanPageSize, doubanPageStart);
          renderDoubanTags();
        }
      };
      tagContainer.appendChild(btn);
    });
  }
  function setupDoubanRefreshBtn() {
    const btn = document.getElementById("douban-refresh");
    if (!btn) return;
    btn.onclick = function() {
      doubanPageStart += doubanPageSize;
      if (doubanPageStart > 9 * doubanPageSize) {
        doubanPageStart = 0;
      }
      renderRecommend(doubanCurrentTag, doubanPageSize, doubanPageStart);
    };
  }
  function renderRecommend(tag, pageLimit, pageStart) {
    const container = document.getElementById("douban-results");
    if (!container) return;
    const loadingOverlayHTML = `
        <div class="absolute inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-10">
            <div class="flex items-center justify-center">
                <div class="w-6 h-6 border-2 border-pink-500 border-t-transparent rounded-full animate-spin inline-block"></div>
                <span class="text-pink-500 ml-4">\u52A0\u8F7D\u4E2D...</span>
            </div>
        </div>
    `;
    container.classList.add("relative");
    container.insertAdjacentHTML("beforeend", loadingOverlayHTML);
    const target = `https://movie.douban.com/j/search_subjects?type=${doubanMovieTvCurrentSwitch}&tag=${tag}&sort=recommend&page_limit=${pageLimit}&page_start=${pageStart}`;
    fetchDoubanData(target).then((data) => {
      renderDoubanCards(data, container);
    }).catch((error) => {
      console.error("\u83B7\u53D6\u8C46\u74E3\u6570\u636E\u5931\u8D25\uFF1A", error);
      container.innerHTML = `
                <div class="col-span-full text-center py-8">
                    <div class="text-red-400">\u274C \u83B7\u53D6\u8C46\u74E3\u6570\u636E\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5</div>
                    <div class="text-gray-500 text-sm mt-2">\u63D0\u793A\uFF1A\u4F7F\u7528VPN\u53EF\u80FD\u6709\u52A9\u4E8E\u89E3\u51B3\u6B64\u95EE\u9898</div>
                </div>
            `;
    });
  }
  async function fetchDoubanData(url) {
    var _a;
    const controller = new AbortController();
    const timeoutId = setTimeout(() => controller.abort(), 1e4);
    const fetchOptions = {
      signal: controller.signal,
      headers: {
        "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36",
        "Referer": "https://movie.douban.com/",
        "Accept": "application/json, text/plain, */*"
      }
    };
    try {
      const proxiedUrl = await ((_a = window.ProxyAuth) == null ? void 0 : _a.addAuthToProxyUrl) ? await window.ProxyAuth.addAuthToProxyUrl(PROXY_URL + encodeURIComponent(url)) : PROXY_URL + encodeURIComponent(url);
      const response = await fetch(proxiedUrl, fetchOptions);
      clearTimeout(timeoutId);
      if (!response.ok) {
        throw new Error(`HTTP error! Status: ${response.status}`);
      }
      return await response.json();
    } catch (err) {
      console.error("\u8C46\u74E3 API \u8BF7\u6C42\u5931\u8D25\uFF08\u76F4\u63A5\u4EE3\u7406\uFF09\uFF1A", err);
      const fallbackUrl = `https://api.allorigins.win/get?url=${encodeURIComponent(url)}`;
      try {
        const fallbackResponse = await fetch(fallbackUrl);
        if (!fallbackResponse.ok) {
          throw new Error(`\u5907\u7528API\u8BF7\u6C42\u5931\u8D25! \u72B6\u6001: ${fallbackResponse.status}`);
        }
        const data = await fallbackResponse.json();
        if (data && data.contents) {
          return JSON.parse(data.contents);
        } else {
          throw new Error("\u65E0\u6CD5\u83B7\u53D6\u6709\u6548\u6570\u636E");
        }
      } catch (fallbackErr) {
        console.error("\u8C46\u74E3 API \u5907\u7528\u8BF7\u6C42\u4E5F\u5931\u8D25\uFF1A", fallbackErr);
        throw fallbackErr;
      }
    }
  }
  var DOUBAN_COVER_FETCH_CONCURRENCY = 4;
  var _doubanCoverActiveCount = 0;
  var _doubanCoverPendingQueue = [];
  var _doubanTitleToCoverCache = /* @__PURE__ */ new Map();
  function _doubanRunNextCoverTask() {
    while (_doubanCoverActiveCount < DOUBAN_COVER_FETCH_CONCURRENCY && _doubanCoverPendingQueue.length > 0) {
      const task = _doubanCoverPendingQueue.shift();
      _doubanCoverActiveCount++;
      task().catch(() => {
      }).finally(() => {
        _doubanCoverActiveCount--;
        _doubanRunNextCoverTask();
      });
    }
  }
  function _doubanEnqueueCoverTask(fn) {
    return new Promise((resolve, reject) => {
      _doubanCoverPendingQueue.push(async () => {
        try {
          const res = await fn();
          resolve(res);
        } catch (e) {
          reject(e);
        }
      });
      _doubanRunNextCoverTask();
    });
  }
  function _doubanNormalizeTitleForSearch(title) {
    return (title || "").toString().trim().replace(/\s*[（(].*?[)）]\s*$/g, "").replace(/\s*(第\s*\d+\s*(季|集|期))\s*$/g, "").trim();
  }
  function _doubanNormalizeCoverUrl(url) {
    if (!url) return null;
    let u = String(url).trim();
    if (!u) return null;
    if (u.startsWith("//")) u = "https:" + u;
    u = u.replace(/^http:\/\/+/, "http://");
    u = u.replace(/^https:\/\/+/, "https://");
    if (!/^https?:\/\//i.test(u)) return null;
    return u;
  }
  async function _doubanSearchFirstCoverFromVideoSources(title) {
    const rawTitle = (title || "").toString().trim();
    const normalizedTitle = _doubanNormalizeTitleForSearch(rawTitle);
    const cacheKey = normalizedTitle || rawTitle;
    if (!cacheKey) return null;
    if (_doubanTitleToCoverCache.has(cacheKey)) {
      return _doubanTitleToCoverCache.get(cacheKey);
    }
    const apiIds = ["maotai"];
    if (typeof searchByAPIAndKeyWord !== "function") {
      _doubanTitleToCoverCache.set(normalizedTitle, null);
      return null;
    }
    const coverUrl = await _doubanEnqueueCoverTask(async () => {
      for (const apiId of apiIds) {
        try {
          if (normalizedTitle) {
            const results = await searchByAPIAndKeyWord(apiId, normalizedTitle);
            if (Array.isArray(results) && results.length > 0) {
              const first = results[0];
              const pic = _doubanNormalizeCoverUrl(first == null ? void 0 : first.vod_pic);
              if (pic) {
                return pic;
              }
            }
          }
          if (rawTitle && rawTitle !== normalizedTitle) {
            const rawResults = await searchByAPIAndKeyWord(apiId, rawTitle);
            if (Array.isArray(rawResults) && rawResults.length > 0) {
              const firstRaw = rawResults[0];
              const rawPic = _doubanNormalizeCoverUrl(firstRaw == null ? void 0 : firstRaw.vod_pic);
              if (rawPic) {
                return rawPic;
              }
            }
          }
        } catch (e) {
        }
      }
      return null;
    });
    _doubanTitleToCoverCache.set(cacheKey, coverUrl);
    return coverUrl;
  }
  function _doubanUpdateCoverImgByCardId(cardId, coverUrl) {
    if (!cardId || !coverUrl) return;
    const img = document.querySelector(`#douban-results [data-douban-card-id="${cardId}"] img[data-role="douban-cover"]`);
    if (!img) return;
    if (img.getAttribute("src") === coverUrl) return;
    img.onerror = function() {
      this.onerror = null;
      this.src = "image/nomedia.png";
      this.classList.add("object-contain");
    };
    img.setAttribute("src", coverUrl);
    img.classList.remove("object-contain");
    img.classList.add("object-cover");
    if (!img.dataset.coverLogged) {
      img.dataset.coverLogged = "1";
      console.debug("[douban] cover replaced:", { cardId, coverUrl });
    }
  }
  function renderDoubanCards(data, container) {
    const fragment = document.createDocumentFragment();
    if (!data.subjects || data.subjects.length === 0) {
      const emptyEl = document.createElement("div");
      emptyEl.className = "col-span-full text-center py-8";
      emptyEl.innerHTML = `
            <div class="text-pink-500">\u274C \u6682\u65E0\u6570\u636E\uFF0C\u8BF7\u5C1D\u8BD5\u5176\u4ED6\u5206\u7C7B\u6216\u5237\u65B0</div>
        `;
      fragment.appendChild(emptyEl);
    } else {
      data.subjects.forEach((item) => {
        const card = document.createElement("div");
        card.className = "bg-[#111] hover:bg-[#222] transition-all duration-300 rounded-lg overflow-hidden flex flex-col transform hover:scale-105 shadow-md hover:shadow-lg";
        const safeTitle = item.title.replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/\"/g, "&quot;");
        const safeRate = (item.rate || "\u6682\u65E0").replace(/</g, "&lt;").replace(/>/g, "&gt;");
        const cardId = `db_${doubanMovieTvCurrentSwitch}_${encodeURIComponent(item.title || "")}_${item.id || ""}`;
        const placeholderCover = "image/nomedia.png";
        card.setAttribute("data-douban-card-id", cardId);
        card.innerHTML = `
                <div class="relative w-full aspect-[2/3] overflow-hidden cursor-pointer" onclick="fillAndSearchWithDouban('${safeTitle}')">
                    <img src="${placeholderCover}" alt="${safeTitle}" 
                        class="w-full h-full object-contain bg-black transition-transform duration-500 hover:scale-110"
                        data-role="douban-cover"
                        onerror="this.onerror=null; this.src='image/nomedia.png'; this.classList.add('object-contain');"
                        loading="lazy" referrerpolicy="no-referrer">
                    <div class="absolute inset-0 bg-gradient-to-t from-black to-transparent opacity-60"></div>
                    <div class="absolute bottom-2 left-2 bg-black/70 text-white text-xs px-2 py-1 rounded-sm">
                        <span class="text-yellow-400">\u2605</span> ${safeRate}
                    </div>
                    <div class="absolute bottom-2 right-2 bg-black/70 text-white text-xs px-2 py-1 rounded-sm hover:bg-[#333] transition-colors">
                        <a href="${item.url}" target="_blank" rel="noopener noreferrer" title="\u5728\u8C46\u74E3\u67E5\u770B" onclick="event.stopPropagation();">
                            \u{1F517}
                        </a>
                    </div>
                </div>
                <div class="p-2 text-center bg-[#111]">
                    <button onclick="fillAndSearchWithDouban('${safeTitle}')" 
                            class="text-sm font-medium text-white truncate w-full hover:text-pink-400 transition"
                            title="${safeTitle}">
                        ${safeTitle}
                    </button>
                </div>
            `;
        fragment.appendChild(card);
        _doubanSearchFirstCoverFromVideoSources(item.title).then((coverUrl) => {
          if (coverUrl) {
            _doubanUpdateCoverImgByCardId(cardId, coverUrl);
          }
        }).catch(() => {
        });
      });
    }
    container.innerHTML = "";
    container.appendChild(fragment);
  }
  document.addEventListener("DOMContentLoaded", initDouban2);
  function showTagManageModal() {
    let modal = document.getElementById("tagManageModal");
    if (modal) {
      document.body.removeChild(modal);
    }
    modal = document.createElement("div");
    modal.id = "tagManageModal";
    modal.className = "fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-40";
    const isMovie = doubanMovieTvCurrentSwitch === "movie";
    const currentTags = isMovie ? movieTags : tvTags;
    const defaultTags = isMovie ? defaultMovieTags : defaultTvTags;
    modal.innerHTML = `
        <div class="bg-[#191919] rounded-lg p-6 max-w-md w-full max-h-[90vh] overflow-y-auto relative">
            <button id="closeTagModal" class="absolute top-4 right-4 text-gray-400 hover:text-white text-xl">&times;</button>
            
            <h3 class="text-xl font-bold text-white mb-4">\u6807\u7B7E\u7BA1\u7406 (${isMovie ? "\u7535\u5F71" : "\u7535\u89C6\u5267"})</h3>
            
            <div class="mb-4">
                <div class="flex justify-between items-center mb-2">
                    <h4 class="text-lg font-medium text-gray-300">\u6807\u7B7E\u5217\u8868</h4>
                    <button id="resetTagsBtn" class="text-xs px-2 py-1 bg-gray-700 hover:bg-gray-600 text-white rounded">
                        \u6062\u590D\u9ED8\u8BA4\u6807\u7B7E
                    </button>
                </div>
                <div class="grid grid-cols-2 sm:grid-cols-3 gap-2 mb-4" id="tagsGrid">
                    ${currentTags.length ? currentTags.map((tag) => {
      const canDelete = tag !== "\u70ED\u95E8";
      return `
                            <div class="bg-[#1a1a1a] text-gray-300 py-1.5 px-3 rounded text-sm font-medium flex justify-between items-center group">
                                <span>${tag}</span>
                                ${canDelete ? `<button class="delete-tag-btn text-gray-500 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity" 
                                        data-tag="${tag}">\u2715</button>` : `<span class="text-gray-500 text-xs italic opacity-0 group-hover:opacity-100">\u5FC5\u9700</span>`}
                            </div>
                        `;
    }).join("") : `<div class="col-span-full text-center py-4 text-gray-500">\u65E0\u6807\u7B7E\uFF0C\u8BF7\u6DFB\u52A0\u6216\u6062\u590D\u9ED8\u8BA4</div>`}
                </div>
            </div>
            
            <div class="border-t border-gray-700 pt-4">
                <h4 class="text-lg font-medium text-gray-300 mb-3">\u6DFB\u52A0\u65B0\u6807\u7B7E</h4>
                <form id="addTagForm" class="flex items-center">
                    <input type="text" id="newTagInput" placeholder="\u8F93\u5165\u6807\u7B7E\u540D\u79F0..." 
                           class="flex-1 bg-[#222] text-white border border-gray-700 rounded px-3 py-2 focus:outline-none focus:border-pink-500">
                    <button type="submit" class="ml-2 bg-pink-600 hover:bg-pink-700 text-white px-4 py-2 rounded">\u6DFB\u52A0</button>
                </form>
                <p class="text-xs text-gray-500 mt-2">\u63D0\u793A\uFF1A\u6807\u7B7E\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A\uFF0C\u4E0D\u80FD\u91CD\u590D\uFF0C\u4E0D\u80FD\u5305\u542B\u7279\u6B8A\u5B57\u7B26</p>
            </div>
        </div>
    `;
    document.body.appendChild(modal);
    setTimeout(() => {
      document.getElementById("newTagInput").focus();
    }, 100);
    document.getElementById("closeTagModal").addEventListener("click", function() {
      document.body.removeChild(modal);
    });
    modal.addEventListener("click", function(e) {
      if (e.target === modal) {
        document.body.removeChild(modal);
      }
    });
    document.getElementById("resetTagsBtn").addEventListener("click", function() {
      resetTagsToDefault();
      showTagManageModal();
    });
    const deleteButtons = document.querySelectorAll(".delete-tag-btn");
    deleteButtons.forEach((btn) => {
      btn.addEventListener("click", function() {
        const tagToDelete = this.getAttribute("data-tag");
        deleteTag(tagToDelete);
        showTagManageModal();
      });
    });
    document.getElementById("addTagForm").addEventListener("submit", function(e) {
      e.preventDefault();
      const input = document.getElementById("newTagInput");
      const newTag = input.value.trim();
      if (newTag) {
        addTag(newTag);
        input.value = "";
        showTagManageModal();
      }
    });
  }
  function addTag(tag) {
    const safeTag = tag.replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;");
    const isMovie = doubanMovieTvCurrentSwitch === "movie";
    const currentTags = isMovie ? movieTags : tvTags;
    const exists = currentTags.some(
      (existingTag) => existingTag.toLowerCase() === safeTag.toLowerCase()
    );
    if (exists) {
      showToast("\u6807\u7B7E\u5DF2\u5B58\u5728", "warning");
      return;
    }
    if (isMovie) {
      movieTags.push(safeTag);
    } else {
      tvTags.push(safeTag);
    }
    saveUserTags();
    renderDoubanTags();
    showToast("\u6807\u7B7E\u6DFB\u52A0\u6210\u529F", "success");
  }
  function deleteTag(tag) {
    if (tag === "\u70ED\u95E8") {
      showToast("\u70ED\u95E8\u6807\u7B7E\u4E0D\u80FD\u5220\u9664", "warning");
      return;
    }
    const isMovie = doubanMovieTvCurrentSwitch === "movie";
    const currentTags = isMovie ? movieTags : tvTags;
    const index = currentTags.indexOf(tag);
    if (index !== -1) {
      currentTags.splice(index, 1);
      saveUserTags();
      if (doubanCurrentTag === tag) {
        doubanCurrentTag = "\u70ED\u95E8";
        doubanPageStart = 0;
        renderRecommend(doubanCurrentTag, doubanPageSize, doubanPageStart);
      }
      renderDoubanTags();
      showToast("\u6807\u7B7E\u5220\u9664\u6210\u529F", "success");
    }
  }
  function resetTagsToDefault() {
    const isMovie = doubanMovieTvCurrentSwitch === "movie";
    if (isMovie) {
      movieTags = [...defaultMovieTags];
    } else {
      tvTags = [...defaultTvTags];
    }
    doubanCurrentTag = "\u70ED\u95E8";
    doubanPageStart = 0;
    saveUserTags();
    renderDoubanTags();
    renderRecommend(doubanCurrentTag, doubanPageSize, doubanPageStart);
    showToast("\u5DF2\u6062\u590D\u9ED8\u8BA4\u6807\u7B7E", "success");
  }

  // js/password.js
  function isPasswordProtected() {
    const pwd = window.__ENV__ && window.__ENV__.PASSWORD;
    return typeof pwd === "string" && pwd.length === 64 && !/^0+$/.test(pwd);
  }
  function isPasswordRequired() {
    return !isPasswordProtected();
  }
  function ensurePasswordProtection() {
    if (isPasswordRequired()) {
      showPasswordModal2();
      throw new Error("Password protection is required");
    }
    if (isPasswordProtected() && !isPasswordVerified()) {
      showPasswordModal2();
      throw new Error("Password verification required");
    }
    return true;
  }
  window.isPasswordProtected = isPasswordProtected;
  window.isPasswordRequired = isPasswordRequired;
  var PASSWORD_DEBUG = false;
  function pwdLog(...args) {
    if (PASSWORD_DEBUG && typeof console !== "undefined" && console.log) {
      console.log("[password]", ...args);
    }
  }
  async function verifyPassword(password) {
    var _a;
    try {
      const correctHash = (_a = window.__ENV__) == null ? void 0 : _a.PASSWORD;
      pwdLog("env password hash present:", !!correctHash, "len:", correctHash ? correctHash.length : 0);
      if (!correctHash) return false;
      const inputHash = await sha2562(password);
      pwdLog("input hash:", inputHash);
      const isValid = inputHash === correctHash;
      if (isValid) {
        localStorage.setItem(PASSWORD_CONFIG.localStorageKey, JSON.stringify({
          verified: true,
          timestamp: Date.now(),
          passwordHash: correctHash
        }));
      }
      return isValid;
    } catch (error) {
      console.error("\u9A8C\u8BC1\u5BC6\u7801\u65F6\u51FA\u9519:", error);
      return false;
    }
  }
  function isPasswordVerified() {
    var _a;
    try {
      if (!isPasswordProtected()) return true;
      const stored = localStorage.getItem(PASSWORD_CONFIG.localStorageKey);
      if (!stored) return false;
      const { timestamp, passwordHash } = JSON.parse(stored);
      const currentHash = (_a = window.__ENV__) == null ? void 0 : _a.PASSWORD;
      return timestamp && passwordHash === currentHash && Date.now() - timestamp < PASSWORD_CONFIG.verificationTTL;
    } catch (error) {
      console.error("\u68C0\u67E5\u5BC6\u7801\u9A8C\u8BC1\u72B6\u6001\u65F6\u51FA\u9519:", error);
      return false;
    }
  }
  window.isPasswordProtected = isPasswordProtected;
  window.isPasswordRequired = isPasswordRequired;
  window.isPasswordVerified = isPasswordVerified;
  window.verifyPassword = verifyPassword;
  window.ensurePasswordProtection = ensurePasswordProtection;
  window.showPasswordModal = showPasswordModal2;
  window.hidePasswordModal = hidePasswordModal;
  async function sha2562(message) {
    if (typeof window._jsSha256 === "function") {
      pwdLog("sha256 via window._jsSha256");
      return window._jsSha256(message);
    }
    if (window.crypto && crypto.subtle && crypto.subtle.digest) {
      let msgBuffer;
      if (typeof TextEncoder !== "undefined") {
        msgBuffer = new TextEncoder().encode(message);
      } else {
        const utf8 = unescape(encodeURIComponent(message));
        const arr = new Uint8Array(utf8.length);
        for (let i = 0; i < utf8.length; i++) arr[i] = utf8.charCodeAt(i);
        msgBuffer = arr;
      }
      const hashBuffer = await crypto.subtle.digest("SHA-256", msgBuffer);
      const hashArray = Array.from(new Uint8Array(hashBuffer));
      pwdLog("sha256 via crypto.subtle");
      return hashArray.map((b) => b.toString(16).padStart(2, "0")).join("");
    }
    throw new Error("No SHA-256 implementation available.");
  }
  function showPasswordModal2() {
    const passwordModal = document.getElementById("passwordModal");
    if (passwordModal) {
      const doubanArea = document.getElementById("doubanArea");
      if (doubanArea) doubanArea.classList.add("hidden");
      const cancelBtn = document.getElementById("passwordCancelBtn");
      if (cancelBtn) cancelBtn.classList.add("hidden");
      if (isPasswordRequired()) {
        const title = passwordModal.querySelector("h2");
        const description = passwordModal.querySelector("p");
        if (title) title.textContent = "\u9700\u8981\u8BBE\u7F6E\u5BC6\u7801";
        if (description) description.textContent = "\u8BF7\u5148\u5728\u90E8\u7F72\u5E73\u53F0\u8BBE\u7F6E PASSWORD \u73AF\u5883\u53D8\u91CF\u6765\u4FDD\u62A4\u60A8\u7684\u5B9E\u4F8B";
        const form = passwordModal.querySelector("form");
        const errorMsg = document.getElementById("passwordError");
        if (form) form.style.display = "none";
        if (errorMsg) {
          errorMsg.textContent = "\u4E3A\u786E\u4FDD\u5B89\u5168\uFF0C\u5FC5\u987B\u8BBE\u7F6E PASSWORD \u73AF\u5883\u53D8\u91CF\u624D\u80FD\u4F7F\u7528\u672C\u670D\u52A1\uFF0C\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458\u8FDB\u884C\u914D\u7F6E";
          errorMsg.classList.remove("hidden");
          errorMsg.className = "text-red-500 mt-2 font-medium";
        }
      } else {
        const title = passwordModal.querySelector("h2");
        const description = passwordModal.querySelector("p");
        if (title) title.textContent = "\u8BBF\u95EE\u9A8C\u8BC1";
        if (description) description.textContent = "\u8BF7\u8F93\u5165\u5BC6\u7801\u7EE7\u7EED\u8BBF\u95EE";
        const form = passwordModal.querySelector("form");
        if (form) form.style.display = "block";
      }
      passwordModal.style.display = "flex";
      passwordModal.style.visibility = "visible";
      passwordModal.classList.remove("hidden");
      passwordModal.setAttribute("aria-hidden", "false");
      if (!isPasswordRequired()) {
        setTimeout(() => {
          const passwordInput = document.getElementById("passwordInput");
          if (passwordInput) {
            passwordInput.focus();
          }
        }, 100);
      }
    }
  }
  function hidePasswordModal() {
    const passwordModal = document.getElementById("passwordModal");
    if (passwordModal) {
      hidePasswordError();
      const passwordInput = document.getElementById("passwordInput");
      if (passwordInput) passwordInput.value = "";
      passwordModal.style.display = "none";
      passwordModal.style.visibility = "hidden";
      passwordModal.setAttribute("class", "hidden");
      passwordModal.setAttribute("aria-hidden", "true");
      if (localStorage.getItem("doubanEnabled") === "true") {
        const doubanArea = document.getElementById("doubanArea");
        if (doubanArea) doubanArea.classList.remove("hidden");
        if (typeof initDouban === "function") {
          initDouban();
        }
      }
    }
  }
  function showPasswordError() {
    const errorElement = document.getElementById("passwordError");
    if (errorElement) {
      errorElement.classList.remove("hidden");
      errorElement.style.display = "block";
    }
  }
  function hidePasswordError() {
    const errorElement = document.getElementById("passwordError");
    if (errorElement) {
      errorElement.classList.add("hidden");
      errorElement.style.display = "none";
    }
  }
  async function handlePasswordSubmit(event) {
    if (event && typeof event.preventDefault === "function") {
      event.preventDefault();
    }
    const passwordInput = document.getElementById("passwordInput");
    const password = passwordInput ? passwordInput.value.trim() : "";
    const ok = await verifyPassword(password);
    if (ok) {
      hidePasswordModal();
      try {
        if (typeof window.CustomEvent === "function") {
          document.dispatchEvent(new CustomEvent("passwordVerified"));
        } else {
          const evt = document.createEvent("Event");
          evt.initEvent("passwordVerified", true, true);
          document.dispatchEvent(evt);
        }
      } catch (e) {
        console.warn("dispatch passwordVerified event failed:", e);
      }
    } else {
      showPasswordError();
      if (passwordInput) {
        passwordInput.value = "";
        passwordInput.focus();
      }
    }
  }
  window.handlePasswordSubmit = handlePasswordSubmit;
  function initPasswordProtection() {
    if (isPasswordProtected() && isPasswordVerified()) {
      hidePasswordModal();
      return;
    }
    if (isPasswordRequired()) {
      showPasswordModal2();
      return;
    }
    if (isPasswordProtected() && !isPasswordVerified()) {
      showPasswordModal2();
      return;
    }
  }
  document.addEventListener("DOMContentLoaded", function() {
    const form = document.getElementById("passwordForm");
    if (form && !form.__passwordBound) {
      form.addEventListener("submit", handlePasswordSubmit);
      form.__passwordBound = true;
    }
    initPasswordProtection();
  });

  // js/app.js
  var selectedAPIs2 = JSON.parse(localStorage.getItem("selectedAPIs") || '["maotai"]');
  var customAPIs = JSON.parse(localStorage.getItem("customAPIs") || "[]");
  document.addEventListener("DOMContentLoaded", function() {
    initAPICheckboxes();
    renderCustomAPIsList();
    updateSelectedApiCount();
    renderSearchHistory();
    if (!localStorage.getItem("hasInitializedDefaults")) {
      selectedAPIs2 = ["maotai"];
      localStorage.setItem("selectedAPIs", JSON.stringify(selectedAPIs2));
      localStorage.setItem("yellowFilterEnabled", "true");
      localStorage.setItem(PLAYER_CONFIG.adFilteringStorage, "true");
      localStorage.setItem("doubanEnabled", "true");
      localStorage.setItem("hasInitializedDefaults", "true");
    }
    const yellowFilterToggle = document.getElementById("yellowFilterToggle");
    if (yellowFilterToggle) {
      yellowFilterToggle.checked = localStorage.getItem("yellowFilterEnabled") === "true";
    }
    const adFilterToggle = document.getElementById("adFilterToggle");
    if (adFilterToggle) {
      adFilterToggle.checked = localStorage.getItem(PLAYER_CONFIG.adFilteringStorage) !== "false";
    }
    setupEventListeners();
    setTimeout(checkAdultAPIsSelected, 100);
  });
  function initAPICheckboxes() {
    const container = document.getElementById("apiCheckboxes");
    container.innerHTML = "";
    const normaldiv = document.createElement("div");
    normaldiv.id = "normaldiv";
    normaldiv.className = "grid grid-cols-2 gap-2";
    const normalTitle = document.createElement("div");
    normalTitle.className = "api-group-title";
    normalTitle.textContent = "\u666E\u901A\u8D44\u6E90";
    normaldiv.appendChild(normalTitle);
    Object.keys(API_SITES).forEach((apiKey) => {
      const api = API_SITES[apiKey];
      if (api.adult) return;
      const checked = selectedAPIs2.includes(apiKey);
      const checkbox = document.createElement("div");
      checkbox.className = "flex items-center";
      checkbox.innerHTML = `
            <input type="checkbox" id="api_${apiKey}" 
                   class="form-checkbox h-3 w-3 text-blue-600 bg-[#222] border border-[#333]" 
                   ${checked ? "checked" : ""} 
                   data-api="${apiKey}">
            <label for="api_${apiKey}" class="ml-1 text-xs text-gray-400 truncate">${api.name}</label>
        `;
      normaldiv.appendChild(checkbox);
      checkbox.querySelector("input").addEventListener("change", function() {
        updateSelectedAPIs2();
        checkAdultAPIsSelected();
      });
    });
    container.appendChild(normaldiv);
    addAdultAPI();
    checkAdultAPIsSelected();
  }
  function addAdultAPI() {
    if (!HIDE_BUILTIN_ADULT_APIS && localStorage.getItem("yellowFilterEnabled") === "false") {
      const container = document.getElementById("apiCheckboxes");
      const adultdiv = document.createElement("div");
      adultdiv.id = "adultdiv";
      adultdiv.className = "grid grid-cols-2 gap-2";
      const adultTitle = document.createElement("div");
      adultTitle.className = "api-group-title adult";
      adultTitle.innerHTML = `\u9EC4\u8272\u8D44\u6E90\u91C7\u96C6\u7AD9 <span class="adult-warning">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
            </svg>
        </span>`;
      adultdiv.appendChild(adultTitle);
      Object.keys(API_SITES).forEach((apiKey) => {
        const api = API_SITES[apiKey];
        if (!api.adult) return;
        const checked = selectedAPIs2.includes(apiKey);
        const checkbox = document.createElement("div");
        checkbox.className = "flex items-center";
        checkbox.innerHTML = `
                <input type="checkbox" id="api_${apiKey}" 
                       class="form-checkbox h-3 w-3 text-blue-600 bg-[#222] border border-[#333] api-adult" 
                       ${checked ? "checked" : ""} 
                       data-api="${apiKey}">
                <label for="api_${apiKey}" class="ml-1 text-xs text-pink-400 truncate">${api.name}</label>
            `;
        adultdiv.appendChild(checkbox);
        checkbox.querySelector("input").addEventListener("change", function() {
          updateSelectedAPIs2();
          checkAdultAPIsSelected();
        });
      });
      container.appendChild(adultdiv);
    }
  }
  function checkAdultAPIsSelected() {
    const adultBuiltinCheckboxes = document.querySelectorAll("#apiCheckboxes .api-adult:checked");
    const customApiCheckboxes = document.querySelectorAll("#customApisList .api-adult:checked");
    const hasAdultSelected = adultBuiltinCheckboxes.length > 0 || customApiCheckboxes.length > 0;
    const yellowFilterToggle = document.getElementById("yellowFilterToggle");
    const yellowFilterContainer = yellowFilterToggle.closest("div").parentNode;
    const filterDescription = yellowFilterContainer.querySelector("p.filter-description");
    if (hasAdultSelected) {
      yellowFilterToggle.checked = false;
      yellowFilterToggle.disabled = true;
      localStorage.setItem("yellowFilterEnabled", "false");
      yellowFilterContainer.classList.add("filter-disabled");
      if (filterDescription) {
        filterDescription.innerHTML = '<strong class="text-pink-300">\u9009\u4E2D\u9EC4\u8272\u8D44\u6E90\u7AD9\u65F6\u65E0\u6CD5\u542F\u7528\u6B64\u8FC7\u6EE4</strong>';
      }
      const existingTooltip = yellowFilterContainer.querySelector(".filter-tooltip");
      if (existingTooltip) {
        existingTooltip.remove();
      }
    } else {
      yellowFilterToggle.disabled = false;
      yellowFilterContainer.classList.remove("filter-disabled");
      if (filterDescription) {
        filterDescription.innerHTML = '\u8FC7\u6EE4"\u4F26\u7406\u7247"\u7B49\u9EC4\u8272\u5185\u5BB9';
      }
      const existingTooltip = yellowFilterContainer.querySelector(".filter-tooltip");
      if (existingTooltip) {
        existingTooltip.remove();
      }
    }
  }
  function renderCustomAPIsList() {
    const container = document.getElementById("customApisList");
    if (!container) return;
    if (customAPIs.length === 0) {
      container.innerHTML = '<p class="text-xs text-gray-500 text-center my-2">\u672A\u6DFB\u52A0\u81EA\u5B9A\u4E49API</p>';
      return;
    }
    container.innerHTML = "";
    customAPIs.forEach((api, index) => {
      const apiItem = document.createElement("div");
      apiItem.className = "flex items-center justify-between p-1 mb-1 bg-[#222] rounded";
      const textColorClass = api.isAdult ? "text-pink-400" : "text-white";
      const adultTag = api.isAdult ? '<span class="text-xs text-pink-400 mr-1">(18+)</span>' : "";
      const detailLine = api.detail ? `<div class="text-xs text-gray-400 truncate">detail: ${api.detail}</div>` : "";
      apiItem.innerHTML = `
            <div class="flex items-center flex-1 min-w-0">
                <input type="checkbox" id="custom_api_${index}" 
                       class="form-checkbox h-3 w-3 text-blue-600 mr-1 ${api.isAdult ? "api-adult" : ""}" 
                       ${selectedAPIs2.includes("custom_" + index) ? "checked" : ""} 
                       data-custom-index="${index}">
                <div class="flex-1 min-w-0">
                    <div class="text-xs font-medium ${textColorClass} truncate">
                        ${adultTag}${api.name}
                    </div>
                    <div class="text-xs text-gray-500 truncate">${api.url}</div>
                    ${detailLine}
                </div>
            </div>
            <div class="flex items-center">
                <button class="text-blue-500 hover:text-blue-700 text-xs px-1" onclick="editCustomApi(${index})">\u270E</button>
                <button class="text-red-500 hover:text-red-700 text-xs px-1" onclick="removeCustomApi(${index})">\u2715</button>
            </div>
        `;
      container.appendChild(apiItem);
      apiItem.querySelector("input").addEventListener("change", function() {
        updateSelectedAPIs2();
        checkAdultAPIsSelected();
      });
    });
  }
  function updateSelectedAPIs2() {
    const builtInApiCheckboxes = document.querySelectorAll("#apiCheckboxes input:checked");
    const builtInApis = Array.from(builtInApiCheckboxes).map((input) => input.dataset.api);
    const customApiCheckboxes = document.querySelectorAll("#customApisList input:checked");
    const customApiIndices = Array.from(customApiCheckboxes).map((input) => "custom_" + input.dataset.customIndex);
    selectedAPIs2 = [...builtInApis, ...customApiIndices];
    localStorage.setItem("selectedAPIs", JSON.stringify(selectedAPIs2));
    updateSelectedApiCount();
  }
  function updateSelectedApiCount() {
    const countEl = document.getElementById("selectedApiCount");
    if (countEl) {
      countEl.textContent = selectedAPIs2.length;
    }
  }
  function setupEventListeners() {
    document.getElementById("searchInput").addEventListener("keypress", function(e) {
      if (e.key === "Enter") {
        search2();
      }
    });
    document.addEventListener("click", function(e) {
      const settingsPanel = document.querySelector("#settingsPanel.show");
      const settingsButton = document.querySelector("#settingsPanel .close-btn");
      if (settingsPanel && settingsButton && !settingsPanel.contains(e.target) && !settingsButton.contains(e.target)) {
        settingsPanel.classList.remove("show");
      }
      const historyPanel = document.querySelector("#historyPanel.show");
      const historyButton = document.querySelector("#historyPanel .close-btn");
      if (historyPanel && historyButton && !historyPanel.contains(e.target) && !historyButton.contains(e.target)) {
        historyPanel.classList.remove("show");
      }
    });
    const yellowFilterToggle = document.getElementById("yellowFilterToggle");
    if (yellowFilterToggle) {
      yellowFilterToggle.addEventListener("change", function(e) {
        localStorage.setItem("yellowFilterEnabled", e.target.checked);
        const adultdiv = document.getElementById("adultdiv");
        if (adultdiv) {
          if (e.target.checked === true) {
            adultdiv.style.display = "none";
          } else if (e.target.checked === false) {
            adultdiv.style.display = "";
          }
        } else {
          addAdultAPI();
        }
      });
    }
    const adFilterToggle = document.getElementById("adFilterToggle");
    if (adFilterToggle) {
      adFilterToggle.addEventListener("change", function(e) {
        localStorage.setItem(PLAYER_CONFIG.adFilteringStorage, e.target.checked);
      });
    }
  }
  async function search2() {
    try {
      if (window.ensurePasswordProtection) {
        window.ensurePasswordProtection();
      } else {
        if (window.isPasswordProtected && window.isPasswordVerified) {
          if (window.isPasswordProtected() && !window.isPasswordVerified()) {
            showPasswordModal && showPasswordModal();
            showToast("\u8BF7\u5148\u5B8C\u6210\u8BBF\u95EE\u9A8C\u8BC1\u540E\u518D\u641C\u7D22", "error");
            return;
          }
        }
      }
    } catch (error) {
      console.warn("Password protection check failed:", error.message);
      showPasswordModal && showPasswordModal();
      showToast("\u8BF7\u5148\u5B8C\u6210\u8BBF\u95EE\u9A8C\u8BC1\u540E\u518D\u641C\u7D22", "error");
      return;
    }
    const query = document.getElementById("searchInput").value.trim();
    if (!query) {
      showToast("\u8BF7\u8F93\u5165\u641C\u7D22\u5185\u5BB9", "info");
      return;
    }
    if (selectedAPIs2.length === 0) {
      showToast("\u8BF7\u81F3\u5C11\u9009\u62E9\u4E00\u4E2AAPI\u6E90", "warning");
      return;
    }
    showLoading();
    try {
      saveSearchHistory(query);
      let allResults = [];
      const searchPromises = selectedAPIs2.map(
        (apiId) => searchByAPIAndKeyWord(apiId, query)
      );
      const resultsArray = await Promise.all(searchPromises);
      resultsArray.forEach((results) => {
        if (Array.isArray(results) && results.length > 0) {
          allResults = allResults.concat(results);
        }
      });
      allResults.sort((a, b) => {
        const nameCompare = (a.vod_name || "").localeCompare(b.vod_name || "");
        if (nameCompare !== 0) return nameCompare;
        return (a.source_name || "").localeCompare(b.source_name || "");
      });
      const searchResultsCount = document.getElementById("searchResultsCount");
      if (searchResultsCount) {
        searchResultsCount.textContent = allResults.length;
      }
      document.getElementById("searchArea").classList.remove("flex-1");
      document.getElementById("searchArea").classList.add("mb-8");
      document.getElementById("resultsArea").classList.remove("hidden");
      const doubanArea = document.getElementById("doubanArea");
      if (doubanArea) {
        doubanArea.classList.add("hidden");
      }
      const resultsDiv = document.getElementById("results");
      if (!allResults || allResults.length === 0) {
        resultsDiv.innerHTML = `
                <div class="col-span-full text-center py-16">
                    <svg class="mx-auto h-12 w-12 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                              d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                    <h3 class="mt-2 text-lg font-medium text-gray-400">\u6CA1\u6709\u627E\u5230\u5339\u914D\u7684\u7ED3\u679C</h3>
                    <p class="mt-1 text-sm text-gray-500">\u8BF7\u5C1D\u8BD5\u5176\u4ED6\u5173\u952E\u8BCD\u6216\u66F4\u6362\u6570\u636E\u6E90</p>
                </div>
            `;
        hideLoading();
        return;
      }
      try {
        const encodedQuery = encodeURIComponent(query);
        window.history.pushState(
          { search: query },
          `\u641C\u7D22: ${query} - LibreTV`,
          `/s=${encodedQuery}`
        );
        document.title = `\u641C\u7D22: ${query} - LibreTV`;
      } catch (e) {
        console.error("\u66F4\u65B0\u6D4F\u89C8\u5668\u5386\u53F2\u5931\u8D25:", e);
      }
      const yellowFilterEnabled = localStorage.getItem("yellowFilterEnabled") === "true";
      if (yellowFilterEnabled) {
        const banned = ["\u4F26\u7406\u7247", "\u798F\u5229", "\u91CC\u756A\u52A8\u6F2B", "\u95E8\u4E8B\u4EF6", "\u841D\u8389\u5C11\u5973", "\u5236\u670D\u8BF1\u60D1", "\u56FD\u4EA7\u4F20\u5A92", "cosplay", "\u9ED1\u4E1D\u8BF1\u60D1", "\u65E0\u7801", "\u65E5\u672C\u65E0\u7801", "\u6709\u7801", "\u65E5\u672C\u6709\u7801", "SWAG", "\u7F51\u7EA2\u4E3B\u64AD", "\u8272\u60C5\u7247", "\u540C\u6027\u7247", "\u798F\u5229\u89C6\u9891", "\u798F\u5229\u7247"];
        allResults = allResults.filter((item) => {
          const typeName = item.type_name || "";
          return !banned.some((keyword) => typeName.includes(keyword));
        });
      }
      const safeResults = allResults.map((item) => {
        const safeId = item.vod_id ? item.vod_id.toString().replace(/[^\w-]/g, "") : "";
        const safeName = (item.vod_name || "").toString().replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;");
        const sourceInfo = item.source_name ? `<span class="bg-[#222] text-xs px-1.5 py-0.5 rounded-full">${item.source_name}</span>` : "";
        const sourceCode = item.source_code || "";
        const apiUrlAttr = item.api_url ? `data-api-url="${item.api_url.replace(/"/g, "&quot;")}"` : "";
        const hasCover = item.vod_pic && item.vod_pic.startsWith("http");
        return `
                <div class="card-hover bg-[#111] rounded-lg overflow-hidden cursor-pointer transition-all hover:scale-[1.02] h-full shadow-sm hover:shadow-md" 
                     onclick="showDetails('${safeId}','${safeName}','${sourceCode}')" ${apiUrlAttr}>
                    <div class="flex h-full">
                        ${hasCover ? `
                        <div class="relative flex-shrink-0 search-card-img-container">
                            <img src="${item.vod_pic}" alt="${safeName}" 
                                 class="h-full w-full object-cover transition-transform hover:scale-110" 
                                 onerror="this.onerror=null; this.src='https://via.placeholder.com/300x450?text=\u65E0\u5C01\u9762'; this.classList.add('object-contain');" 
                                 loading="lazy">
                            <div class="absolute inset-0 bg-gradient-to-r from-black/30 to-transparent"></div>
                        </div>` : ""}
                        
                        <div class="p-2 flex flex-col flex-grow">
                            <div class="flex-grow">
                                <h3 class="font-semibold mb-2 break-words line-clamp-2 ${hasCover ? "" : "text-center"}" title="${safeName}">${safeName}</h3>
                                
                                <div class="flex flex-wrap ${hasCover ? "" : "justify-center"} gap-1 mb-2">
                                    ${(item.type_name || "").toString().replace(/</g, "&lt;") ? `<span class="text-xs py-0.5 px-1.5 rounded bg-opacity-20 bg-blue-500 text-blue-300">
                                          ${(item.type_name || "").toString().replace(/</g, "&lt;")}
                                      </span>` : ""}
                                    ${item.vod_year || "" ? `<span class="text-xs py-0.5 px-1.5 rounded bg-opacity-20 bg-purple-500 text-purple-300">
                                          ${item.vod_year}
                                      </span>` : ""}
                                </div>
                                <p class="text-gray-400 line-clamp-2 overflow-hidden ${hasCover ? "" : "text-center"} mb-2">
                                    ${(item.vod_remarks || "\u6682\u65E0\u4ECB\u7ECD").toString().replace(/</g, "&lt;")}
                                </p>
                            </div>
                            
                            <div class="flex justify-between items-center mt-1 pt-1 border-t border-gray-800">
                                ${sourceInfo ? `<div>${sourceInfo}</div>` : "<div></div>"}
                                <!-- \u63A5\u53E3\u540D\u79F0\u8FC7\u957F\u4F1A\u88AB\u6324\u53D8\u5F62
                                <div>
                                    <span class="text-gray-500 flex items-center hover:text-blue-400 transition-colors">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z" />
                                        </svg>
                                        \u64AD\u653E
                                    </span>
                                </div>
                                -->
                            </div>
                        </div>
                    </div>
                </div>
            `;
      }).join("");
      resultsDiv.innerHTML = safeResults;
    } catch (error) {
      console.error("\u641C\u7D22\u9519\u8BEF:", error);
      if (error.name === "AbortError") {
        showToast("\u641C\u7D22\u8BF7\u6C42\u8D85\u65F6\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC\u8FDE\u63A5", "error");
      } else {
        var msg = "\u641C\u7D22\u8BF7\u6C42\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5";
        if (window.isPasswordProtected && window.isPasswordVerified && window.isPasswordProtected() && !window.isPasswordVerified()) {
          msg = "\u8BF7\u5148\u5B8C\u6210\u8BBF\u95EE\u9A8C\u8BC1\u540E\u518D\u641C\u7D22";
        }
        showToast(msg, "error");
      }
    } finally {
      hideLoading();
    }
  }
  function hookInput() {
    const input = document.getElementById("searchInput");
    const descriptor = Object.getOwnPropertyDescriptor(HTMLInputElement.prototype, "value");
    Object.defineProperty(input, "value", {
      get: function() {
        const originalValue = descriptor.get.call(this);
        return originalValue != null ? String(originalValue) : "";
      },
      set: function(value) {
        const strValue = String(value);
        descriptor.set.call(this, strValue);
        this.dispatchEvent(new Event("input", { bubbles: true }));
      }
    });
    input.value = "";
  }
  document.addEventListener("DOMContentLoaded", hookInput);
})();
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vY29uZmlnLmpzIiwgIi4uL3Byb3h5LWF1dGguanMiLCAiLi4vY3VzdG9tZXJfc2l0ZS5qcyIsICIuLi91aS5qcyIsICIuLi9hcGkuanMiLCAiLi4vZG91YmFuLmpzIiwgIi4uL3Bhc3N3b3JkLmpzIiwgIi4uL2FwcC5qcyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiLy8gXHU1MTY4XHU1QzQwXHU1RTM4XHU5MUNGXHU5MTREXHU3RjZFXHJcbmNvbnN0IFBST1hZX1VSTCA9ICcvcHJveHkvJzsgICAgLy8gXHU5MDAyXHU3NTI4XHU0RThFIENsb3VkZmxhcmUsIE5ldGxpZnkgKFx1NUUyNlx1OTFDRFx1NTE5OSksIFZlcmNlbCAoXHU1RTI2XHU5MUNEXHU1MTk5KVxyXG4vLyBjb25zdCBIT1BMQVlFUl9VUkwgPSAnaHR0cHM6Ly9ob3BsYXllci5jb20vaW5kZXguaHRtbCc7XHJcbmNvbnN0IFNFQVJDSF9ISVNUT1JZX0tFWSA9ICd2aWRlb1NlYXJjaEhpc3RvcnknO1xyXG5jb25zdCBNQVhfSElTVE9SWV9JVEVNUyA9IDU7XHJcblxyXG4vLyBcdTVCQzZcdTc4MDFcdTRGRERcdTYyQTRcdTkxNERcdTdGNkVcclxuLy8gXHU2Q0U4XHU2MTBGXHVGRjFBUEFTU1dPUkQgXHU3M0FGXHU1ODgzXHU1M0Q4XHU5MUNGXHU2NjJGXHU1RkM1XHU5NzAwXHU3Njg0XHVGRjBDXHU2MjQwXHU2NzA5XHU5MEU4XHU3RjcyXHU5MEZEXHU1RkM1XHU5ODdCXHU4QkJFXHU3RjZFXHU1QkM2XHU3ODAxXHU0RUU1XHU3ODZFXHU0RkREXHU1Qjg5XHU1MTY4XHJcbmNvbnN0IFBBU1NXT1JEX0NPTkZJRyA9IHtcclxuICAgIGxvY2FsU3RvcmFnZUtleTogJ3Bhc3N3b3JkVmVyaWZpZWQnLCAgLy8gXHU1QjU4XHU1MEE4XHU5QThDXHU4QkMxXHU3MkI2XHU2MDAxXHU3Njg0XHU5NTJFXHU1NDBEXHJcbiAgICB2ZXJpZmljYXRpb25UVEw6IDkwICogMjQgKiA2MCAqIDYwICogMTAwMCAgLy8gXHU5QThDXHU4QkMxXHU2NzA5XHU2NTQ4XHU2NzFGXHVGRjA4OTBcdTU5MjlcdUZGMENcdTdFQTYzXHU0RTJBXHU2NzA4XHVGRjA5XHJcbn07XHJcblxyXG4vLyBcdTdGNTFcdTdBRDlcdTRGRTFcdTYwNkZcdTkxNERcdTdGNkVcclxuY29uc3QgU0lURV9DT05GSUcgPSB7XHJcbiAgICBuYW1lOiAnTGlicmVUVicsXHJcbiAgICB1cmw6ICdodHRwczovL2xpYnJldHYuaXMtYW4ub3JnJyxcclxuICAgIGRlc2NyaXB0aW9uOiAnXHU1MTREXHU4RDM5XHU1NzI4XHU3RUJGXHU4OUM2XHU5ODkxXHU2NDFDXHU3RDIyXHU0RTBFXHU4OUMyXHU3NzBCXHU1RTczXHU1M0YwJyxcclxuICAgIGxvZ286ICdpbWFnZS9sb2dvLnBuZycsXHJcbiAgICB2ZXJzaW9uOiAnMS4wLjMnXHJcbn07XHJcblxyXG4vLyBBUElcdTdBRDlcdTcwQjlcdTkxNERcdTdGNkVcclxuY29uc3QgQVBJX1NJVEVTID0ge1xyXG4gICAgdGVzdFNvdXJjZToge1xyXG4gICAgICAgIGFwaTogJ2h0dHBzOi8vd3d3LmV4YW1wbGUuY29tL2FwaS5waHAvcHJvdmlkZS92b2QnLFxyXG4gICAgICAgIG5hbWU6ICdcdTdBN0FcdTUxODVcdTVCQjlcdTZENEJcdThCRDVcdTZFOTAnLFxyXG4gICAgICAgIGFkdWx0OiB0cnVlXHJcbiAgICB9XHJcbiAgICAvL0FSQ0hJVkUgaHR0cHM6Ly90ZWxlZ3JhLnBoL0FQSXMtMDgtMTJcclxufTtcclxuXHJcbi8vIFx1NUI5QVx1NEU0OVx1NTQwOFx1NUU3Nlx1NjVCOVx1NkNENVxyXG5mdW5jdGlvbiBleHRlbmRBUElTaXRlcyhuZXdTaXRlcykge1xyXG4gICAgT2JqZWN0LmFzc2lnbihBUElfU0lURVMsIG5ld1NpdGVzKTtcclxufVxyXG5cclxuLy8gXHU2NkI0XHU5NzMyXHU1MjMwXHU1MTY4XHU1QzQwXHJcbndpbmRvdy5BUElfU0lURVMgPSBBUElfU0lURVM7XHJcbndpbmRvdy5leHRlbmRBUElTaXRlcyA9IGV4dGVuZEFQSVNpdGVzO1xyXG5cclxuXHJcbi8vIFx1NkRGQlx1NTJBMFx1ODA1QVx1NTQwOFx1NjQxQ1x1N0QyMlx1NzY4NFx1OTE0RFx1N0Y2RVx1OTAwOVx1OTg3OVxyXG5jb25zdCBBR0dSRUdBVEVEX1NFQVJDSF9DT05GSUcgPSB7XHJcbiAgICBlbmFibGVkOiB0cnVlLCAgICAgICAgICAgICAvLyBcdTY2MkZcdTU0MjZcdTU0MkZcdTc1MjhcdTgwNUFcdTU0MDhcdTY0MUNcdTdEMjJcclxuICAgIHRpbWVvdXQ6IDgwMDAsICAgICAgICAgICAgLy8gXHU1MzU1XHU0RTJBXHU2RTkwXHU4RDg1XHU2NUY2XHU2NUY2XHU5NUY0XHVGRjA4XHU2QkVCXHU3OUQyXHVGRjA5XHJcbiAgICBtYXhSZXN1bHRzOiAxMDAwMCwgICAgICAgICAgLy8gXHU2NzAwXHU1OTI3XHU3RUQzXHU2NzlDXHU2NTcwXHU5MUNGXHJcbiAgICBwYXJhbGxlbFJlcXVlc3RzOiB0cnVlLCAgIC8vIFx1NjYyRlx1NTQyNlx1NUU3Nlx1ODg0Q1x1OEJGN1x1NkM0Mlx1NjI0MFx1NjcwOVx1NkU5MFxyXG4gICAgc2hvd1NvdXJjZUJhZGdlczogdHJ1ZSAgICAvLyBcdTY2MkZcdTU0MjZcdTY2M0VcdTc5M0FcdTY3NjVcdTZFOTBcdTVGQkRcdTdBRTBcclxufTtcclxuXHJcbi8vIFx1NjJCRFx1OEM2MUFQSVx1OEJGN1x1NkM0Mlx1OTE0RFx1N0Y2RVxyXG5jb25zdCBBUElfQ09ORklHID0ge1xyXG4gICAgc2VhcmNoOiB7XHJcbiAgICAgICAgLy8gXHU1M0VBXHU2MkZDXHU2M0E1XHU1M0MyXHU2NTcwXHU5MEU4XHU1MjA2XHVGRjBDXHU0RTBEXHU1MThEXHU1MzA1XHU1NDJCIC9hcGkucGhwL3Byb3ZpZGUvdm9kL1xyXG4gICAgICAgIHBhdGg6ICc/YWM9dmlkZW9saXN0JndkPScsXHJcbiAgICAgICAgcGFnZVBhdGg6ICc/YWM9dmlkZW9saXN0JndkPXtxdWVyeX0mcGc9e3BhZ2V9JyxcclxuICAgICAgICBtYXhQYWdlczogNTAsIC8vIFx1NjcwMFx1NTkyN1x1ODNCN1x1NTNENlx1OTg3NVx1NjU3MFxyXG4gICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgJ1VzZXItQWdlbnQnOiAnTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzEyMi4wLjAuMCBTYWZhcmkvNTM3LjM2JyxcclxuICAgICAgICAgICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBkZXRhaWw6IHtcclxuICAgICAgICAvLyBcdTUzRUFcdTYyRkNcdTYzQTVcdTUzQzJcdTY1NzBcdTkwRThcdTUyMDZcclxuICAgICAgICBwYXRoOiAnP2FjPXZpZGVvbGlzdCZpZHM9JyxcclxuICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICdVc2VyLUFnZW50JzogJ01vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdpbjY0OyB4NjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS8xMjIuMC4wLjAgU2FmYXJpLzUzNy4zNicsXHJcbiAgICAgICAgICAgICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcblxyXG4vLyBcdTRGMThcdTUzMTZcdTU0MEVcdTc2ODRcdTZCNjNcdTUyMTlcdTg4NjhcdThGQkVcdTVGMEZcdTZBMjFcdTVGMEZcclxuY29uc3QgTTNVOF9QQVRURVJOID0gL1xcJGh0dHBzPzpcXC9cXC9bXlwiJ1xcc10rP1xcLm0zdTgvZztcclxuXHJcbi8vIFx1NkRGQlx1NTJBMFx1ODFFQVx1NUI5QVx1NEU0OVx1NjRBRFx1NjUzRVx1NTY2OFVSTFxyXG5jb25zdCBDVVNUT01fUExBWUVSX1VSTCA9ICdwbGF5ZXIuaHRtbCc7IC8vIFx1NEY3Rlx1NzUyOFx1NzZGOFx1NUJGOVx1OERFRlx1NUY4NFx1NUYxNVx1NzUyOFx1NjcyQ1x1NTczMHBsYXllci5odG1sXHJcblxyXG4vLyBcdTU4OUVcdTUyQTBcdTg5QzZcdTk4OTFcdTY0QURcdTY1M0VcdTc2RjhcdTUxNzNcdTkxNERcdTdGNkVcclxuY29uc3QgUExBWUVSX0NPTkZJRyA9IHtcclxuICAgIGF1dG9wbGF5OiB0cnVlLFxyXG4gICAgYWxsb3dGdWxsc2NyZWVuOiB0cnVlLFxyXG4gICAgd2lkdGg6ICcxMDAlJyxcclxuICAgIGhlaWdodDogJzYwMCcsXHJcbiAgICB0aW1lb3V0OiAxNTAwMCwgIC8vIFx1NjRBRFx1NjUzRVx1NTY2OFx1NTJBMFx1OEY3RFx1OEQ4NVx1NjVGNlx1NjVGNlx1OTVGNFxyXG4gICAgZmlsdGVyQWRzOiB0cnVlLCAgLy8gXHU2NjJGXHU1NDI2XHU1NDJGXHU3NTI4XHU1RTdGXHU1NDRBXHU4RkM3XHU2RUU0XHJcbiAgICBhdXRvUGxheU5leHQ6IHRydWUsICAvLyBcdTlFRDhcdThCQTRcdTU0MkZcdTc1MjhcdTgxRUFcdTUyQThcdThGREVcdTY0QURcdTUyOUZcdTgwRkRcclxuICAgIGFkRmlsdGVyaW5nRW5hYmxlZDogdHJ1ZSwgLy8gXHU5RUQ4XHU4QkE0XHU1RjAwXHU1NDJGXHU1MjA2XHU3MjQ3XHU1RTdGXHU1NDRBXHU4RkM3XHU2RUU0XHJcbiAgICBhZEZpbHRlcmluZ1N0b3JhZ2U6ICdhZEZpbHRlcmluZ0VuYWJsZWQnIC8vIFx1NUI1OFx1NTBBOFx1NUU3Rlx1NTQ0QVx1OEZDN1x1NkVFNFx1OEJCRVx1N0Y2RVx1NzY4NFx1OTUyRVx1NTQwRFxyXG59O1xyXG5cclxuLy8gXHU1ODlFXHU1MkEwXHU5NTE5XHU4QkVGXHU0RkUxXHU2MDZGXHU2NzJDXHU1NzMwXHU1MzE2XHJcbmNvbnN0IEVSUk9SX01FU1NBR0VTID0ge1xyXG4gICAgTkVUV09SS19FUlJPUjogJ1x1N0Y1MVx1N0VEQ1x1OEZERVx1NjNBNVx1OTUxOVx1OEJFRlx1RkYwQ1x1OEJGN1x1NjhDMFx1NjdFNVx1N0Y1MVx1N0VEQ1x1OEJCRVx1N0Y2RScsXHJcbiAgICBUSU1FT1VUX0VSUk9SOiAnXHU4QkY3XHU2QzQyXHU4RDg1XHU2NUY2XHVGRjBDXHU2NzBEXHU1MkExXHU1NjY4XHU1NENEXHU1RTk0XHU2NUY2XHU5NUY0XHU4RkM3XHU5NTdGJyxcclxuICAgIEFQSV9FUlJPUjogJ0FQSVx1NjNBNVx1NTNFM1x1OEZENFx1NTZERVx1OTUxOVx1OEJFRlx1RkYwQ1x1OEJGN1x1NUMxRFx1OEJENVx1NjZGNFx1NjM2Mlx1NjU3MFx1NjM2RVx1NkU5MCcsXHJcbiAgICBQTEFZRVJfRVJST1I6ICdcdTY0QURcdTY1M0VcdTU2NjhcdTUyQTBcdThGN0RcdTU5MzFcdThEMjVcdUZGMENcdThCRjdcdTVDMURcdThCRDVcdTUxNzZcdTRFRDZcdTg5QzZcdTk4OTFcdTZFOTAnLFxyXG4gICAgVU5LTk9XTl9FUlJPUjogJ1x1NTNEMVx1NzUxRlx1NjcyQVx1NzdFNVx1OTUxOVx1OEJFRlx1RkYwQ1x1OEJGN1x1NTIzN1x1NjVCMFx1OTg3NVx1OTc2Mlx1OTFDRFx1OEJENSdcclxufTtcclxuXHJcbi8vIFx1NkRGQlx1NTJBMFx1OEZEQlx1NEUwMFx1NkI2NVx1NUI4OVx1NTE2OFx1OEJCRVx1N0Y2RVxyXG5jb25zdCBTRUNVUklUWV9DT05GSUcgPSB7XHJcbiAgICBlbmFibGVYU1NQcm90ZWN0aW9uOiB0cnVlLCAgLy8gXHU2NjJGXHU1NDI2XHU1NDJGXHU3NTI4WFNTXHU0RkREXHU2MkE0XHJcbiAgICBzYW5pdGl6ZVVybHM6IHRydWUsICAgICAgICAgLy8gXHU2NjJGXHU1NDI2XHU2RTA1XHU3NDA2VVJMXHJcbiAgICBtYXhRdWVyeUxlbmd0aDogMTAwLCAgICAgICAgLy8gXHU2NzAwXHU1OTI3XHU2NDFDXHU3RDIyXHU5NTdGXHU1RUE2XHJcbiAgICAvLyBhbGxvd2VkQXBpRG9tYWlucyBcdTRFMERcdTUxOERcdTk3MDBcdTg5ODFcdUZGMENcdTU2RTBcdTRFM0FcdTYyNDBcdTY3MDlcdThCRjdcdTZDNDJcdTkwRkRcdTkwMUFcdThGQzdcdTUxODVcdTkwRThcdTRFRTNcdTc0MDZcclxufTtcclxuXHJcbi8vIFx1NkRGQlx1NTJBMFx1NTkxQVx1NEUyQVx1ODFFQVx1NUI5QVx1NEU0OUFQSVx1NkU5MFx1NzY4NFx1OTE0RFx1N0Y2RVxyXG5jb25zdCBDVVNUT01fQVBJX0NPTkZJRyA9IHtcclxuICAgIHNlcGFyYXRvcjogJywnLCAgICAgICAgICAgLy8gXHU1MjA2XHU5Njk0XHU3QjI2XHJcbiAgICBtYXhTb3VyY2VzOiA1LCAgICAgICAgICAgIC8vIFx1NjcwMFx1NTkyN1x1NTE0MVx1OEJCOFx1NzY4NFx1ODFFQVx1NUI5QVx1NEU0OVx1NkU5MFx1NjU3MFx1OTFDRlxyXG4gICAgdGVzdFRpbWVvdXQ6IDUwMDAsICAgICAgICAvLyBcdTZENEJcdThCRDVcdThEODVcdTY1RjZcdTY1RjZcdTk1RjQoXHU2QkVCXHU3OUQyKVxyXG4gICAgbmFtZVByZWZpeDogJ0N1c3RvbS0nLCAgICAvLyBcdTgxRUFcdTVCOUFcdTRFNDlcdTZFOTBcdTU0MERcdTc5RjBcdTUyNERcdTdGMDBcclxuICAgIHZhbGlkYXRlVXJsOiB0cnVlLCAgICAgICAgLy8gXHU5QThDXHU4QkMxVVJMXHU2ODNDXHU1RjBGXHJcbiAgICBjYWNoZVJlc3VsdHM6IHRydWUsICAgICAgIC8vIFx1N0YxM1x1NUI1OFx1NkQ0Qlx1OEJENVx1N0VEM1x1Njc5Q1xyXG4gICAgY2FjaGVFeHBpcnk6IDUxODQwMDAwMDAsICAvLyBcdTdGMTNcdTVCNThcdThGQzdcdTY3MUZcdTY1RjZcdTk1RjQoMlx1NEUyQVx1NjcwOClcclxuICAgIGFkdWx0UHJvcE5hbWU6ICdpc0FkdWx0JyAvLyBcdTc1MjhcdTRFOEVcdTY4MDdcdThCQjBcdTYyMTBcdTRFQkFcdTUxODVcdTVCQjlcdTc2ODRcdTVDNUVcdTYwMjdcdTU0MERcclxufTtcclxuXHJcbi8vIFx1OTY5MFx1ODVDRlx1NTE4NVx1N0Y2RVx1OUVDNFx1ODI3Mlx1OTFDN1x1OTZDNlx1N0FEOUFQSVx1NzY4NFx1NTNEOFx1OTFDRlxyXG5jb25zdCBISURFX0JVSUxUSU5fQURVTFRfQVBJUyA9IGZhbHNlO1xyXG4iLCAiLyoqXHJcbiAqIFx1NEVFM1x1NzQwNlx1OEJGN1x1NkM0Mlx1OTI3NFx1Njc0M1x1NkEyMVx1NTc1N1xyXG4gKiBcdTRFM0FcdTRFRTNcdTc0MDZcdThCRjdcdTZDNDJcdTZERkJcdTUyQTBcdTU3RkFcdTRFOEUgUEFTU1dPUkQgXHU3Njg0XHU5Mjc0XHU2NzQzXHU2NzNBXHU1MjM2XHJcbiAqL1xyXG5cclxuLy8gXHU0RUNFXHU1MTY4XHU1QzQwXHU5MTREXHU3RjZFXHU4M0I3XHU1M0Q2XHU1QkM2XHU3ODAxXHU1NEM4XHU1RTBDXHVGRjA4XHU1OTgyXHU2NzlDXHU1QjU4XHU1NzI4XHVGRjA5XHJcbmxldCBjYWNoZWRQYXNzd29yZEhhc2ggPSBudWxsO1xyXG5cclxuLyoqXHJcbiAqIFx1ODNCN1x1NTNENlx1NUY1M1x1NTI0RFx1NEYxQVx1OEJERFx1NzY4NFx1NUJDNlx1NzgwMVx1NTRDOFx1NUUwQ1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gZ2V0UGFzc3dvcmRIYXNoKCkge1xyXG4gICAgaWYgKGNhY2hlZFBhc3N3b3JkSGFzaCkge1xyXG4gICAgICAgIHJldHVybiBjYWNoZWRQYXNzd29yZEhhc2g7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIDEuIFx1NEYxOFx1NTE0OFx1NEVDRVx1NURGMlx1NUI1OFx1NTBBOFx1NzY4NFx1NEVFM1x1NzQwNlx1OTI3NFx1Njc0M1x1NTRDOFx1NUUwQ1x1ODNCN1x1NTNENlxyXG4gICAgY29uc3Qgc3RvcmVkSGFzaCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwcm94eUF1dGhIYXNoJyk7XHJcbiAgICBpZiAoc3RvcmVkSGFzaCkge1xyXG4gICAgICAgIGNhY2hlZFBhc3N3b3JkSGFzaCA9IHN0b3JlZEhhc2g7XHJcbiAgICAgICAgcmV0dXJuIHN0b3JlZEhhc2g7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIDIuIFx1NUMxRFx1OEJENVx1NEVDRVx1NUJDNlx1NzgwMVx1OUE4Q1x1OEJDMVx1NzJCNlx1NjAwMVx1ODNCN1x1NTNENlx1RkYwOHBhc3N3b3JkLmpzIFx1OUE4Q1x1OEJDMVx1NTQwRVx1NUI1OFx1NTBBOFx1NzY4NFx1NTRDOFx1NUUwQ1x1RkYwOVxyXG4gICAgY29uc3QgcGFzc3dvcmRWZXJpZmllZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwYXNzd29yZFZlcmlmaWVkJyk7XHJcbiAgICBjb25zdCBzdG9yZWRQYXNzd29yZEhhc2ggPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncGFzc3dvcmRIYXNoJyk7XHJcbiAgICBpZiAocGFzc3dvcmRWZXJpZmllZCA9PT0gJ3RydWUnICYmIHN0b3JlZFBhc3N3b3JkSGFzaCkge1xyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdwcm94eUF1dGhIYXNoJywgc3RvcmVkUGFzc3dvcmRIYXNoKTtcclxuICAgICAgICBjYWNoZWRQYXNzd29yZEhhc2ggPSBzdG9yZWRQYXNzd29yZEhhc2g7XHJcbiAgICAgICAgcmV0dXJuIHN0b3JlZFBhc3N3b3JkSGFzaDtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gMy4gXHU1QzFEXHU4QkQ1XHU0RUNFXHU3NTI4XHU2MjM3XHU4RjkzXHU1MTY1XHU3Njg0XHU1QkM2XHU3ODAxXHU3NTFGXHU2MjEwXHU1NEM4XHU1RTBDXHJcbiAgICBjb25zdCB1c2VyUGFzc3dvcmQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlclBhc3N3b3JkJyk7XHJcbiAgICBpZiAodXNlclBhc3N3b3JkKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gXHU1MkE4XHU2MDAxXHU1QkZDXHU1MTY1IHNoYTI1NiBcdTUxRkRcdTY1NzBcclxuICAgICAgICAgICAgY29uc3QgeyBzaGEyNTYgfSA9IGF3YWl0IGltcG9ydCgnLi9zaGEyNTYuanMnKTtcclxuICAgICAgICAgICAgY29uc3QgaGFzaCA9IGF3YWl0IHNoYTI1Nih1c2VyUGFzc3dvcmQpO1xyXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncHJveHlBdXRoSGFzaCcsIGhhc2gpO1xyXG4gICAgICAgICAgICBjYWNoZWRQYXNzd29yZEhhc2ggPSBoYXNoO1xyXG4gICAgICAgICAgICByZXR1cm4gaGFzaDtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdTc1MUZcdTYyMTBcdTVCQzZcdTc4MDFcdTU0QzhcdTVFMENcdTU5MzFcdThEMjU6JywgZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gNC4gXHU1OTgyXHU2NzlDXHU3NTI4XHU2MjM3XHU2Q0ExXHU2NzA5XHU4QkJFXHU3RjZFXHU1QkM2XHU3ODAxXHVGRjBDXHU1QzFEXHU4QkQ1XHU0RjdGXHU3NTI4XHU3M0FGXHU1ODgzXHU1M0Q4XHU5MUNGXHU0RTJEXHU3Njg0XHU1QkM2XHU3ODAxXHU1NEM4XHU1RTBDXHJcbiAgICBpZiAod2luZG93Ll9fRU5WX18gJiYgd2luZG93Ll9fRU5WX18uUEFTU1dPUkQpIHtcclxuICAgICAgICBjYWNoZWRQYXNzd29yZEhhc2ggPSB3aW5kb3cuX19FTlZfXy5QQVNTV09SRDtcclxuICAgICAgICByZXR1cm4gd2luZG93Ll9fRU5WX18uUEFTU1dPUkQ7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiBudWxsO1xyXG59XHJcblxyXG4vKipcclxuICogXHU0RTNBXHU0RUUzXHU3NDA2XHU4QkY3XHU2QzQyVVJMXHU2REZCXHU1MkEwXHU5Mjc0XHU2NzQzXHU1M0MyXHU2NTcwXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBhZGRBdXRoVG9Qcm94eVVybCh1cmwpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgaGFzaCA9IGF3YWl0IGdldFBhc3N3b3JkSGFzaCgpO1xyXG4gICAgICAgIGlmICghaGFzaCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ1x1NjVFMFx1NkNENVx1ODNCN1x1NTNENlx1NUJDNlx1NzgwMVx1NTRDOFx1NUUwQ1x1RkYwQ1x1NEVFM1x1NzQwNlx1OEJGN1x1NkM0Mlx1NTNFRlx1ODBGRFx1NTkzMVx1OEQyNScpO1xyXG4gICAgICAgICAgICByZXR1cm4gdXJsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTY1RjZcdTk1RjRcdTYyMzNcdTk2MzJcdTZCNjJcdTkxQ0RcdTY1M0VcdTY1M0JcdTUxRkJcclxuICAgICAgICBjb25zdCB0aW1lc3RhbXAgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NjhDMFx1NjdFNVVSTFx1NjYyRlx1NTQyNlx1NURGMlx1NTMwNVx1NTQyQlx1NjdFNVx1OEJFMlx1NTNDMlx1NjU3MFxyXG4gICAgICAgIGNvbnN0IHNlcGFyYXRvciA9IHVybC5pbmNsdWRlcygnPycpID8gJyYnIDogJz8nO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBgJHt1cmx9JHtzZXBhcmF0b3J9YXV0aD0ke2VuY29kZVVSSUNvbXBvbmVudChoYXNoKX0mdD0ke3RpbWVzdGFtcH1gO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdcdTZERkJcdTUyQTBcdTRFRTNcdTc0MDZcdTkyNzRcdTY3NDNcdTU5MzFcdThEMjU6JywgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiB1cmw7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBcdTlBOENcdThCQzFcdTRFRTNcdTc0MDZcdThCRjdcdTZDNDJcdTc2ODRcdTkyNzRcdTY3NDNcclxuICovXHJcbmZ1bmN0aW9uIHZhbGlkYXRlUHJveHlBdXRoKGF1dGhIYXNoLCBzZXJ2ZXJQYXNzd29yZEhhc2gsIHRpbWVzdGFtcCkge1xyXG4gICAgaWYgKCFhdXRoSGFzaCB8fCAhc2VydmVyUGFzc3dvcmRIYXNoKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBcdTlBOENcdThCQzFcdTU0QzhcdTVFMENcdTY2MkZcdTU0MjZcdTUzMzlcdTkxNERcclxuICAgIGlmIChhdXRoSGFzaCAhPT0gc2VydmVyUGFzc3dvcmRIYXNoKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBcdTlBOENcdThCQzFcdTY1RjZcdTk1RjRcdTYyMzNcdUZGMDgxMFx1NTIwNlx1OTQ5Rlx1NjcwOVx1NjU0OFx1NjcxRlx1RkYwOVxyXG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcclxuICAgIGNvbnN0IG1heEFnZSA9IDEwICogNjAgKiAxMDAwOyAvLyAxMFx1NTIwNlx1OTQ5RlxyXG4gICAgXHJcbiAgICBpZiAodGltZXN0YW1wICYmIChub3cgLSBwYXJzZUludCh0aW1lc3RhbXApKSA+IG1heEFnZSkge1xyXG4gICAgICAgIGNvbnNvbGUud2FybignXHU0RUUzXHU3NDA2XHU4QkY3XHU2QzQyXHU2NUY2XHU5NUY0XHU2MjMzXHU4RkM3XHU2NzFGJyk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFx1NkUwNVx1OTY2NFx1N0YxM1x1NUI1OFx1NzY4NFx1OTI3NFx1Njc0M1x1NEZFMVx1NjA2RlxyXG4gKi9cclxuZnVuY3Rpb24gY2xlYXJBdXRoQ2FjaGUoKSB7XHJcbiAgICBjYWNoZWRQYXNzd29yZEhhc2ggPSBudWxsO1xyXG4gICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3Byb3h5QXV0aEhhc2gnKTtcclxufVxyXG5cclxuLy8gXHU3NkQxXHU1NDJDXHU1QkM2XHU3ODAxXHU1M0Q4XHU1MzE2XHVGRjBDXHU2RTA1XHU5NjY0XHU3RjEzXHU1QjU4XHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzdG9yYWdlJywgKGUpID0+IHtcclxuICAgIGlmIChlLmtleSA9PT0gJ3VzZXJQYXNzd29yZCcgfHwgKHdpbmRvdy5QQVNTV09SRF9DT05GSUcgJiYgZS5rZXkgPT09IHdpbmRvdy5QQVNTV09SRF9DT05GSUcubG9jYWxTdG9yYWdlS2V5KSkge1xyXG4gICAgICAgIGNsZWFyQXV0aENhY2hlKCk7XHJcbiAgICB9XHJcbn0pO1xyXG5cclxuLy8gXHU1QkZDXHU1MUZBXHU1MUZEXHU2NTcwXHJcbndpbmRvdy5Qcm94eUF1dGggPSB7XHJcbiAgICBhZGRBdXRoVG9Qcm94eVVybCxcclxuICAgIHZhbGlkYXRlUHJveHlBdXRoLFxyXG4gICAgY2xlYXJBdXRoQ2FjaGUsXHJcbiAgICBnZXRQYXNzd29yZEhhc2hcclxufTtcclxuIiwgImNvbnN0IENVU1RPTUVSX1NJVEVTID0ge1xyXG4gICAgbWFvdGFpOiB7XHJcbiAgICAgICAgYXBpOiAnaHR0cHM6Ly9jYWlqaS5tYW90YWl6eS5jYy9hcGkucGhwL3Byb3ZpZGUvdm9kL2F0L2pvc24nLFxyXG4gICAgICAgIG5hbWU6ICdcdTgzMDVcdTUzRjBcdThENDRcdTZFOTAnLFxyXG4gICAgfVxyXG59O1xyXG5cclxuLy8gXHU4QzAzXHU3NTI4XHU1MTY4XHU1QzQwXHU2NUI5XHU2Q0Q1XHU1NDA4XHU1RTc2XHJcbmlmICh3aW5kb3cuZXh0ZW5kQVBJU2l0ZXMpIHtcclxuICAgIHdpbmRvdy5leHRlbmRBUElTaXRlcyhDVVNUT01FUl9TSVRFUyk7XHJcbn0gZWxzZSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiXHU5NTE5XHU4QkVGXHVGRjFBXHU4QkY3XHU1MTQ4XHU1MkEwXHU4RjdEIGNvbmZpZy5qc1x1RkYwMVwiKTtcclxufVxyXG4iLCAiLy8gVUlcdTc2RjhcdTUxNzNcdTUxRkRcdTY1NzBcclxuZnVuY3Rpb24gdG9nZ2xlU2V0dGluZ3MoZSkge1xyXG4gICAgLy8gXHU1RjNBXHU1MzE2XHU3Njg0XHU1QkM2XHU3ODAxXHU0RkREXHU2MkE0XHU2ODIxXHU5QThDIC0gXHU5NjMyXHU2QjYyXHU3RUQ1XHU4RkM3XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGlmICh3aW5kb3cuZW5zdXJlUGFzc3dvcmRQcm90ZWN0aW9uKSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5lbnN1cmVQYXNzd29yZFByb3RlY3Rpb24oKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBcdTUxN0NcdTVCQjlcdTYwMjdcdTY4QzBcdTY3RTVcclxuICAgICAgICAgICAgaWYgKHdpbmRvdy5pc1Bhc3N3b3JkUHJvdGVjdGVkICYmIHdpbmRvdy5pc1Bhc3N3b3JkVmVyaWZpZWQpIHtcclxuICAgICAgICAgICAgICAgIGlmICh3aW5kb3cuaXNQYXNzd29yZFByb3RlY3RlZCgpICYmICF3aW5kb3cuaXNQYXNzd29yZFZlcmlmaWVkKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBzaG93UGFzc3dvcmRNb2RhbCAmJiBzaG93UGFzc3dvcmRNb2RhbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS53YXJuKCdQYXNzd29yZCBwcm90ZWN0aW9uIGNoZWNrIGZhaWxlZDonLCBlcnJvci5tZXNzYWdlKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICAvLyBcdTk2M0JcdTZCNjJcdTRFOEJcdTRFRjZcdTUxOTJcdTZDRTFcdUZGMENcdTk2MzJcdTZCNjJcdTg5RTZcdTUzRDFkb2N1bWVudFx1NzY4NFx1NzBCOVx1NTFGQlx1NEU4Qlx1NEVGNlxyXG4gICAgZSAmJiBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgY29uc3QgcGFuZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2V0dGluZ3NQYW5lbCcpO1xyXG4gICAgcGFuZWwuY2xhc3NMaXN0LnRvZ2dsZSgnc2hvdycpO1xyXG59XHJcblxyXG4vLyBcdTY1MzlcdThGREJcdTc2ODRUb2FzdFx1NjYzRVx1NzkzQVx1NTFGRFx1NjU3MCAtIFx1NjUyRlx1NjMwMVx1OTYxRlx1NTIxN1x1NjYzRVx1NzkzQVx1NTkxQVx1NEUyQVRvYXN0XHJcbmNvbnN0IHRvYXN0UXVldWUgPSBbXTtcclxubGV0IGlzU2hvd2luZ1RvYXN0ID0gZmFsc2U7XHJcblxyXG5mdW5jdGlvbiBzaG93VG9hc3QobWVzc2FnZSwgdHlwZSA9ICdlcnJvcicpIHtcclxuICAgIC8vIFx1OTk5Nlx1NTE0OFx1Nzg2RVx1NEZERHRvYXN0XHU1MTQzXHU3RDIwXHU1QjU4XHU1NzI4XHJcbiAgICBsZXQgdG9hc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndG9hc3QnKTtcclxuICAgIGxldCB0b2FzdE1lc3NhZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndG9hc3RNZXNzYWdlJyk7XHJcblxyXG4gICAgLy8gXHU1OTgyXHU2NzlDdG9hc3RcdTUxNDNcdTdEMjBcdTRFMERcdTVCNThcdTU3MjhcdUZGMENcdTUyMUJcdTVFRkFcdTVCODNcclxuICAgIGlmICghdG9hc3QpIHtcclxuICAgICAgICB0b2FzdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIHRvYXN0LmlkID0gJ3RvYXN0JztcclxuICAgICAgICB0b2FzdC5jbGFzc05hbWUgPSAnZml4ZWQgdG9wLTQgbGVmdC0xLzIgLXRyYW5zbGF0ZS14LTEvMiBweC02IHB5LTMgcm91bmRlZC1sZyBzaGFkb3ctbGcgdHJhbnNmb3JtIHRyYW5zaXRpb24tYWxsIGR1cmF0aW9uLTMwMCB6LTUwIG9wYWNpdHktMCc7XHJcbiAgICAgICAgdG9hc3Quc3R5bGUgPSAnei1pbmRleDogMjE0NzQ4MzY0NydcclxuICAgICAgICB0b2FzdE1lc3NhZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XHJcbiAgICAgICAgdG9hc3RNZXNzYWdlLmlkID0gJ3RvYXN0TWVzc2FnZSc7XHJcbiAgICAgICAgdG9hc3QuYXBwZW5kQ2hpbGQodG9hc3RNZXNzYWdlKTtcclxuXHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0b2FzdCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHU1QzA2XHU2NUIwXHU3Njg0dG9hc3RcdTZERkJcdTUyQTBcdTUyMzBcdTk2MUZcdTUyMTdcclxuICAgIHRvYXN0UXVldWUucHVzaCh7IG1lc3NhZ2UsIHR5cGUgfSk7XHJcblxyXG4gICAgLy8gXHU1OTgyXHU2NzlDXHU1RjUzXHU1MjREXHU2Q0ExXHU2NzA5XHU2NjNFXHU3OTNBXHU0RTJEXHU3Njg0dG9hc3RcdUZGMENcdTUyMTlcdTVGMDBcdTU5Q0JcdTY2M0VcdTc5M0FcclxuICAgIGlmICghaXNTaG93aW5nVG9hc3QpIHtcclxuICAgICAgICBzaG93TmV4dFRvYXN0KCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNob3dOZXh0VG9hc3QoKSB7XHJcbiAgICBpZiAodG9hc3RRdWV1ZS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICBpc1Nob3dpbmdUb2FzdCA9IGZhbHNlO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBpc1Nob3dpbmdUb2FzdCA9IHRydWU7XHJcbiAgICBjb25zdCB7IG1lc3NhZ2UsIHR5cGUgfSA9IHRvYXN0UXVldWUuc2hpZnQoKTtcclxuXHJcbiAgICBjb25zdCB0b2FzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b2FzdCcpO1xyXG4gICAgY29uc3QgdG9hc3RNZXNzYWdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RvYXN0TWVzc2FnZScpO1xyXG5cclxuICAgIGNvbnN0IGJnQ29sb3JzID0ge1xyXG4gICAgICAgICdlcnJvcic6ICdiZy1yZWQtNTAwJyxcclxuICAgICAgICAnc3VjY2Vzcyc6ICdiZy1ncmVlbi01MDAnLFxyXG4gICAgICAgICdpbmZvJzogJ2JnLWJsdWUtNTAwJyxcclxuICAgICAgICAnd2FybmluZyc6ICdiZy15ZWxsb3ctNTAwJ1xyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCBiZ0NvbG9yID0gYmdDb2xvcnNbdHlwZV0gfHwgYmdDb2xvcnMuZXJyb3I7XHJcbiAgICB0b2FzdC5jbGFzc05hbWUgPSBgZml4ZWQgdG9wLTQgbGVmdC0xLzIgLXRyYW5zbGF0ZS14LTEvMiBweC02IHB5LTMgcm91bmRlZC1sZyBzaGFkb3ctbGcgdHJhbnNmb3JtIHRyYW5zaXRpb24tYWxsIGR1cmF0aW9uLTMwMCAke2JnQ29sb3J9IHRleHQtd2hpdGUgei01MGA7XHJcbiAgICB0b2FzdE1lc3NhZ2UudGV4dENvbnRlbnQgPSBtZXNzYWdlO1xyXG5cclxuICAgIC8vIFx1NjYzRVx1NzkzQVx1NjNEMFx1NzkzQVxyXG4gICAgdG9hc3Quc3R5bGUub3BhY2l0eSA9ICcxJztcclxuICAgIHRvYXN0LnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGVYKC01MCUpIHRyYW5zbGF0ZVkoMCknO1xyXG5cclxuICAgIC8vIDNcdTc5RDJcdTU0MEVcdTgxRUFcdTUyQThcdTk2OTBcdTg1Q0ZcclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIHRvYXN0LnN0eWxlLm9wYWNpdHkgPSAnMCc7XHJcbiAgICAgICAgdG9hc3Quc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZVgoLTUwJSkgdHJhbnNsYXRlWSgtMTAwJSknO1xyXG5cclxuICAgICAgICAvLyBcdTdCNDlcdTVGODVcdTUyQThcdTc1M0JcdTVCOENcdTYyMTBcdTU0MEVcdTY2M0VcdTc5M0FcdTRFMEJcdTRFMDBcdTRFMkF0b2FzdFxyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICBzaG93TmV4dFRvYXN0KCk7XHJcbiAgICAgICAgfSwgMzAwKTtcclxuICAgIH0sIDMwMDApO1xyXG59XHJcblxyXG4vLyBcdTZERkJcdTUyQTBcdTY2M0VcdTc5M0EvXHU5NjkwXHU4NUNGIGxvYWRpbmcgXHU3Njg0XHU1MUZEXHU2NTcwXHJcbmxldCBsb2FkaW5nVGltZW91dElkID0gbnVsbDtcclxuXHJcbmZ1bmN0aW9uIHNob3dMb2FkaW5nKG1lc3NhZ2UgPSAnXHU1MkEwXHU4RjdEXHU0RTJELi4uJykge1xyXG4gICAgLy8gXHU2RTA1XHU5NjY0XHU0RUZCXHU0RjU1XHU3M0IwXHU2NzA5XHU3Njg0XHU4RDg1XHU2NUY2XHJcbiAgICBpZiAobG9hZGluZ1RpbWVvdXRJZCkge1xyXG4gICAgICAgIGNsZWFyVGltZW91dChsb2FkaW5nVGltZW91dElkKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBsb2FkaW5nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRpbmcnKTtcclxuICAgIGNvbnN0IG1lc3NhZ2VFbCA9IGxvYWRpbmcucXVlcnlTZWxlY3RvcigncCcpO1xyXG4gICAgbWVzc2FnZUVsLnRleHRDb250ZW50ID0gbWVzc2FnZTtcclxuICAgIGxvYWRpbmcuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcclxuXHJcbiAgICAvLyBcdThCQkVcdTdGNkUzMFx1NzlEMlx1NTQwRVx1ODFFQVx1NTJBOFx1NTE3M1x1OTVFRGxvYWRpbmdcdUZGMENcdTk2MzJcdTZCNjJcdTY1RTBcdTk2NTBsb2FkaW5nXHJcbiAgICBsb2FkaW5nVGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgaGlkZUxvYWRpbmcoKTtcclxuICAgICAgICBzaG93VG9hc3QoJ1x1NjRDRFx1NEY1Q1x1OEQ4NVx1NjVGNlx1RkYwQ1x1OEJGN1x1N0EwRFx1NTQwRVx1OTFDRFx1OEJENScsICd3YXJuaW5nJyk7XHJcbiAgICB9LCAzMDAwMCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhpZGVMb2FkaW5nKCkge1xyXG4gICAgLy8gXHU2RTA1XHU5NjY0XHU4RDg1XHU2NUY2XHJcbiAgICBpZiAobG9hZGluZ1RpbWVvdXRJZCkge1xyXG4gICAgICAgIGNsZWFyVGltZW91dChsb2FkaW5nVGltZW91dElkKTtcclxuICAgICAgICBsb2FkaW5nVGltZW91dElkID0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBsb2FkaW5nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRpbmcnKTtcclxuICAgIGxvYWRpbmcuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxufVxyXG5cclxuZnVuY3Rpb24gdXBkYXRlU2l0ZVN0YXR1cyhpc0F2YWlsYWJsZSkge1xyXG4gICAgY29uc3Qgc3RhdHVzRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2l0ZVN0YXR1cycpO1xyXG4gICAgaWYgKGlzQXZhaWxhYmxlKSB7XHJcbiAgICAgICAgc3RhdHVzRWwuaW5uZXJIVE1MID0gJzxzcGFuIGNsYXNzPVwidGV4dC1ncmVlbi01MDBcIj5cdTI1Q0Y8L3NwYW4+IFx1NTNFRlx1NzUyOCc7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHN0YXR1c0VsLmlubmVySFRNTCA9ICc8c3BhbiBjbGFzcz1cInRleHQtcmVkLTUwMFwiPlx1MjVDRjwvc3Bhbj4gXHU0RTBEXHU1M0VGXHU3NTI4JztcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gY2xvc2VNb2RhbCgpIHtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2RhbCcpLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xyXG4gICAgLy8gXHU2RTA1XHU5NjY0IGlmcmFtZSBcdTUxODVcdTVCQjlcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2RhbENvbnRlbnQnKS5pbm5lckhUTUwgPSAnJztcclxufVxyXG5cclxuLy8gXHU4M0I3XHU1M0Q2XHU2NDFDXHU3RDIyXHU1Mzg2XHU1M0YyXHU3Njg0XHU1ODlFXHU1RjNBXHU3MjQ4XHU2NzJDIC0gXHU2NTJGXHU2MzAxXHU2NUIwXHU2NUU3XHU2ODNDXHU1RjBGXHJcbmZ1bmN0aW9uIGdldFNlYXJjaEhpc3RvcnkoKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IGRhdGEgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShTRUFSQ0hfSElTVE9SWV9LRVkpO1xyXG4gICAgICAgIGlmICghZGF0YSkgcmV0dXJuIFtdO1xyXG5cclxuICAgICAgICBjb25zdCBwYXJzZWQgPSBKU09OLnBhcnNlKGRhdGEpO1xyXG5cclxuICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTY2MkZcdTU0MjZcdTY2MkZcdTY1NzBcdTdFQzRcclxuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkocGFyc2VkKSkgcmV0dXJuIFtdO1xyXG5cclxuICAgICAgICAvLyBcdTY1MkZcdTYzMDFcdTY1RTdcdTY4M0NcdTVGMEZcdUZGMDhcdTVCNTdcdTdCMjZcdTRFMzJcdTY1NzBcdTdFQzRcdUZGMDlcdTU0OENcdTY1QjBcdTY4M0NcdTVGMEZcdUZGMDhcdTVCRjlcdThDNjFcdTY1NzBcdTdFQzRcdUZGMDlcclxuICAgICAgICByZXR1cm4gcGFyc2VkLm1hcChpdGVtID0+IHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBpdGVtID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgdGV4dDogaXRlbSwgdGltZXN0YW1wOiAwIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGl0ZW07XHJcbiAgICAgICAgfSkuZmlsdGVyKGl0ZW0gPT4gaXRlbSAmJiBpdGVtLnRleHQpO1xyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1ODNCN1x1NTNENlx1NjQxQ1x1N0QyMlx1NTM4Nlx1NTNGMlx1NTFGQVx1OTUxOTonLCBlKTtcclxuICAgICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIFx1NEZERFx1NUI1OFx1NjQxQ1x1N0QyMlx1NTM4Nlx1NTNGMlx1NzY4NFx1NTg5RVx1NUYzQVx1NzI0OFx1NjcyQyAtIFx1NkRGQlx1NTJBMFx1NjVGNlx1OTVGNFx1NjIzM1x1NTQ4Q1x1NjcwMFx1NTkyN1x1NjU3MFx1OTFDRlx1OTY1MFx1NTIzNlx1RkYwQ1x1NzNCMFx1NTcyOFx1N0YxM1x1NUI1ODJcdTRFMkFcdTY3MDhcclxuZnVuY3Rpb24gc2F2ZVNlYXJjaEhpc3RvcnkocXVlcnkpIHtcclxuICAgIGlmICghcXVlcnkgfHwgIXF1ZXJ5LnRyaW0oKSkgcmV0dXJuO1xyXG5cclxuICAgIC8vIFx1NkUwNVx1NzQwNlx1OEY5M1x1NTE2NVx1RkYwQ1x1OTYzMlx1NkI2MlhTU1xyXG4gICAgcXVlcnkgPSBxdWVyeS50cmltKCkuc3Vic3RyaW5nKDAsIDUwKS5yZXBsYWNlKC88L2csICcmbHQ7JykucmVwbGFjZSgvPi9nLCAnJmd0OycpO1xyXG5cclxuICAgIGxldCBoaXN0b3J5ID0gZ2V0U2VhcmNoSGlzdG9yeSgpO1xyXG5cclxuICAgIC8vIFx1ODNCN1x1NTNENlx1NUY1M1x1NTI0RFx1NjVGNlx1OTVGNFxyXG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcclxuXHJcbiAgICAvLyBcdThGQzdcdTZFRTRcdTYzODlcdThEODVcdThGQzcyXHU0RTJBXHU2NzA4XHU3Njg0XHU4QkIwXHU1RjU1XHVGRjA4XHU3RUE2NjBcdTU5MjlcdUZGMEM2MCoyNCo2MCo2MCoxMDAwID0gNTE4NDAwMDAwMFx1NkJFQlx1NzlEMlx1RkYwOVxyXG4gICAgaGlzdG9yeSA9IGhpc3RvcnkuZmlsdGVyKGl0ZW0gPT5cclxuICAgICAgICB0eXBlb2YgaXRlbSA9PT0gJ29iamVjdCcgJiYgaXRlbS50aW1lc3RhbXAgJiYgKG5vdyAtIGl0ZW0udGltZXN0YW1wIDwgNTE4NDAwMDAwMClcclxuICAgICk7XHJcblxyXG4gICAgLy8gXHU1MjIwXHU5NjY0XHU1REYyXHU1QjU4XHU1NzI4XHU3Njg0XHU3NkY4XHU1NDBDXHU5ODc5XHJcbiAgICBoaXN0b3J5ID0gaGlzdG9yeS5maWx0ZXIoaXRlbSA9PlxyXG4gICAgICAgIHR5cGVvZiBpdGVtID09PSAnb2JqZWN0JyA/IGl0ZW0udGV4dCAhPT0gcXVlcnkgOiBpdGVtICE9PSBxdWVyeVxyXG4gICAgKTtcclxuXHJcbiAgICAvLyBcdTY1QjBcdTk4NzlcdTZERkJcdTUyQTBcdTUyMzBcdTVGMDBcdTU5MzRcdUZGMENcdTUzMDVcdTU0MkJcdTY1RjZcdTk1RjRcdTYyMzNcclxuICAgIGhpc3RvcnkudW5zaGlmdCh7XHJcbiAgICAgICAgdGV4dDogcXVlcnksXHJcbiAgICAgICAgdGltZXN0YW1wOiBub3dcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIFx1OTY1MFx1NTIzNlx1NTM4Nlx1NTNGMlx1OEJCMFx1NUY1NVx1NjU3MFx1OTFDRlxyXG4gICAgaWYgKGhpc3RvcnkubGVuZ3RoID4gTUFYX0hJU1RPUllfSVRFTVMpIHtcclxuICAgICAgICBoaXN0b3J5ID0gaGlzdG9yeS5zbGljZSgwLCBNQVhfSElTVE9SWV9JVEVNUyk7XHJcbiAgICB9XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShTRUFSQ0hfSElTVE9SWV9LRVksIEpTT04uc3RyaW5naWZ5KGhpc3RvcnkpKTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdcdTRGRERcdTVCNThcdTY0MUNcdTdEMjJcdTUzODZcdTUzRjJcdTU5MzFcdThEMjU6JywgZSk7XHJcbiAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU1QjU4XHU1MEE4XHU1OTMxXHU4RDI1XHVGRjA4XHU1M0VGXHU4MEZEXHU2NjJGbG9jYWxTdG9yYWdlXHU1REYyXHU2RUUxXHVGRjA5XHVGRjBDXHU1QzFEXHU4QkQ1XHU2RTA1XHU3NDA2XHU2NUU3XHU2NTcwXHU2MzZFXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oU0VBUkNIX0hJU1RPUllfS0VZKTtcclxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oU0VBUkNIX0hJU1RPUllfS0VZLCBKU09OLnN0cmluZ2lmeShoaXN0b3J5LnNsaWNlKDAsIDMpKSk7XHJcbiAgICAgICAgfSBjYXRjaCAoZTIpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHU1MThEXHU2QjIxXHU0RkREXHU1QjU4XHU2NDFDXHU3RDIyXHU1Mzg2XHU1M0YyXHU1OTMxXHU4RDI1OicsIGUyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyU2VhcmNoSGlzdG9yeSgpO1xyXG59XHJcblxyXG4vLyBcdTZFMzJcdTY3RDNcdTY3MDBcdThGRDFcdTY0MUNcdTdEMjJcdTUzODZcdTUzRjJcdTc2ODRcdTU4OUVcdTVGM0FcdTcyNDhcdTY3MkNcclxuZnVuY3Rpb24gcmVuZGVyU2VhcmNoSGlzdG9yeSgpIHtcclxuICAgIGNvbnN0IGhpc3RvcnlDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVjZW50U2VhcmNoZXMnKTtcclxuICAgIGlmICghaGlzdG9yeUNvbnRhaW5lcikgcmV0dXJuO1xyXG5cclxuICAgIGNvbnN0IGhpc3RvcnkgPSBnZXRTZWFyY2hIaXN0b3J5KCk7XHJcblxyXG4gICAgaWYgKGhpc3RvcnkubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgaGlzdG9yeUNvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHU1MjFCXHU1RUZBXHU0RTAwXHU0RTJBXHU1MzA1XHU1NDJCXHU2ODA3XHU5ODk4XHU1NDhDXHU2RTA1XHU5NjY0XHU2MzA5XHU5NEFFXHU3Njg0XHU4ODRDXHJcbiAgICBoaXN0b3J5Q29udGFpbmVyLmlubmVySFRNTCA9IGBcclxuICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtY2VudGVyIHctZnVsbCBtYi0yXCI+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0ZXh0LWdyYXktNTAwXCI+XHU2NzAwXHU4RkQxXHU2NDFDXHU3RDIyOjwvZGl2PlxyXG4gICAgICAgICAgICA8YnV0dG9uIGlkPVwiY2xlYXJIaXN0b3J5QnRuXCIgY2xhc3M9XCJ0ZXh0LWdyYXktNTAwIGhvdmVyOnRleHQtd2hpdGUgdHJhbnNpdGlvbi1jb2xvcnNcIlxyXG4gICAgICAgICAgICAgICAgICAgIG9uY2xpY2s9XCJjbGVhclNlYXJjaEhpc3RvcnkoKVwiIGFyaWEtbGFiZWw9XCJcdTZFMDVcdTk2NjRcdTY0MUNcdTdEMjJcdTUzODZcdTUzRjJcIj5cclxuICAgICAgICAgICAgICAgIFx1NkUwNVx1OTY2NFx1NjQxQ1x1N0QyMlx1NTM4Nlx1NTNGMlxyXG4gICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgIGA7XHJcblxyXG4gICAgaGlzdG9yeS5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgIGNvbnN0IHRhZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG4gICAgICAgIHRhZy5jbGFzc05hbWUgPSAnc2VhcmNoLXRhZyBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMSc7XHJcbiAgICAgICAgY29uc3QgdGV4dFNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XHJcbiAgICAgICAgdGV4dFNwYW4udGV4dENvbnRlbnQgPSBpdGVtLnRleHQ7XHJcbiAgICAgICAgdGFnLmFwcGVuZENoaWxkKHRleHRTcGFuKTtcclxuXHJcbiAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU1MjIwXHU5NjY0XHU2MzA5XHU5NEFFXHJcbiAgICAgICAgY29uc3QgZGVsZXRlQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xyXG4gICAgICAgIGRlbGV0ZUJ1dHRvbi5jbGFzc05hbWUgPSAncGwtMSB0ZXh0LWdyYXktNTAwIGhvdmVyOnRleHQtcmVkLTUwMCB0cmFuc2l0aW9uLWNvbG9ycyc7XHJcbiAgICAgICAgZGVsZXRlQnV0dG9uLmlubmVySFRNTCA9ICc8c3ZnIGNsYXNzPVwidy00IGgtNFwiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiPjxwYXRoIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiIHN0cm9rZS13aWR0aD1cIjJcIiBkPVwiTTYgMThMMTggNk02IDZsMTIgMTJcIj48L3BhdGg+PC9zdmc+JztcclxuICAgICAgICBkZWxldGVCdXR0b24ub25jbGljayA9IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgLy8gXHU5NjNCXHU2QjYyXHU0RThCXHU0RUY2XHU1MTkyXHU2Q0UxXHVGRjBDXHU5MDdGXHU1MTREXHU4OUU2XHU1M0QxXHU2NDFDXHU3RDIyXHJcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgIC8vIFx1NTIyMFx1OTY2NFx1NUJGOVx1NUU5NFx1NTM4Nlx1NTNGMlx1OEJCMFx1NUY1NVxyXG4gICAgICAgICAgICBkZWxldGVTaW5nbGVTZWFyY2hIaXN0b3J5KGl0ZW0udGV4dCk7XHJcbiAgICAgICAgICAgIC8vIFx1OTFDRFx1NjVCMFx1NkUzMlx1NjdEM1x1NjQxQ1x1N0QyMlx1NTM4Nlx1NTNGMlxyXG4gICAgICAgICAgICByZW5kZXJTZWFyY2hIaXN0b3J5KCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0YWcuYXBwZW5kQ2hpbGQoZGVsZXRlQnV0dG9uKTtcclxuXHJcbiAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU2NUY2XHU5NUY0XHU2M0QwXHU3OTNBXHVGRjA4XHU1OTgyXHU2NzlDXHU2NzA5XHU2NUY2XHU5NUY0XHU2MjMzXHVGRjA5XHJcbiAgICAgICAgaWYgKGl0ZW0udGltZXN0YW1wKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShpdGVtLnRpbWVzdGFtcCk7XHJcbiAgICAgICAgICAgIHRhZy50aXRsZSA9IGBcdTY0MUNcdTdEMjJcdTRFOEU6ICR7ZGF0ZS50b0xvY2FsZVN0cmluZygpfWA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0YWcub25jbGljayA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VhcmNoSW5wdXQnKS52YWx1ZSA9IGl0ZW0udGV4dDtcclxuICAgICAgICAgICAgc2VhcmNoKCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBoaXN0b3J5Q29udGFpbmVyLmFwcGVuZENoaWxkKHRhZyk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuLy8gXHU1MjIwXHU5NjY0XHU1MzU1XHU2NzYxXHU2NDFDXHU3RDIyXHU1Mzg2XHU1M0YyXHU4QkIwXHU1RjU1XHJcbmZ1bmN0aW9uIGRlbGV0ZVNpbmdsZVNlYXJjaEhpc3RvcnkocXVlcnkpIHtcclxuICAgIC8vIFx1NUY1M3VybFx1NEUyRFx1NTMwNVx1NTQyQlx1NTIyMFx1OTY2NFx1NzY4NFx1NTE3M1x1OTUyRVx1OEJDRFx1NjVGNlx1RkYwQ1x1OTg3NVx1OTc2Mlx1NTIzN1x1NjVCMFx1NTQwRVx1NEYxQVx1ODFFQVx1NTJBOFx1NTJBMFx1NTE2NVx1NTM4Nlx1NTNGMlx1OEJCMFx1NUY1NVx1RkYwQ1x1NUJGQ1x1ODFGNFx1OEJFRlx1OEJBNFx1NEUzQVx1NTIyMFx1OTY2NFx1NTI5Rlx1ODBGRFx1NjcwOWJ1Z1x1MzAwMlx1NkI2NFx1OTVFRVx1OTg5OFx1NjVFMFx1OTcwMFx1NEZFRVx1NTkwRFx1RkYwQ1x1NTI5Rlx1ODBGRFx1NjVFMFx1NUI5RVx1OTY0NVx1NUY3MVx1NTRDRFx1MzAwMlxyXG4gICAgdHJ5IHtcclxuICAgICAgICBsZXQgaGlzdG9yeSA9IGdldFNlYXJjaEhpc3RvcnkoKTtcclxuICAgICAgICAvLyBcdThGQzdcdTZFRTRcdTYzODlcdTg5ODFcdTUyMjBcdTk2NjRcdTc2ODRcdThCQjBcdTVGNTVcclxuICAgICAgICBoaXN0b3J5ID0gaGlzdG9yeS5maWx0ZXIoaXRlbSA9PiBpdGVtLnRleHQgIT09IHF1ZXJ5KTtcclxuICAgICAgICBjb25zb2xlLmxvZygnXHU2NkY0XHU2NUIwXHU1NDBFXHU3Njg0XHU2NDFDXHU3RDIyXHU1Mzg2XHU1M0YyOicsIGhpc3RvcnkpO1xyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFNFQVJDSF9ISVNUT1JZX0tFWSwgSlNPTi5zdHJpbmdpZnkoaGlzdG9yeSkpO1xyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1NTIyMFx1OTY2NFx1NTM1NVx1Njc2MVx1NjQxQ1x1N0QyMlx1NTM4Nlx1NTNGMlx1NTkzMVx1OEQyNTonLCBlKTtcclxuICAgICAgICBzaG93VG9hc3QoJ1x1NTIyMFx1OTY2NFx1NTM1NVx1Njc2MVx1NjQxQ1x1N0QyMlx1NTM4Nlx1NTNGMlx1NTkzMVx1OEQyNScsICdlcnJvcicpO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyBcdTU4OUVcdTUyQTBcdTZFMDVcdTk2NjRcdTY0MUNcdTdEMjJcdTUzODZcdTUzRjJcdTUyOUZcdTgwRkRcclxuZnVuY3Rpb24gY2xlYXJTZWFyY2hIaXN0b3J5KCkge1xyXG4gICAgLy8gXHU1QkM2XHU3ODAxXHU0RkREXHU2MkE0XHU2ODIxXHU5QThDXHJcbiAgICBpZiAod2luZG93LmlzUGFzc3dvcmRQcm90ZWN0ZWQgJiYgd2luZG93LmlzUGFzc3dvcmRWZXJpZmllZCkge1xyXG4gICAgICAgIGlmICh3aW5kb3cuaXNQYXNzd29yZFByb3RlY3RlZCgpICYmICF3aW5kb3cuaXNQYXNzd29yZFZlcmlmaWVkKCkpIHtcclxuICAgICAgICAgICAgc2hvd1Bhc3N3b3JkTW9kYWwgJiYgc2hvd1Bhc3N3b3JkTW9kYWwoKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHRyeSB7XHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oU0VBUkNIX0hJU1RPUllfS0VZKTtcclxuICAgICAgICByZW5kZXJTZWFyY2hIaXN0b3J5KCk7XHJcbiAgICAgICAgc2hvd1RvYXN0KCdcdTY0MUNcdTdEMjJcdTUzODZcdTUzRjJcdTVERjJcdTZFMDVcdTk2NjQnLCAnc3VjY2VzcycpO1xyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1NkUwNVx1OTY2NFx1NjQxQ1x1N0QyMlx1NTM4Nlx1NTNGMlx1NTkzMVx1OEQyNTonLCBlKTtcclxuICAgICAgICBzaG93VG9hc3QoJ1x1NkUwNVx1OTY2NFx1NjQxQ1x1N0QyMlx1NTM4Nlx1NTNGMlx1NTkzMVx1OEQyNTonLCAnZXJyb3InKTtcclxuICAgIH1cclxufVxyXG5cclxuLy8gXHU1Mzg2XHU1M0YyXHU5NzYyXHU2NzdGXHU3NkY4XHU1MTczXHU1MUZEXHU2NTcwXHJcbmZ1bmN0aW9uIHRvZ2dsZUhpc3RvcnkoZSkge1xyXG4gICAgLy8gXHU1QkM2XHU3ODAxXHU0RkREXHU2MkE0XHU2ODIxXHU5QThDXHJcbiAgICBpZiAod2luZG93LmlzUGFzc3dvcmRQcm90ZWN0ZWQgJiYgd2luZG93LmlzUGFzc3dvcmRWZXJpZmllZCkge1xyXG4gICAgICAgIGlmICh3aW5kb3cuaXNQYXNzd29yZFByb3RlY3RlZCgpICYmICF3aW5kb3cuaXNQYXNzd29yZFZlcmlmaWVkKCkpIHtcclxuICAgICAgICAgICAgc2hvd1Bhc3N3b3JkTW9kYWwgJiYgc2hvd1Bhc3N3b3JkTW9kYWwoKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChlKSBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cclxuICAgIGNvbnN0IHBhbmVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hpc3RvcnlQYW5lbCcpO1xyXG4gICAgaWYgKHBhbmVsKSB7XHJcbiAgICAgICAgcGFuZWwuY2xhc3NMaXN0LnRvZ2dsZSgnc2hvdycpO1xyXG5cclxuICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTYyNTNcdTVGMDBcdTRFODZcdTUzODZcdTUzRjJcdThCQjBcdTVGNTVcdTk3NjJcdTY3N0ZcdUZGMENcdTUyMTlcdTUyQTBcdThGN0RcdTUzODZcdTUzRjJcdTY1NzBcdTYzNkVcclxuICAgICAgICBpZiAocGFuZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdzaG93JykpIHtcclxuICAgICAgICAgICAgbG9hZFZpZXdpbmdIaXN0b3J5KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdThCQkVcdTdGNkVcdTk3NjJcdTY3N0ZcdTY2MkZcdTYyNTNcdTVGMDBcdTc2ODRcdUZGMENcdTUyMTlcdTUxNzNcdTk1RURcdTVCODNcclxuICAgICAgICBjb25zdCBzZXR0aW5nc1BhbmVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NldHRpbmdzUGFuZWwnKTtcclxuICAgICAgICBpZiAoc2V0dGluZ3NQYW5lbCAmJiBzZXR0aW5nc1BhbmVsLmNsYXNzTGlzdC5jb250YWlucygnc2hvdycpKSB7XHJcbiAgICAgICAgICAgIHNldHRpbmdzUGFuZWwuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuLy8gXHU2ODNDXHU1RjBGXHU1MzE2XHU2NUY2XHU5NUY0XHU2MjMzXHU0RTNBXHU1M0NCXHU1OTdEXHU3Njg0XHU2NUU1XHU2NzFGXHU2NUY2XHU5NUY0XHU2ODNDXHU1RjBGXHJcbmZ1bmN0aW9uIGZvcm1hdFRpbWVzdGFtcCh0aW1lc3RhbXApIHtcclxuICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSh0aW1lc3RhbXApO1xyXG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcclxuICAgIGNvbnN0IGRpZmYgPSBub3cgLSBkYXRlO1xyXG5cclxuICAgIC8vIFx1NUMwRlx1NEU4RTFcdTVDMEZcdTY1RjZcdUZGMENcdTY2M0VcdTc5M0FcIlhcdTUyMDZcdTk0OUZcdTUyNERcIlxyXG4gICAgaWYgKGRpZmYgPCAzNjAwMDAwKSB7XHJcbiAgICAgICAgY29uc3QgbWludXRlcyA9IE1hdGguZmxvb3IoZGlmZiAvIDYwMDAwKTtcclxuICAgICAgICByZXR1cm4gbWludXRlcyA8PSAwID8gJ1x1NTIxQVx1NTIxQScgOiBgJHttaW51dGVzfVx1NTIwNlx1OTQ5Rlx1NTI0RGA7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHU1QzBGXHU0RThFMjRcdTVDMEZcdTY1RjZcdUZGMENcdTY2M0VcdTc5M0FcIlhcdTVDMEZcdTY1RjZcdTUyNERcIlxyXG4gICAgaWYgKGRpZmYgPCA4NjQwMDAwMCkge1xyXG4gICAgICAgIGNvbnN0IGhvdXJzID0gTWF0aC5mbG9vcihkaWZmIC8gMzYwMDAwMCk7XHJcbiAgICAgICAgcmV0dXJuIGAke2hvdXJzfVx1NUMwRlx1NjVGNlx1NTI0RGA7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHU1QzBGXHU0RThFN1x1NTkyOVx1RkYwQ1x1NjYzRVx1NzkzQVwiWFx1NTkyOVx1NTI0RFwiXHJcbiAgICBpZiAoZGlmZiA8IDYwNDgwMDAwMCkge1xyXG4gICAgICAgIGNvbnN0IGRheXMgPSBNYXRoLmZsb29yKGRpZmYgLyA4NjQwMDAwMCk7XHJcbiAgICAgICAgcmV0dXJuIGAke2RheXN9XHU1OTI5XHU1MjREYDtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdTUxNzZcdTRFRDZcdTYwQzVcdTUxQjVcdUZGMENcdTY2M0VcdTc5M0FcdTVCOENcdTY1NzRcdTY1RTVcdTY3MUZcclxuICAgIGNvbnN0IHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCk7XHJcbiAgICBjb25zdCBtb250aCA9IChkYXRlLmdldE1vbnRoKCkgKyAxKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyk7XHJcbiAgICBjb25zdCBkYXkgPSBkYXRlLmdldERhdGUoKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyk7XHJcbiAgICBjb25zdCBob3VyID0gZGF0ZS5nZXRIb3VycygpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKTtcclxuICAgIGNvbnN0IG1pbnV0ZSA9IGRhdGUuZ2V0TWludXRlcygpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKTtcclxuXHJcbiAgICByZXR1cm4gYCR7eWVhcn0tJHttb250aH0tJHtkYXl9ICR7aG91cn06JHttaW51dGV9YDtcclxufVxyXG5cclxuLy8gXHU4M0I3XHU1M0Q2XHU4OUMyXHU3NzBCXHU1Mzg2XHU1M0YyXHU4QkIwXHU1RjU1XHJcbmZ1bmN0aW9uIGdldFZpZXdpbmdIaXN0b3J5KCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBkYXRhID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3ZpZXdpbmdIaXN0b3J5Jyk7XHJcbiAgICAgICAgcmV0dXJuIGRhdGEgPyBKU09OLnBhcnNlKGRhdGEpIDogW107XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignXHU4M0I3XHU1M0Q2XHU4OUMyXHU3NzBCXHU1Mzg2XHU1M0YyXHU1OTMxXHU4RDI1OicsIGUpO1xyXG4gICAgICAgIHJldHVybiBbXTtcclxuICAgIH1cclxufVxyXG5cclxuLy8gXHU1MkEwXHU4RjdEXHU4OUMyXHU3NzBCXHU1Mzg2XHU1M0YyXHU1RTc2XHU2RTMyXHU2N0QzXHJcbmZ1bmN0aW9uIGxvYWRWaWV3aW5nSGlzdG9yeSgpIHtcclxuICAgIGNvbnN0IGhpc3RvcnlMaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hpc3RvcnlMaXN0Jyk7XHJcbiAgICBpZiAoIWhpc3RvcnlMaXN0KSByZXR1cm47XHJcblxyXG4gICAgY29uc3QgaGlzdG9yeSA9IGdldFZpZXdpbmdIaXN0b3J5KCk7XHJcblxyXG4gICAgaWYgKGhpc3RvcnkubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgaGlzdG9yeUxpc3QuaW5uZXJIVE1MID0gYDxkaXYgY2xhc3M9XCJ0ZXh0LWNlbnRlciB0ZXh0LWdyYXktNTAwIHB5LThcIj5cdTY2ODJcdTY1RTBcdTg5QzJcdTc3MEJcdThCQjBcdTVGNTU8L2Rpdj5gO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdTZFMzJcdTY3RDNcdTUzODZcdTUzRjJcdThCQjBcdTVGNTVcclxuICAgIGhpc3RvcnlMaXN0LmlubmVySFRNTCA9IGhpc3RvcnkubWFwKGl0ZW0gPT4ge1xyXG4gICAgICAgIC8vIFx1OTYzMlx1NkI2MlhTU1xyXG4gICAgICAgIGNvbnN0IHNhZmVUaXRsZSA9IGl0ZW0udGl0bGVcclxuICAgICAgICAgICAgLnJlcGxhY2UoLzwvZywgJyZsdDsnKVxyXG4gICAgICAgICAgICAucmVwbGFjZSgvPi9nLCAnJmd0OycpXHJcbiAgICAgICAgICAgIC5yZXBsYWNlKC9cIi9nLCAnJnF1b3Q7Jyk7XHJcblxyXG4gICAgICAgIGNvbnN0IHNhZmVTb3VyY2UgPSBpdGVtLnNvdXJjZU5hbWUgP1xyXG4gICAgICAgICAgICBpdGVtLnNvdXJjZU5hbWUucmVwbGFjZSgvPC9nLCAnJmx0OycpLnJlcGxhY2UoLz4vZywgJyZndDsnKS5yZXBsYWNlKC9cIi9nLCAnJnF1b3Q7JykgOlxyXG4gICAgICAgICAgICAnXHU2NzJBXHU3N0U1XHU2NzY1XHU2RTkwJztcclxuXHJcbiAgICAgICAgY29uc3QgZXBpc29kZVRleHQgPSBpdGVtLmVwaXNvZGVJbmRleCAhPT0gdW5kZWZpbmVkID9cclxuICAgICAgICAgICAgYFx1N0IyQyR7aXRlbS5lcGlzb2RlSW5kZXggKyAxfVx1OTZDNmAgOiAnJztcclxuXHJcbiAgICAgICAgLy8gXHU2ODNDXHU1RjBGXHU1MzE2XHU1MjY3XHU5NkM2XHU0RkUxXHU2MDZGXHJcbiAgICAgICAgbGV0IGVwaXNvZGVJbmZvSHRtbCA9ICcnO1xyXG4gICAgICAgIGlmIChpdGVtLmVwaXNvZGVzICYmIEFycmF5LmlzQXJyYXkoaXRlbS5lcGlzb2RlcykgJiYgaXRlbS5lcGlzb2Rlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRvdGFsRXBpc29kZXMgPSBpdGVtLmVwaXNvZGVzLmxlbmd0aDtcclxuICAgICAgICAgICAgY29uc3Qgc3luY1N0YXR1cyA9IGl0ZW0ubGFzdFN5bmNUaW1lID9cclxuICAgICAgICAgICAgICAgIGA8c3BhbiBjbGFzcz1cInRleHQtZ3JlZW4tNDAwIHRleHQteHNcIiB0aXRsZT1cIlx1NTI2N1x1OTZDNlx1NTIxN1x1ODg2OFx1NURGMlx1NTQwQ1x1NkI2NVwiPlx1MjcxMzwvc3Bhbj5gIDpcclxuICAgICAgICAgICAgICAgIGA8c3BhbiBjbGFzcz1cInRleHQteWVsbG93LTQwMCB0ZXh0LXhzXCIgdGl0bGU9XCJcdTRGN0ZcdTc1MjhcdTdGMTNcdTVCNThcdTY1NzBcdTYzNkVcIj5cdTI2QTA8L3NwYW4+YDtcclxuICAgICAgICAgICAgZXBpc29kZUluZm9IdG1sID0gYDxzcGFuIGNsYXNzPVwidGV4dC14cyB0ZXh0LWdyYXktNDAwXCI+XHU1MTcxJHt0b3RhbEVwaXNvZGVzfVx1OTZDNiAke3N5bmNTdGF0dXN9PC9zcGFuPmA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBcdTY4M0NcdTVGMEZcdTUzMTZcdThGREJcdTVFQTZcdTRGRTFcdTYwNkZcclxuICAgICAgICBsZXQgcHJvZ3Jlc3NIdG1sID0gJyc7XHJcbiAgICAgICAgaWYgKGl0ZW0ucGxheWJhY2tQb3NpdGlvbiAmJiBpdGVtLmR1cmF0aW9uICYmIGl0ZW0ucGxheWJhY2tQb3NpdGlvbiA+IDEwICYmIGl0ZW0ucGxheWJhY2tQb3NpdGlvbiA8IGl0ZW0uZHVyYXRpb24gKiAwLjk1KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBlcmNlbnQgPSBNYXRoLnJvdW5kKChpdGVtLnBsYXliYWNrUG9zaXRpb24gLyBpdGVtLmR1cmF0aW9uKSAqIDEwMCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGZvcm1hdHRlZFRpbWUgPSBmb3JtYXRQbGF5YmFja1RpbWUoaXRlbS5wbGF5YmFja1Bvc2l0aW9uKTtcclxuICAgICAgICAgICAgY29uc3QgZm9ybWF0dGVkRHVyYXRpb24gPSBmb3JtYXRQbGF5YmFja1RpbWUoaXRlbS5kdXJhdGlvbik7XHJcblxyXG4gICAgICAgICAgICBwcm9ncmVzc0h0bWwgPSBgXHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaGlzdG9yeS1wcm9ncmVzc1wiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwcm9ncmVzcy1iYXJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInByb2dyZXNzLWZpbGxlZFwiIHN0eWxlPVwid2lkdGg6JHtwZXJjZW50fSVcIj48L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicHJvZ3Jlc3MtdGV4dFwiPiR7Zm9ybWF0dGVkVGltZX0gLyAke2Zvcm1hdHRlZER1cmF0aW9ufTwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIGA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBcdTRFM0FcdTk2MzJcdTZCNjJYU1NcdUZGMENcdTRGN0ZcdTc1MjhlbmNvZGVVUklDb21wb25lbnRcdTdGMTZcdTc4MDFVUkxcclxuICAgICAgICBjb25zdCBzYWZlVVJMID0gZW5jb2RlVVJJQ29tcG9uZW50KGl0ZW0udXJsKTtcclxuXHJcbiAgICAgICAgLy8gXHU2Nzg0XHU1RUZBXHU1Mzg2XHU1M0YyXHU4QkIwXHU1RjU1XHU5ODc5SFRNTFx1RkYwQ1x1NkRGQlx1NTJBMFx1NTIyMFx1OTY2NFx1NjMwOVx1OTRBRVx1RkYwQ1x1OTcwMFx1ODk4MVx1NjUzRVx1NTcyOHBvc2l0aW9uOnJlbGF0aXZlXHU3Njg0XHU1QkI5XHU1NjY4XHU0RTJEXHJcbiAgICAgICAgcmV0dXJuIGBcclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImhpc3RvcnktaXRlbSBjdXJzb3ItcG9pbnRlciByZWxhdGl2ZSBncm91cFwiIG9uY2xpY2s9XCJwbGF5RnJvbUhpc3RvcnkoJyR7aXRlbS51cmx9JywgJyR7c2FmZVRpdGxlfScsICR7aXRlbS5lcGlzb2RlSW5kZXggfHwgMH0sICR7aXRlbS5wbGF5YmFja1Bvc2l0aW9uIHx8IDB9KVwiPlxyXG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPVwiZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7IGRlbGV0ZUhpc3RvcnlJdGVtKCcke3NhZmVVUkx9JylcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImFic29sdXRlIHJpZ2h0LTIgdG9wLTIgb3BhY2l0eS0wIGdyb3VwLWhvdmVyOm9wYWNpdHktMTAwIHRyYW5zaXRpb24tb3BhY2l0eSBkdXJhdGlvbi0yMDAgdGV4dC1ncmF5LTQwMCBob3Zlcjp0ZXh0LXJlZC00MDAgcC0xIHJvdW5kZWQtZnVsbCBob3ZlcjpiZy1ncmF5LTgwMCB6LTEwXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJcdTUyMjBcdTk2NjRcdThCQjBcdTVGNTVcIj5cclxuICAgICAgICAgICAgICAgICAgICA8c3ZnIGNsYXNzPVwidy00IGgtNFwiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBzdHJva2UtbGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIiBzdHJva2Utd2lkdGg9XCIyXCIgZD1cIk02IDE4TDE4IDZNNiA2bDEyIDEyXCI+PC9wYXRoPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvc3ZnPlxyXG4gICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaGlzdG9yeS1pbmZvXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImhpc3RvcnktdGl0bGVcIj4ke3NhZmVUaXRsZX08L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaGlzdG9yeS1tZXRhXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiaGlzdG9yeS1lcGlzb2RlXCI+JHtlcGlzb2RlVGV4dH08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICR7ZXBpc29kZVRleHQgPyAnPHNwYW4gY2xhc3M9XCJoaXN0b3J5LXNlcGFyYXRvciBteC0xXCI+XHUwMEI3PC9zcGFuPicgOiAnJ31cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJoaXN0b3J5LXNvdXJjZVwiPiR7c2FmZVNvdXJjZX08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICR7ZXBpc29kZUluZm9IdG1sID8gJzxzcGFuIGNsYXNzPVwiaGlzdG9yeS1zZXBhcmF0b3IgbXgtMVwiPlx1MDBCNzwvc3Bhbj4nIDogJyd9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICR7ZXBpc29kZUluZm9IdG1sfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICR7cHJvZ3Jlc3NIdG1sfVxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJoaXN0b3J5LXRpbWVcIj4ke2Zvcm1hdFRpbWVzdGFtcChpdGVtLnRpbWVzdGFtcCl9PC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgYDtcclxuICAgIH0pLmpvaW4oJycpO1xyXG5cclxuICAgIC8vIFx1NjhDMFx1NjdFNVx1NjYyRlx1NTQyNlx1NUI1OFx1NTcyOFx1OEY4M1x1NTkxQVx1NTM4Nlx1NTNGMlx1OEJCMFx1NUY1NVx1RkYwQ1x1NkRGQlx1NTJBMFx1NUU5NVx1OTBFOFx1OEZCOVx1OERERFx1Nzg2RVx1NEZERFx1NUU5NVx1OTBFOFx1NjMwOVx1OTRBRVx1NEUwRFx1NEYxQVx1NjMyMVx1NEY0Rlx1NTE4NVx1NUJCOVxyXG4gICAgaWYgKGhpc3RvcnkubGVuZ3RoID4gNSkge1xyXG4gICAgICAgIGhpc3RvcnlMaXN0LmNsYXNzTGlzdC5hZGQoJ3BiLTQnKTtcclxuICAgIH1cclxufVxyXG5cclxuLy8gXHU2ODNDXHU1RjBGXHU1MzE2XHU2NEFEXHU2NTNFXHU2NUY2XHU5NUY0XHU0RTNBIG1tOnNzIFx1NjgzQ1x1NUYwRlxyXG5mdW5jdGlvbiBmb3JtYXRQbGF5YmFja1RpbWUoc2Vjb25kcykge1xyXG4gICAgaWYgKCFzZWNvbmRzIHx8IGlzTmFOKHNlY29uZHMpKSByZXR1cm4gJzAwOjAwJztcclxuXHJcbiAgICBjb25zdCBtaW51dGVzID0gTWF0aC5mbG9vcihzZWNvbmRzIC8gNjApO1xyXG4gICAgY29uc3QgcmVtYWluaW5nU2Vjb25kcyA9IE1hdGguZmxvb3Ioc2Vjb25kcyAlIDYwKTtcclxuXHJcbiAgICByZXR1cm4gYCR7bWludXRlcy50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyl9OiR7cmVtYWluaW5nU2Vjb25kcy50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyl9YDtcclxufVxyXG5cclxuLy8gXHU1MjIwXHU5NjY0XHU1MzU1XHU0RTJBXHU1Mzg2XHU1M0YyXHU4QkIwXHU1RjU1XHU5ODc5XHJcbmZ1bmN0aW9uIGRlbGV0ZUhpc3RvcnlJdGVtKGVuY29kZWRVcmwpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgLy8gXHU4OUUzXHU3ODAxVVJMXHJcbiAgICAgICAgY29uc3QgdXJsID0gZGVjb2RlVVJJQ29tcG9uZW50KGVuY29kZWRVcmwpO1xyXG5cclxuICAgICAgICAvLyBcdTgzQjdcdTUzRDZcdTVGNTNcdTUyNERcdTUzODZcdTUzRjJcdThCQjBcdTVGNTVcclxuICAgICAgICBjb25zdCBoaXN0b3J5ID0gZ2V0Vmlld2luZ0hpc3RvcnkoKTtcclxuXHJcbiAgICAgICAgLy8gXHU4RkM3XHU2RUU0XHU2Mzg5XHU4OTgxXHU1MjIwXHU5NjY0XHU3Njg0XHU5ODc5XHJcbiAgICAgICAgY29uc3QgbmV3SGlzdG9yeSA9IGhpc3RvcnkuZmlsdGVyKGl0ZW0gPT4gaXRlbS51cmwgIT09IHVybCk7XHJcblxyXG4gICAgICAgIC8vIFx1NEZERFx1NUI1OFx1NTZERWxvY2FsU3RvcmFnZVxyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd2aWV3aW5nSGlzdG9yeScsIEpTT04uc3RyaW5naWZ5KG5ld0hpc3RvcnkpKTtcclxuXHJcbiAgICAgICAgLy8gXHU5MUNEXHU2NUIwXHU1MkEwXHU4RjdEXHU1Mzg2XHU1M0YyXHU4QkIwXHU1RjU1XHU2NjNFXHU3OTNBXHJcbiAgICAgICAgbG9hZFZpZXdpbmdIaXN0b3J5KCk7XHJcblxyXG4gICAgICAgIC8vIFx1NjYzRVx1NzkzQVx1NjIxMFx1NTI5Rlx1NjNEMFx1NzkzQVxyXG4gICAgICAgIHNob3dUb2FzdCgnXHU1REYyXHU1MjIwXHU5NjY0XHU4QkU1XHU4QkIwXHU1RjU1JywgJ3N1Y2Nlc3MnKTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdcdTUyMjBcdTk2NjRcdTUzODZcdTUzRjJcdThCQjBcdTVGNTVcdTk4NzlcdTU5MzFcdThEMjU6JywgZSk7XHJcbiAgICAgICAgc2hvd1RvYXN0KCdcdTUyMjBcdTk2NjRcdThCQjBcdTVGNTVcdTU5MzFcdThEMjUnLCAnZXJyb3InKTtcclxuICAgIH1cclxufVxyXG5cclxuLy8gXHU0RUNFXHU1Mzg2XHU1M0YyXHU4QkIwXHU1RjU1XHU2NEFEXHU2NTNFXHJcbmFzeW5jIGZ1bmN0aW9uIHBsYXlGcm9tSGlzdG9yeSh1cmwsIHRpdGxlLCBlcGlzb2RlSW5kZXgsIHBsYXliYWNrUG9zaXRpb24gPSAwKSB7XHJcbiAgICAvLyBjb25zb2xlLmxvZygnW3BsYXlGcm9tSGlzdG9yeSBpbiB1aS5qc10gQ2FsbGVkIHdpdGg6JywgeyB1cmwsIHRpdGxlLCBlcGlzb2RlSW5kZXgsIHBsYXliYWNrUG9zaXRpb24gfSk7IC8vIExvZyAxXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGxldCBlcGlzb2Rlc0xpc3QgPSBbXTtcclxuICAgICAgICBsZXQgaGlzdG9yeUl0ZW0gPSBudWxsOyAvLyBUbyBzdG9yZSB0aGUgZnVsbCBoaXN0b3J5IGl0ZW1cclxuICAgICAgICBsZXQgc3luY1N1Y2Nlc3NmdWwgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgLy8gXHU2OEMwXHU2N0U1dmlld2luZ0hpc3RvcnlcdUZGMENcdTY3RTVcdTYyN0VcdTUzMzlcdTkxNERcdTc2ODRcdTk4NzlcclxuICAgICAgICBjb25zdCBoaXN0b3J5UmF3ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3ZpZXdpbmdIaXN0b3J5Jyk7XHJcbiAgICAgICAgaWYgKGhpc3RvcnlSYXcpIHtcclxuICAgICAgICAgICAgY29uc3QgaGlzdG9yeSA9IEpTT04ucGFyc2UoaGlzdG9yeVJhdyk7XHJcbiAgICAgICAgICAgIGhpc3RvcnlJdGVtID0gaGlzdG9yeS5maW5kKGl0ZW0gPT4gaXRlbS51cmwgPT09IHVybCk7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdbcGxheUZyb21IaXN0b3J5IGluIHVpLmpzXSBGb3VuZCBoaXN0b3J5SXRlbTonLCBoaXN0b3J5SXRlbSA/IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoaGlzdG9yeUl0ZW0pKSA6IG51bGwpOyAvLyBMb2cgMiAoc3RyaW5naWZ5L3BhcnNlIGZvciBkZWVwIGNvcHkpXHJcbiAgICAgICAgICAgIGlmIChoaXN0b3J5SXRlbSkge1xyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ1twbGF5RnJvbUhpc3RvcnkgaW4gdWkuanNdIGhpc3RvcnlJdGVtLnZvZF9pZDonLCBoaXN0b3J5SXRlbS52b2RfaWQsICdoaXN0b3J5SXRlbS5zb3VyY2VOYW1lOicsIGhpc3RvcnlJdGVtLnNvdXJjZU5hbWUpOyAvLyBMb2cgM1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoaGlzdG9yeUl0ZW0gJiYgaGlzdG9yeUl0ZW0uZXBpc29kZXMgJiYgQXJyYXkuaXNBcnJheShoaXN0b3J5SXRlbS5lcGlzb2RlcykpIHtcclxuICAgICAgICAgICAgICAgIGVwaXNvZGVzTGlzdCA9IGhpc3RvcnlJdGVtLmVwaXNvZGVzOyAvLyBEZWZhdWx0IHRvIHN0b3JlZCBlcGlzb2Rlc1xyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coYFx1NEVDRVx1NTM4Nlx1NTNGMlx1OEJCMFx1NUY1NVx1NjI3RVx1NTIzMFx1ODlDNlx1OTg5MSBcIiR7dGl0bGV9XCIgXHU3Njg0XHU5NkM2XHU2NTcwXHU2NTcwXHU2MzZFIChcdTlFRDhcdThCQTQpOmAsIGVwaXNvZGVzTGlzdC5sZW5ndGgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBBbHdheXMgYXR0ZW1wdCB0byBmZXRjaCBmcmVzaCBlcGlzb2RlIGxpc3QgaWYgd2UgaGF2ZSB0aGUgbmVjZXNzYXJ5IGluZm9cclxuICAgICAgICBpZiAoaGlzdG9yeUl0ZW0gJiYgaGlzdG9yeUl0ZW0udm9kX2lkICYmIGhpc3RvcnlJdGVtLnNvdXJjZU5hbWUpIHtcclxuICAgICAgICAgICAgLy8gU2hvdyBsb2FkaW5nIHRvYXN0IHRvIGluZGljYXRlIHN5bmNpbmdcclxuICAgICAgICAgICAgc2hvd1RvYXN0KCdcdTZCNjNcdTU3MjhcdTU0MENcdTZCNjVcdTY3MDBcdTY1QjBcdTUyNjdcdTk2QzZcdTUyMTdcdTg4NjguLi4nLCAnaW5mbycpO1xyXG5cclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coYFtwbGF5RnJvbUhpc3RvcnkgaW4gdWkuanNdIEF0dGVtcHRpbmcgdG8gZmV0Y2ggZGV0YWlscyBmb3Igdm9kX2lkOiAke2hpc3RvcnlJdGVtLnZvZF9pZH0sIHNvdXJjZU5hbWU6ICR7aGlzdG9yeUl0ZW0uc291cmNlTmFtZX1gKTsgLy8gTG9nIDRcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIC8vIENvbnN0cnVjdCB0aGUgQVBJIFVSTCBmb3IgZGV0YWlsIGZldGNoaW5nXHJcbiAgICAgICAgICAgICAgICAvLyBoaXN0b3J5SXRlbS5zb3VyY2VOYW1lIGlzIHVzZWQgYXMgdGhlIHNvdXJjZUNvZGUgaGVyZVxyXG4gICAgICAgICAgICAgICAgLy8gQWRkIGEgY2FjaGUgYnVzdGVyIHRpbWVzdGFtcFxyXG4gICAgICAgICAgICAgICAgY29uc3QgdGltZXN0YW1wID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhcGlVcmwgPSBgL2FwaS9kZXRhaWw/aWQ9JHtlbmNvZGVVUklDb21wb25lbnQoaGlzdG9yeUl0ZW0udm9kX2lkKX0mc291cmNlPSR7ZW5jb2RlVVJJQ29tcG9uZW50KGhpc3RvcnlJdGVtLnNvdXJjZU5hbWUpfSZfdD0ke3RpbWVzdGFtcH1gO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIEFkZCB0aW1lb3V0IHRvIHRoZSBmZXRjaCByZXF1ZXN0XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiBjb250cm9sbGVyLmFib3J0KCksIDEwMDAwKTsgLy8gMTAgc2Vjb25kIHRpbWVvdXRcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGFwaVVybCwge1xyXG4gICAgICAgICAgICAgICAgICAgIHNpZ25hbDogY29udHJvbGxlci5zaWduYWxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQVBJIHJlcXVlc3QgZmFpbGVkIHdpdGggc3RhdHVzICR7cmVzcG9uc2Uuc3RhdHVzfWApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29uc3QgdmlkZW9EZXRhaWxzID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh2aWRlb0RldGFpbHMgJiYgdmlkZW9EZXRhaWxzLmVwaXNvZGVzICYmIHZpZGVvRGV0YWlscy5lcGlzb2Rlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb2xkRXBpc29kZUNvdW50ID0gZXBpc29kZXNMaXN0Lmxlbmd0aDtcclxuICAgICAgICAgICAgICAgICAgICBlcGlzb2Rlc0xpc3QgPSB2aWRlb0RldGFpbHMuZXBpc29kZXM7XHJcbiAgICAgICAgICAgICAgICAgICAgc3luY1N1Y2Nlc3NmdWwgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBTaG93IHN1Y2Nlc3MgbWVzc2FnZSB3aXRoIGVwaXNvZGUgY291bnQgaW5mb1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0VwaXNvZGVDb3VudCA9IGVwaXNvZGVzTGlzdC5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld0VwaXNvZGVDb3VudCA+IG9sZEVwaXNvZGVDb3VudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaG93VG9hc3QoYFx1NURGMlx1NTQwQ1x1NkI2NVx1NjcwMFx1NjVCMFx1NTI2N1x1OTZDNlx1NTIxN1x1ODg2OCAoJHtuZXdFcGlzb2RlQ291bnR9XHU5NkM2XHVGRjBDXHU2NUIwXHU1ODlFJHtuZXdFcGlzb2RlQ291bnQgLSBvbGRFcGlzb2RlQ291bnR9XHU5NkM2KWAsICdzdWNjZXNzJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChuZXdFcGlzb2RlQ291bnQgPT09IG9sZEVwaXNvZGVDb3VudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaG93VG9hc3QoYFx1NTI2N1x1OTZDNlx1NTIxN1x1ODg2OFx1NURGMlx1NjYyRlx1NjcwMFx1NjVCMCAoJHtuZXdFcGlzb2RlQ291bnR9XHU5NkM2KWAsICdzdWNjZXNzJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2hvd1RvYXN0KGBcdTVERjJcdTU0MENcdTZCNjVcdTY3MDBcdTY1QjBcdTUyNjdcdTk2QzZcdTUyMTdcdTg4NjggKCR7bmV3RXBpc29kZUNvdW50fVx1OTZDNilgLCAnc3VjY2VzcycpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coYFx1NjIxMFx1NTI5Rlx1ODNCN1x1NTNENiBcIiR7dGl0bGV9XCIgXHU2NzAwXHU2NUIwXHU1MjY3XHU5NkM2XHU1MjE3XHU4ODY4OmAsIGVwaXNvZGVzTGlzdC5sZW5ndGgsIFwiXHU5NkM2XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgaGlzdG9yeSBpdGVtIGluIGxvY2FsU3RvcmFnZSB3aXRoIHRoZSBmcmVzaCBlcGlzb2Rlc1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChoaXN0b3J5SXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoaXN0b3J5SXRlbS5lcGlzb2RlcyA9IFsuLi5lcGlzb2Rlc0xpc3RdOyAvLyBEZWVwIGNvcHlcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGlzdG9yeUl0ZW0ubGFzdFN5bmNUaW1lID0gRGF0ZS5ub3coKTsgLy8gQWRkIHN5bmMgdGltZXN0YW1wXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGhpc3RvcnkgPSBKU09OLnBhcnNlKGhpc3RvcnlSYXcpOyAvLyBSZS1wYXJzZSB0byBlbnN1cmUgd2UgaGF2ZSB0aGUgbGF0ZXN0IHZlcnNpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWR4ID0gaGlzdG9yeS5maW5kSW5kZXgoaXRlbSA9PiBpdGVtLnVybCA9PT0gdXJsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlkeCAhPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpc3RvcnlbaWR4XSA9IHsgLi4uaGlzdG9yeVtpZHhdLCAuLi5oaXN0b3J5SXRlbSB9OyAvLyBNZXJnZSwgZW5zdXJpbmcgb3RoZXIgcHJvcGVydGllcyBhcmUga2VwdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3ZpZXdpbmdIaXN0b3J5JywgSlNPTi5zdHJpbmdpZnkoaGlzdG9yeSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJcdTg5QzJcdTc3MEJcdTUzODZcdTUzRjJcdTRFMkRcdTc2ODRcdTUyNjdcdTk2QzZcdTUyMTdcdTg4NjhcdTVERjJcdTY2RjRcdTY1QjBcdTMwMDJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGBcdTY3MkFcdTgwRkRcdTgzQjdcdTUzRDYgXCIke3RpdGxlfVwiIFx1NzY4NFx1NjcwMFx1NjVCMFx1NTI2N1x1OTZDNlx1NTIxN1x1ODg2OFx1RkYwQ1x1NjIxNlx1NTIxN1x1ODg2OFx1NEUzQVx1N0E3QVx1MzAwMlx1NUMwNlx1NEY3Rlx1NzUyOFx1NURGMlx1NUI1OFx1NTBBOFx1NzY4NFx1NTI2N1x1OTZDNlx1MzAwMmApO1xyXG4gICAgICAgICAgICAgICAgICAgIHNob3dUb2FzdCgnXHU2NzJBXHU4M0I3XHU1M0Q2XHU1MjMwXHU2NzAwXHU2NUIwXHU1MjY3XHU5NkM2XHU0RkUxXHU2MDZGXHVGRjBDXHU0RjdGXHU3NTI4XHU3RjEzXHU1QjU4XHU2NTcwXHU2MzZFJywgJ3dhcm5pbmcnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBjYXRjaCAoZmV0Y2hFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5lcnJvcihgXHU4M0I3XHU1M0Q2IFwiJHt0aXRsZX1cIiBcdTY3MDBcdTY1QjBcdTUyNjdcdTk2QzZcdTUyMTdcdTg4NjhcdTU5MzFcdThEMjU6YCwgZmV0Y2hFcnJvciwgXCJcdTVDMDZcdTRGN0ZcdTc1MjhcdTVERjJcdTVCNThcdTUwQThcdTc2ODRcdTUyNjdcdTk2QzZcdTMwMDJcIik7XHJcbiAgICAgICAgICAgICAgICBpZiAoZmV0Y2hFcnJvci5uYW1lID09PSAnQWJvcnRFcnJvcicpIHtcclxuICAgICAgICAgICAgICAgICAgICBzaG93VG9hc3QoJ1x1NTQwQ1x1NkI2NVx1NTI2N1x1OTZDNlx1NTIxN1x1ODg2OFx1OEQ4NVx1NjVGNlx1RkYwQ1x1NEY3Rlx1NzUyOFx1N0YxM1x1NUI1OFx1NjU3MFx1NjM2RScsICd3YXJuaW5nJyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHNob3dUb2FzdCgnXHU1NDBDXHU2QjY1XHU1MjY3XHU5NkM2XHU1MjE3XHU4ODY4XHU1OTMxXHU4RDI1XHVGRjBDXHU0RjdGXHU3NTI4XHU3RjEzXHU1QjU4XHU2NTcwXHU2MzZFJywgJ3dhcm5pbmcnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAoaGlzdG9yeUl0ZW0pIHtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coYFx1NTM4Nlx1NTNGMlx1OEJCMFx1NUY1NVx1OTg3OSBcIiR7dGl0bGV9XCIgXHU3RjNBXHU1QzExIHZvZF9pZCBcdTYyMTYgc291cmNlTmFtZVx1RkYwQ1x1NjVFMFx1NkNENVx1NTIzN1x1NjVCMFx1NTI2N1x1OTZDNlx1NTIxN1x1ODg2OFx1MzAwMlx1NUMwNlx1NEY3Rlx1NzUyOFx1NURGMlx1NUI1OFx1NTBBOFx1NzY4NFx1NTI2N1x1OTZDNlx1MzAwMmApO1xyXG4gICAgICAgICAgICBzaG93VG9hc3QoJ1x1NjVFMFx1NkNENVx1NTQwQ1x1NkI2NVx1NTI2N1x1OTZDNlx1NTIxN1x1ODg2OFx1RkYwQ1x1NEY3Rlx1NzUyOFx1N0YxM1x1NUI1OFx1NjU3MFx1NjM2RScsICdpbmZvJyk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU1NzI4XHU1Mzg2XHU1M0YyXHU4QkIwXHU1RjU1XHU0RTJEXHU2Q0ExXHU2MjdFXHU1MjMwXHVGRjBDXHU1QzFEXHU4QkQ1XHU0RjdGXHU3NTI4XHU0RTBBXHU0RTAwXHU0RTJBXHU0RjFBXHU4QkREXHU3Njg0XHU5NkM2XHU2NTcwXHU2NTcwXHU2MzZFXHJcbiAgICAgICAgaWYgKGVwaXNvZGVzTGlzdC5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHN0b3JlZEVwaXNvZGVzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY3VycmVudEVwaXNvZGVzJykgfHwgJ1tdJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3RvcmVkRXBpc29kZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGVwaXNvZGVzTGlzdCA9IHN0b3JlZEVwaXNvZGVzO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGBcdTRGN0ZcdTc1Mjhsb2NhbFN0b3JhZ2VcdTRFMkRcdTc2ODRcdTk2QzZcdTY1NzBcdTY1NzBcdTYzNkU6YCwgZXBpc29kZXNMaXN0Lmxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUuZXJyb3IoJ1x1ODlFM1x1Njc5MGN1cnJlbnRFcGlzb2Rlc1x1NTkzMVx1OEQyNTonLCBlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gXHU1QzA2XHU1MjY3XHU5NkM2XHU1MjE3XHU4ODY4XHU0RkREXHU1QjU4XHU1MjMwbG9jYWxTdG9yYWdlXHVGRjBDXHU2NEFEXHU2NTNFXHU1NjY4XHU5ODc1XHU5NzYyXHU0RjFBXHU4QkZCXHU1M0Q2XHU1QjgzXHJcbiAgICAgICAgaWYgKGVwaXNvZGVzTGlzdC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjdXJyZW50RXBpc29kZXMnLCBKU09OLnN0cmluZ2lmeShlcGlzb2Rlc0xpc3QpKTtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coYFx1NURGMlx1NUMwNlx1NTI2N1x1OTZDNlx1NTIxN1x1ODg2OFx1NEZERFx1NUI1OFx1NTIzMGxvY2FsU3RvcmFnZVx1RkYwQ1x1NTE3MSAke2VwaXNvZGVzTGlzdC5sZW5ndGh9IFx1OTZDNmApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gXHU0RkREXHU1QjU4XHU1RjUzXHU1MjREXHU5ODc1XHU5NzYyVVJMXHU0RjVDXHU0RTNBXHU4RkQ0XHU1NkRFXHU1NzMwXHU1NzQwXHJcbiAgICAgICAgbGV0IGN1cnJlbnRQYXRoO1xyXG4gICAgICAgIGlmICh3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUuc3RhcnRzV2l0aCgnL3BsYXllci5odG1sJykgfHwgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLnN0YXJ0c1dpdGgoJy93YXRjaC5odG1sJykpIHtcclxuICAgICAgICAgICAgY3VycmVudFBhdGggPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbGFzdFBhZ2VVcmwnKSB8fCAnLyc7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY3VycmVudFBhdGggPSB3aW5kb3cubG9jYXRpb24ub3JpZ2luICsgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lICsgd2luZG93LmxvY2F0aW9uLnNlYXJjaDtcclxuICAgICAgICB9XHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2xhc3RQYWdlVXJsJywgY3VycmVudFBhdGgpO1xyXG5cclxuICAgICAgICAvLyBcdTY3ODRcdTkwMjBcdTY0QURcdTY1M0VcdTU2NjhVUkxcclxuICAgICAgICBsZXQgcGxheWVyVXJsO1xyXG4gICAgICAgIGNvbnN0IHNvdXJjZU5hbWVGb3JVcmwgPSBoaXN0b3J5SXRlbSA/IGhpc3RvcnlJdGVtLnNvdXJjZU5hbWUgOiAobmV3IFVSTFNlYXJjaFBhcmFtcyhuZXcgVVJMKHVybCwgd2luZG93LmxvY2F0aW9uLm9yaWdpbikuc2VhcmNoKSkuZ2V0KCdzb3VyY2UnKTtcclxuICAgICAgICBjb25zdCBzb3VyY2VDb2RlRm9yVXJsID0gaGlzdG9yeUl0ZW0gPyBoaXN0b3J5SXRlbS5zb3VyY2VDb2RlIHx8IGhpc3RvcnlJdGVtLnNvdXJjZU5hbWUgOiAobmV3IFVSTFNlYXJjaFBhcmFtcyhuZXcgVVJMKHVybCwgd2luZG93LmxvY2F0aW9uLm9yaWdpbikuc2VhcmNoKSkuZ2V0KCdzb3VyY2VfY29kZScpO1xyXG4gICAgICAgIGNvbnN0IGlkRm9yVXJsID0gaGlzdG9yeUl0ZW0gPyBoaXN0b3J5SXRlbS52b2RfaWQgOiAnJztcclxuXHJcblxyXG4gICAgICAgIGlmICh1cmwuaW5jbHVkZXMoJ3BsYXllci5odG1sJykgfHwgdXJsLmluY2x1ZGVzKCd3YXRjaC5odG1sJykpIHtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ1x1NjhDMFx1NkQ0Qlx1NTIzMFx1NUQ0Q1x1NTk1N1x1NjRBRFx1NjUzRVx1OTRGRVx1NjNBNVx1RkYwQ1x1ODlFM1x1Njc5MFx1NzcxRlx1NUI5RVVSTCcpO1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbmVzdGVkVXJsID0gbmV3IFVSTCh1cmwsIHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4pO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbmVzdGVkUGFyYW1zID0gbmVzdGVkVXJsLnNlYXJjaFBhcmFtcztcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlYWxWaWRlb1VybCA9IG5lc3RlZFBhcmFtcy5nZXQoJ3VybCcpIHx8IHVybDtcclxuXHJcbiAgICAgICAgICAgICAgICBwbGF5ZXJVcmwgPSBgcGxheWVyLmh0bWw/dXJsPSR7ZW5jb2RlVVJJQ29tcG9uZW50KHJlYWxWaWRlb1VybCl9JnRpdGxlPSR7ZW5jb2RlVVJJQ29tcG9uZW50KHRpdGxlKX0maW5kZXg9JHtlcGlzb2RlSW5kZXh9JnBvc2l0aW9uPSR7TWF0aC5mbG9vcihwbGF5YmFja1Bvc2l0aW9uIHx8IDApfSZyZXR1cm5Vcmw9JHtlbmNvZGVVUklDb21wb25lbnQoY3VycmVudFBhdGgpfWA7XHJcbiAgICAgICAgICAgICAgICBpZiAoc291cmNlTmFtZUZvclVybCkgcGxheWVyVXJsICs9IGAmc291cmNlPSR7ZW5jb2RlVVJJQ29tcG9uZW50KHNvdXJjZU5hbWVGb3JVcmwpfWA7XHJcbiAgICAgICAgICAgICAgICBpZiAoc291cmNlQ29kZUZvclVybCkgcGxheWVyVXJsICs9IGAmc291cmNlX2NvZGU9JHtlbmNvZGVVUklDb21wb25lbnQoc291cmNlQ29kZUZvclVybCl9YDtcclxuICAgICAgICAgICAgICAgIGlmIChpZEZvclVybCkgcGxheWVyVXJsICs9IGAmaWQ9JHtlbmNvZGVVUklDb21wb25lbnQoaWRGb3JVcmwpfWA7XHJcblxyXG5cclxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5lcnJvcignXHU4OUUzXHU2NzkwXHU1RDRDXHU1OTU3VVJMXHU1MUZBXHU5NTE5OicsIGUpO1xyXG4gICAgICAgICAgICAgICAgcGxheWVyVXJsID0gYHBsYXllci5odG1sP3VybD0ke2VuY29kZVVSSUNvbXBvbmVudCh1cmwpfSZ0aXRsZT0ke2VuY29kZVVSSUNvbXBvbmVudCh0aXRsZSl9JmluZGV4PSR7ZXBpc29kZUluZGV4fSZwb3NpdGlvbj0ke01hdGguZmxvb3IocGxheWJhY2tQb3NpdGlvbiB8fCAwKX0mcmV0dXJuVXJsPSR7ZW5jb2RlVVJJQ29tcG9uZW50KGN1cnJlbnRQYXRoKX1gO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNvdXJjZU5hbWVGb3JVcmwpIHBsYXllclVybCArPSBgJnNvdXJjZT0ke2VuY29kZVVSSUNvbXBvbmVudChzb3VyY2VOYW1lRm9yVXJsKX1gO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNvdXJjZUNvZGVGb3JVcmwpIHBsYXllclVybCArPSBgJnNvdXJjZV9jb2RlPSR7ZW5jb2RlVVJJQ29tcG9uZW50KHNvdXJjZUNvZGVGb3JVcmwpfWA7XHJcbiAgICAgICAgICAgICAgICBpZiAoaWRGb3JVcmwpIHBsYXllclVybCArPSBgJmlkPSR7ZW5jb2RlVVJJQ29tcG9uZW50KGlkRm9yVXJsKX1gO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgIC8vIFRoaXMgY2FzZSBzaG91bGQgaWRlYWxseSBub3QgaGFwcGVuIGlmICd1cmwnIGlzIGFsd2F5cyBhIHBsYXllci5odG1sIGxpbmsgZnJvbSBoaXN0b3J5XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUud2FybihcIlBsYXlpbmcgZnJvbSBoaXN0b3J5IHdpdGggYSBub24tcGxheWVyLmh0bWwgVVJMIHN0cnVjdHVyZS4gVGhpcyBtaWdodCBiZSBhbiBpc3N1ZS5cIik7XHJcbiAgICAgICAgICAgIGNvbnN0IHBsYXlVcmwgPSBuZXcgVVJMKHVybCwgd2luZG93LmxvY2F0aW9uLm9yaWdpbik7XHJcbiAgICAgICAgICAgIGlmICghcGxheVVybC5zZWFyY2hQYXJhbXMuaGFzKCdpbmRleCcpICYmIGVwaXNvZGVJbmRleCA+IDApIHtcclxuICAgICAgICAgICAgICAgIHBsYXlVcmwuc2VhcmNoUGFyYW1zLnNldCgnaW5kZXgnLCBlcGlzb2RlSW5kZXgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHBsYXlVcmwuc2VhcmNoUGFyYW1zLnNldCgncG9zaXRpb24nLCBNYXRoLmZsb29yKHBsYXliYWNrUG9zaXRpb24gfHwgMCkudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgIHBsYXlVcmwuc2VhcmNoUGFyYW1zLnNldCgncmV0dXJuVXJsJywgZW5jb2RlVVJJQ29tcG9uZW50KGN1cnJlbnRQYXRoKSk7XHJcbiAgICAgICAgICAgIGlmIChzb3VyY2VOYW1lRm9yVXJsKSBwbGF5VXJsLnNlYXJjaFBhcmFtcy5zZXQoJ3NvdXJjZScsIHNvdXJjZU5hbWVGb3JVcmwpO1xyXG4gICAgICAgICAgICBpZiAoc291cmNlQ29kZUZvclVybCkgcGxheVVybC5zZWFyY2hQYXJhbXMuc2V0KCdzb3VyY2VfY29kZScsIHNvdXJjZUNvZGVGb3JVcmwpO1xyXG4gICAgICAgICAgICBpZiAoaWRGb3JVcmwpIHBsYXlVcmwuc2VhcmNoUGFyYW1zLnNldCgnaWQnLCBpZEZvclVybCk7XHJcbiAgICAgICAgICAgIHBsYXllclVybCA9IHBsYXlVcmwudG9TdHJpbmcoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHNob3dWaWRlb1BsYXllcihwbGF5ZXJVcmwpO1xyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgIC8vIGNvbnNvbGUuZXJyb3IoJ1x1NEVDRVx1NTM4Nlx1NTNGMlx1OEJCMFx1NUY1NVx1NjRBRFx1NjUzRVx1NTkzMVx1OEQyNTonLCBlKTtcclxuICAgICAgICBjb25zdCBzaW1wbGVVcmwgPSBgcGxheWVyLmh0bWw/dXJsPSR7ZW5jb2RlVVJJQ29tcG9uZW50KHVybCl9JnRpdGxlPSR7ZW5jb2RlVVJJQ29tcG9uZW50KHRpdGxlKX0maW5kZXg9JHtlcGlzb2RlSW5kZXh9YDtcclxuICAgICAgICBzaG93VmlkZW9QbGF5ZXIoc2ltcGxlVXJsKTtcclxuICAgIH1cclxufVxyXG5cclxuLy8gXHU2REZCXHU1MkEwXHU4OUMyXHU3NzBCXHU1Mzg2XHU1M0YyIC0gXHU3ODZFXHU0RkREXHU2QkNGXHU0RTJBXHU4OUM2XHU5ODkxXHU2ODA3XHU5ODk4XHU1M0VBXHU2NzA5XHU0RTAwXHU2NzYxXHU4QkIwXHU1RjU1XHJcbi8vIElNUE9SVEFOVDogdmlkZW9JbmZvIHBhc3NlZCB0byB0aGlzIGZ1bmN0aW9uIHNob3VsZCBpbmNsdWRlIGEgJ3Nob3dJZGVudGlmaWVyJyBwcm9wZXJ0eVxyXG4vLyAoaWRlYWxseSBgJHtzb3VyY2VOYW1lfV8ke3ZvZF9pZH1gKSwgJ3NvdXJjZU5hbWUnLCBhbmQgJ3ZvZF9pZCcuXHJcbmZ1bmN0aW9uIGFkZFRvVmlld2luZ0hpc3RvcnkodmlkZW9JbmZvKSB7XHJcbiAgICAvLyBcdTVCQzZcdTc4MDFcdTRGRERcdTYyQTRcdTY4MjFcdTlBOENcclxuICAgIGlmICh3aW5kb3cuaXNQYXNzd29yZFByb3RlY3RlZCAmJiB3aW5kb3cuaXNQYXNzd29yZFZlcmlmaWVkKSB7XHJcbiAgICAgICAgaWYgKHdpbmRvdy5pc1Bhc3N3b3JkUHJvdGVjdGVkKCkgJiYgIXdpbmRvdy5pc1Bhc3N3b3JkVmVyaWZpZWQoKSkge1xyXG4gICAgICAgICAgICBzaG93UGFzc3dvcmRNb2RhbCAmJiBzaG93UGFzc3dvcmRNb2RhbCgpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBoaXN0b3J5ID0gZ2V0Vmlld2luZ0hpc3RvcnkoKTtcclxuXHJcbiAgICAgICAgLy8gRW5zdXJlIHZpZGVvSW5mbyBoYXMgYSBzaG93SWRlbnRpZmllclxyXG4gICAgICAgIGlmICghdmlkZW9JbmZvLnNob3dJZGVudGlmaWVyKSB7XHJcbiAgICAgICAgICAgIGlmICh2aWRlb0luZm8uc291cmNlTmFtZSAmJiB2aWRlb0luZm8udm9kX2lkKSB7XHJcbiAgICAgICAgICAgICAgICB2aWRlb0luZm8uc2hvd0lkZW50aWZpZXIgPSBgJHt2aWRlb0luZm8uc291cmNlTmFtZX1fJHt2aWRlb0luZm8udm9kX2lkfWA7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBGYWxsYmFjayBpZiBjcml0aWNhbCBJRHMgYXJlIG1pc3NpbmcgZm9yIHRoZSBwcmVmZXJyZWQgaWRlbnRpZmllclxyXG4gICAgICAgICAgICAgICAgdmlkZW9JbmZvLnNob3dJZGVudGlmaWVyID0gKHZpZGVvSW5mby5lcGlzb2RlcyAmJiB2aWRlb0luZm8uZXBpc29kZXMubGVuZ3RoID4gMCkgPyB2aWRlb0luZm8uZXBpc29kZXNbMF0gOiB2aWRlb0luZm8uZGlyZWN0VmlkZW9Vcmw7XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLndhcm4oYGFkZFRvVmlld2luZ0hpc3Rvcnk6IHZpZGVvSW5mbyBmb3IgXCIke3ZpZGVvSW5mby50aXRsZX1cIiB3YXMgbWlzc2luZyBzb3VyY2VOYW1lIG9yIHZvZF9pZCBmb3IgcHJlZmVycmVkIHNob3dJZGVudGlmaWVyLiBHZW5lcmF0ZWQgZmFsbGJhY2s6ICR7dmlkZW9JbmZvLnNob3dJZGVudGlmaWVyfWApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBleGlzdGluZ0luZGV4ID0gaGlzdG9yeS5maW5kSW5kZXgoaXRlbSA9PlxyXG4gICAgICAgICAgICBpdGVtLnRpdGxlID09PSB2aWRlb0luZm8udGl0bGUgJiZcclxuICAgICAgICAgICAgaXRlbS5zb3VyY2VOYW1lID09PSB2aWRlb0luZm8uc291cmNlTmFtZSAmJlxyXG4gICAgICAgICAgICBpdGVtLnNob3dJZGVudGlmaWVyID09PSB2aWRlb0luZm8uc2hvd0lkZW50aWZpZXIgLy8gU3RyaWN0IGNoZWNrIHVzaW5nIHRoZSBkZXRlcm1pbmVkIHNob3dJZGVudGlmaWVyXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgaWYgKGV4aXN0aW5nSW5kZXggIT09IC0xKSB7XHJcbiAgICAgICAgICAgIC8vIEV4YWN0IG1hdGNoIHdpdGggc2hvd0lkZW50aWZpZXI6IFVwZGF0ZSBleGlzdGluZyBzZXJpZXMgZW50cnlcclxuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdJdGVtID0gaGlzdG9yeVtleGlzdGluZ0luZGV4XTtcclxuICAgICAgICAgICAgZXhpc3RpbmdJdGVtLmVwaXNvZGVJbmRleCA9IHZpZGVvSW5mby5lcGlzb2RlSW5kZXg7XHJcbiAgICAgICAgICAgIGV4aXN0aW5nSXRlbS50aW1lc3RhbXAgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgICAgICBleGlzdGluZ0l0ZW0uc291cmNlTmFtZSA9IHZpZGVvSW5mby5zb3VyY2VOYW1lIHx8IGV4aXN0aW5nSXRlbS5zb3VyY2VOYW1lO1xyXG4gICAgICAgICAgICBleGlzdGluZ0l0ZW0uc291cmNlQ29kZSA9IHZpZGVvSW5mby5zb3VyY2VDb2RlIHx8IGV4aXN0aW5nSXRlbS5zb3VyY2VDb2RlO1xyXG4gICAgICAgICAgICBleGlzdGluZ0l0ZW0udm9kX2lkID0gdmlkZW9JbmZvLnZvZF9pZCB8fCBleGlzdGluZ0l0ZW0udm9kX2lkO1xyXG4gICAgICAgICAgICBleGlzdGluZ0l0ZW0uZGlyZWN0VmlkZW9VcmwgPSB2aWRlb0luZm8uZGlyZWN0VmlkZW9VcmwgfHwgZXhpc3RpbmdJdGVtLmRpcmVjdFZpZGVvVXJsO1xyXG4gICAgICAgICAgICBleGlzdGluZ0l0ZW0udXJsID0gdmlkZW9JbmZvLnVybCB8fCBleGlzdGluZ0l0ZW0udXJsO1xyXG4gICAgICAgICAgICBleGlzdGluZ0l0ZW0ucGxheWJhY2tQb3NpdGlvbiA9IHZpZGVvSW5mby5wbGF5YmFja1Bvc2l0aW9uID4gMTAgPyB2aWRlb0luZm8ucGxheWJhY2tQb3NpdGlvbiA6IChleGlzdGluZ0l0ZW0ucGxheWJhY2tQb3NpdGlvbiB8fCAwKTtcclxuICAgICAgICAgICAgZXhpc3RpbmdJdGVtLmR1cmF0aW9uID0gdmlkZW9JbmZvLmR1cmF0aW9uIHx8IGV4aXN0aW5nSXRlbS5kdXJhdGlvbjtcclxuXHJcbiAgICAgICAgICAgIGlmICh2aWRlb0luZm8uZXBpc29kZXMgJiYgQXJyYXkuaXNBcnJheSh2aWRlb0luZm8uZXBpc29kZXMpICYmIHZpZGVvSW5mby5lcGlzb2Rlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWV4aXN0aW5nSXRlbS5lcGlzb2RlcyB8fFxyXG4gICAgICAgICAgICAgICAgICAgICFBcnJheS5pc0FycmF5KGV4aXN0aW5nSXRlbS5lcGlzb2RlcykgfHxcclxuICAgICAgICAgICAgICAgICAgICBleGlzdGluZ0l0ZW0uZXBpc29kZXMubGVuZ3RoICE9PSB2aWRlb0luZm8uZXBpc29kZXMubGVuZ3RoIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgIXZpZGVvSW5mby5lcGlzb2Rlcy5ldmVyeSgoZXAsIGkpID0+IGVwID09PSBleGlzdGluZ0l0ZW0uZXBpc29kZXNbaV0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmdJdGVtLmVwaXNvZGVzID0gWy4uLnZpZGVvSW5mby5lcGlzb2Rlc107XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coYFx1NjZGNFx1NjVCMCAoYWRkVG9WaWV3aW5nSGlzdG9yeSkgXCIke3ZpZGVvSW5mby50aXRsZX1cIiBcdTc2ODRcdTUyNjdcdTk2QzZcdTY1NzBcdTYzNkU6ICR7dmlkZW9JbmZvLmVwaXNvZGVzLmxlbmd0aH1cdTk2QzZgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaGlzdG9yeS5zcGxpY2UoZXhpc3RpbmdJbmRleCwgMSk7XHJcbiAgICAgICAgICAgIGhpc3RvcnkudW5zaGlmdChleGlzdGluZ0l0ZW0pO1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhgXHU2NkY0XHU2NUIwXHU1Mzg2XHU1M0YyXHU4QkIwXHU1RjU1IChhZGRUb1ZpZXdpbmdIaXN0b3J5KTogXCIke3ZpZGVvSW5mby50aXRsZX1cIiwgXHU3QjJDICR7dmlkZW9JbmZvLmVwaXNvZGVJbmRleCAhPT0gdW5kZWZpbmVkID8gdmlkZW9JbmZvLmVwaXNvZGVJbmRleCArIDEgOiAnTi9BJ30gXHU5NkM2YCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gTm8gZXhhY3QgbWF0Y2g6IEFkZCBhcyBhIG5ldyBlbnRyeVxyXG4gICAgICAgICAgICBjb25zdCBuZXdJdGVtID0ge1xyXG4gICAgICAgICAgICAgICAgLi4udmlkZW9JbmZvLCAvLyBJbmNsdWRlcyB0aGUgc2hvd0lkZW50aWZpZXIgd2UgZW5zdXJlZCBpcyBwcmVzZW50XHJcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGlmICh2aWRlb0luZm8uZXBpc29kZXMgJiYgQXJyYXkuaXNBcnJheSh2aWRlb0luZm8uZXBpc29kZXMpKSB7XHJcbiAgICAgICAgICAgICAgICBuZXdJdGVtLmVwaXNvZGVzID0gWy4uLnZpZGVvSW5mby5lcGlzb2Rlc107XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBuZXdJdGVtLmVwaXNvZGVzID0gW107XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGhpc3RvcnkudW5zaGlmdChuZXdJdGVtKTtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coYFx1NTIxQlx1NUVGQVx1NjVCMFx1NzY4NFx1NTM4Nlx1NTNGMlx1OEJCMFx1NUY1NSAoYWRkVG9WaWV3aW5nSGlzdG9yeSk6IFwiJHt2aWRlb0luZm8udGl0bGV9XCIsIEVwaXNvZGU6ICR7dmlkZW9JbmZvLmVwaXNvZGVJbmRleCAhPT0gdW5kZWZpbmVkID8gdmlkZW9JbmZvLmVwaXNvZGVJbmRleCArIDEgOiAnTi9BJ31gKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFx1OTY1MFx1NTIzNlx1NTM4Nlx1NTNGMlx1OEJCMFx1NUY1NVx1NjU3MFx1OTFDRlx1NEUzQTUwXHU2NzYxXHJcbiAgICAgICAgY29uc3QgbWF4SGlzdG9yeUl0ZW1zID0gNTA7XHJcbiAgICAgICAgaWYgKGhpc3RvcnkubGVuZ3RoID4gbWF4SGlzdG9yeUl0ZW1zKSB7XHJcbiAgICAgICAgICAgIGhpc3Rvcnkuc3BsaWNlKG1heEhpc3RvcnlJdGVtcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBcdTRGRERcdTVCNThcdTUyMzBcdTY3MkNcdTU3MzBcdTVCNThcdTUwQThcclxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndmlld2luZ0hpc3RvcnknLCBKU09OLnN0cmluZ2lmeShoaXN0b3J5KSk7XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgLy8gY29uc29sZS5lcnJvcignXHU0RkREXHU1QjU4XHU4OUMyXHU3NzBCXHU1Mzg2XHU1M0YyXHU1OTMxXHU4RDI1OicsIGUpO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyBcdTZFMDVcdTdBN0FcdTg5QzJcdTc3MEJcdTUzODZcdTUzRjJcclxuZnVuY3Rpb24gY2xlYXJWaWV3aW5nSGlzdG9yeSgpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3ZpZXdpbmdIaXN0b3J5Jyk7XHJcbiAgICAgICAgbG9hZFZpZXdpbmdIaXN0b3J5KCk7IC8vIFx1OTFDRFx1NjVCMFx1NTJBMFx1OEY3RFx1N0E3QVx1NzY4NFx1NTM4Nlx1NTNGMlx1OEJCMFx1NUY1NVxyXG4gICAgICAgIHNob3dUb2FzdCgnXHU4OUMyXHU3NzBCXHU1Mzg2XHU1M0YyXHU1REYyXHU2RTA1XHU3QTdBJywgJ3N1Y2Nlc3MnKTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAvLyBjb25zb2xlLmVycm9yKCdcdTZFMDVcdTk2NjRcdTg5QzJcdTc3MEJcdTUzODZcdTUzRjJcdTU5MzFcdThEMjU6JywgZSk7XHJcbiAgICAgICAgc2hvd1RvYXN0KCdcdTZFMDVcdTk2NjRcdTg5QzJcdTc3MEJcdTUzODZcdTUzRjJcdTU5MzFcdThEMjUnLCAnZXJyb3InKTtcclxuICAgIH1cclxufVxyXG5cclxuLy8gXHU2NkY0XHU2NUIwdG9nZ2xlU2V0dGluZ3NcdTUxRkRcdTY1NzBcdTRFRTVcdTU5MDRcdTc0MDZcdTUzODZcdTUzRjJcdTk3NjJcdTY3N0ZcdTRFOTJcdTUyQThcclxuY29uc3Qgb3JpZ2luYWxUb2dnbGVTZXR0aW5ncyA9IHRvZ2dsZVNldHRpbmdzO1xyXG50b2dnbGVTZXR0aW5ncyA9IGZ1bmN0aW9uKGUpIHtcclxuICAgIGlmIChlKSBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cclxuICAgIC8vIFx1NTM5Rlx1NTlDQlx1OEJCRVx1N0Y2RVx1OTc2Mlx1Njc3Rlx1NTIwN1x1NjM2Mlx1OTAzQlx1OEY5MVxyXG4gICAgb3JpZ2luYWxUb2dnbGVTZXR0aW5ncyhlKTtcclxuXHJcbiAgICAvLyBcdTU5ODJcdTY3OUNcdTUzODZcdTUzRjJcdThCQjBcdTVGNTVcdTk3NjJcdTY3N0ZcdTY2MkZcdTYyNTNcdTVGMDBcdTc2ODRcdUZGMENcdTUyMTlcdTUxNzNcdTk1RURcdTVCODNcclxuICAgIGNvbnN0IGhpc3RvcnlQYW5lbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdoaXN0b3J5UGFuZWwnKTtcclxuICAgIGlmIChoaXN0b3J5UGFuZWwgJiYgaGlzdG9yeVBhbmVsLmNsYXNzTGlzdC5jb250YWlucygnc2hvdycpKSB7XHJcbiAgICAgICAgaGlzdG9yeVBhbmVsLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTtcclxuICAgIH1cclxufTtcclxuXHJcbi8vIFx1NzBCOVx1NTFGQlx1NTkxNlx1OTBFOFx1NTE3M1x1OTVFRFx1NTM4Nlx1NTNGMlx1OTc2Mlx1Njc3RlxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24oKSB7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICBjb25zdCBoaXN0b3J5UGFuZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGlzdG9yeVBhbmVsJyk7XHJcbiAgICAgICAgY29uc3QgaGlzdG9yeUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbltvbmNsaWNrPVwidG9nZ2xlSGlzdG9yeShldmVudClcIl0nKTtcclxuXHJcbiAgICAgICAgaWYgKGhpc3RvcnlQYW5lbCAmJiBoaXN0b3J5QnV0dG9uICYmXHJcbiAgICAgICAgICAgICFoaXN0b3J5UGFuZWwuY29udGFpbnMoZS50YXJnZXQpICYmXHJcbiAgICAgICAgICAgICFoaXN0b3J5QnV0dG9uLmNvbnRhaW5zKGUudGFyZ2V0KSAmJlxyXG4gICAgICAgICAgICBoaXN0b3J5UGFuZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdzaG93JykpIHtcclxuICAgICAgICAgICAgaGlzdG9yeVBhbmVsLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufSk7XHJcblxyXG4vLyBcdTZFMDVcdTk2NjRcdTY3MkNcdTU3MzBcdTVCNThcdTUwQThcdTdGMTNcdTVCNThcdTVFNzZcdTUyMzdcdTY1QjBcdTk4NzVcdTk3NjJcclxuZnVuY3Rpb24gY2xlYXJMb2NhbFN0b3JhZ2UoKSB7XHJcbiAgICAvLyBcdTc4NkVcdTRGRERcdTZBMjFcdTYwMDFcdTY4NDZcdTU3MjhcdTk4NzVcdTk3NjJcdTRFMEFcdTUzRUFcdTY3MDlcdTRFMDBcdTRFMkFcdTVCOUVcdTRGOEJcclxuICAgIGxldCBtb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtZXNzYWdlQm94TW9kYWwnKTtcclxuICAgIGlmIChtb2RhbCkge1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobW9kYWwpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1NTIxQlx1NUVGQVx1NkEyMVx1NjAwMVx1Njg0Nlx1NTE0M1x1N0QyMFxyXG4gICAgbW9kYWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIG1vZGFsLmlkID0gJ21lc3NhZ2VCb3hNb2RhbCc7XHJcbiAgICBtb2RhbC5jbGFzc05hbWUgPSAnZml4ZWQgaW5zZXQtMCBiZy1ibGFjayBiZy1vcGFjaXR5LTc1IGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHotNDAnO1xyXG5cclxuICAgIG1vZGFsLmlubmVySFRNTCA9IGBcclxuICAgICAgICA8ZGl2IGNsYXNzPVwiYmctWyMxOTE5MTldIHJvdW5kZWQtbGcgcC02IG1heC13LW1kIHctZnVsbCBtYXgtaC1bOTB2aF0gb3ZlcmZsb3cteS1hdXRvIHJlbGF0aXZlXCI+XHJcbiAgICAgICAgICAgIDxidXR0b24gaWQ9XCJjbG9zZUJveE1vZGFsXCIgY2xhc3M9XCJhYnNvbHV0ZSB0b3AtNCByaWdodC00IHRleHQtZ3JheS00MDAgaG92ZXI6dGV4dC13aGl0ZSB0ZXh0LXhsXCI+JnRpbWVzOzwvYnV0dG9uPlxyXG5cclxuICAgICAgICAgICAgPGgzIGNsYXNzPVwidGV4dC14bCBmb250LWJvbGQgdGV4dC1yZWQtNTAwIG1iLTRcIj5cdThCNjZcdTU0NEE8L2gzPlxyXG5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1iLTBcIj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS0zMDBcIj5cdTc4NkVcdTVCOUFcdTg5ODFcdTZFMDVcdTk2NjRcdTk4NzVcdTk3NjJcdTdGMTNcdTVCNThcdTU0MTdcdUZGMUY8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtZ3JheS0zMDAgbWItNFwiPlx1NkI2NFx1NTI5Rlx1ODBGRFx1NEYxQVx1NTIyMFx1OTY2NFx1NEY2MFx1NzY4NFx1ODlDMlx1NzcwQlx1OEJCMFx1NUY1NVx1MzAwMVx1ODFFQVx1NUI5QVx1NEU0OSBBUEkgXHU2M0E1XHU1M0UzXHU1NDhDIENvb2tpZVx1RkYwQzxzY2FuIGNsYXNzPVwidGV4dC1yZWQtNTAwIGZvbnQtYm9sZFwiPlx1NkI2NFx1NjRDRFx1NEY1Q1x1NEUwRFx1NTNFRlx1NjA2Mlx1NTkwRFx1RkYwMTwvc2Nhbj48L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmbGV4IGp1c3RpZnktZW5kIHNwYWNlLXgtMlwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9XCJjb25maXJtQm94TW9kYWxcIiBjbGFzcz1cIm1sLTIgYmctZ3JheS02MDAgaG92ZXI6YmctZ3JheS03MDAgdGV4dC13aGl0ZSBweC00IHB5LTEgcm91bmRlZFwiPlx1Nzg2RVx1NUI5QTwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9XCJjYW5jZWxCb3hNb2RhbFwiIGNsYXNzPVwibWwtMiBiZy1waW5rLTYwMCBob3ZlcjpiZy1waW5rLTcwMCB0ZXh0LXdoaXRlIHB4LTQgcHktMSByb3VuZGVkXCI+XHU1M0Q2XHU2RDg4PC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+YDtcclxuXHJcbiAgICAvLyBcdTZERkJcdTUyQTBcdTZBMjFcdTYwMDFcdTY4NDZcdTUyMzBcdTk4NzVcdTk3NjJcclxuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobW9kYWwpO1xyXG5cclxuICAgIC8vIFx1NkRGQlx1NTJBMFx1NEU4Qlx1NEVGNlx1NzZEMVx1NTQyQ1x1NTY2OCAtIFx1NTE3M1x1OTVFRFx1NjMwOVx1OTRBRVxyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Nsb3NlQm94TW9kYWwnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKG1vZGFsKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIFx1NkRGQlx1NTJBMFx1NEU4Qlx1NEVGNlx1NzZEMVx1NTQyQ1x1NTY2OCAtIFx1Nzg2RVx1NUI5QVx1NjMwOVx1OTRBRVxyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbmZpcm1Cb3hNb2RhbCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIFx1NkUwNVx1OTY2NFx1NjI0MFx1NjcwOWxvY2FsU3RvcmFnZVx1NjU3MFx1NjM2RVxyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5jbGVhcigpO1xyXG5cclxuICAgICAgICAvLyBcdTZFMDVcdTk2NjRcdTYyNDBcdTY3MDljb29raWVcclxuICAgICAgICBjb25zdCBjb29raWVzID0gZG9jdW1lbnQuY29va2llLnNwbGl0KFwiO1wiKTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvb2tpZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgY29va2llID0gY29va2llc1tpXTtcclxuICAgICAgICAgICAgY29uc3QgZXFQb3MgPSBjb29raWUuaW5kZXhPZihcIj1cIik7XHJcbiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBlcVBvcyA+IC0xID8gY29va2llLnN1YnN0cigwLCBlcVBvcykudHJpbSgpIDogY29va2llLnRyaW0oKTtcclxuICAgICAgICAgICAgZG9jdW1lbnQuY29va2llID0gbmFtZSArIFwiPTtleHBpcmVzPVRodSwgMDEgSmFuIDE5NzAgMDA6MDA6MDAgR01UO3BhdGg9L1wiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbW9kYWwuaW5uZXJIVE1MID0gYFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYmctWyMxOTE5MTldIHJvdW5kZWQtbGcgcC02IG1heC13LW1kIHctZnVsbCBtYXgtaC1bOTB2aF0gb3ZlcmZsb3cteS1hdXRvIHJlbGF0aXZlXCI+XHJcbiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPVwiY2xvc2VCb3hNb2RhbFwiIGNsYXNzPVwiYWJzb2x1dGUgdG9wLTQgcmlnaHQtNCB0ZXh0LWdyYXktNDAwIGhvdmVyOnRleHQtd2hpdGUgdGV4dC14bFwiPiZ0aW1lczs8L2J1dHRvbj5cclxuXHJcbiAgICAgICAgICAgICAgICA8aDMgY2xhc3M9XCJ0ZXh0LXhsIGZvbnQtYm9sZCB0ZXh0LXdoaXRlIG1iLTRcIj5cdTYzRDBcdTc5M0E8L2gzPlxyXG5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtYi00XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTMwMCBtYi00XCI+XHU5ODc1XHU5NzYyXHU3RjEzXHU1QjU4XHU1NDhDQ29va2llXHU1REYyXHU2RTA1XHU5NjY0XHVGRjBDPHNwYW4gaWQ9XCJjb3VudGRvd25cIj4zPC9zcGFuPiBcdTc5RDJcdTU0MEVcdTgxRUFcdTUyQThcdTUyMzdcdTY1QjBcdTY3MkNcdTk4NzVcdTk3NjJcdTMwMDI8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5gO1xyXG5cclxuICAgICAgICBsZXQgY291bnRkb3duID0gMztcclxuICAgICAgICBjb25zdCBjb3VudGRvd25FbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvdW50ZG93bicpO1xyXG5cclxuICAgICAgICBjb25zdCBjb3VudGRvd25JbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcclxuICAgICAgICAgICAgY291bnRkb3duLS07XHJcbiAgICAgICAgICAgIGlmIChjb3VudGRvd24gPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgY291bnRkb3duRWxlbWVudC50ZXh0Q29udGVudCA9IGNvdW50ZG93bjtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoY291bnRkb3duSW50ZXJ2YWwpO1xyXG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgMTAwMCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBcdTZERkJcdTUyQTBcdTRFOEJcdTRFRjZcdTc2RDFcdTU0MkNcdTU2NjggLSBcdTUzRDZcdTZEODhcdTYzMDlcdTk0QUVcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYW5jZWxCb3hNb2RhbCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobW9kYWwpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gXHU2REZCXHU1MkEwXHU0RThCXHU0RUY2XHU3NkQxXHU1NDJDXHU1NjY4IC0gXHU3MEI5XHU1MUZCXHU2QTIxXHU2MDAxXHU2ODQ2XHU1OTE2XHU5MEU4XHU1MTczXHU5NUVEXHJcbiAgICBtb2RhbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgaWYgKGUudGFyZ2V0ID09PSBtb2RhbCkge1xyXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKG1vZGFsKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuLy8gXHU2NjNFXHU3OTNBXHU5MTREXHU3RjZFXHU2NTg3XHU0RUY2XHU1QkZDXHU1MTY1XHU5ODc1XHU5NzYyXHJcbmZ1bmN0aW9uIHNob3dJbXBvcnRCb3goZnVuKSB7XHJcbiAgICAvLyBcdTc4NkVcdTRGRERcdTZBMjFcdTYwMDFcdTY4NDZcdTU3MjhcdTk4NzVcdTk3NjJcdTRFMEFcdTUzRUFcdTY3MDlcdTRFMDBcdTRFMkFcdTVCOUVcdTRGOEJcclxuICAgIGxldCBtb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaG93SW1wb3J0Qm94TW9kYWwnKTtcclxuICAgIGlmIChtb2RhbCkge1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobW9kYWwpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1NTIxQlx1NUVGQVx1NkEyMVx1NjAwMVx1Njg0Nlx1NTE0M1x1N0QyMFxyXG4gICAgbW9kYWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIG1vZGFsLmlkID0gJ3Nob3dJbXBvcnRCb3hNb2RhbCc7XHJcbiAgICBtb2RhbC5jbGFzc05hbWUgPSAnZml4ZWQgaW5zZXQtMCBiZy1ibGFjayBiZy1vcGFjaXR5LTc1IGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHotNDAnO1xyXG5cclxuICAgIG1vZGFsLmlubmVySFRNTCA9IGBcclxuICAgICAgICA8ZGl2IGNsYXNzPVwiYmctWyMxOTE5MTldIHJvdW5kZWQtbGcgcC02IG1heC13LW1kIHctZnVsbCBtYXgtaC1bOTB2aF0gb3ZlcmZsb3cteS1hdXRvIHJlbGF0aXZlXCI+XHJcbiAgICAgICAgICAgIDxidXR0b24gaWQ9XCJjbG9zZUJveE1vZGFsXCIgY2xhc3M9XCJhYnNvbHV0ZSB0b3AtNCByaWdodC00IHRleHQtZ3JheS00MDAgaG92ZXI6dGV4dC13aGl0ZSB0ZXh0LXhsXCI+JnRpbWVzOzwvYnV0dG9uPlxyXG5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm0tNFwiPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBpZD1cImRyb3Bab25lXCIgY2xhc3M9XCJ3LWZ1bGwgcHktOSBiZy1bIzExMV0gcm91bmRlZC0yeGwgYm9yZGVyIGJvcmRlci1ncmF5LTMwMCBnYXAtMyBncmlkIGJvcmRlci1kYXNoZWRcIj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZ3JpZCBnYXAtMVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3ZnIGNsYXNzPVwibXgtYXV0b1wiIHdpZHRoPVwiNDBcIiBoZWlnaHQ9XCI0MFwiIHZpZXdCb3g9XCIwIDAgNDAgNDBcIiBmaWxsPVwibm9uZVwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxnIGlkPVwiRmlsZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGlkPVwiaWNvblwiIGQ9XCJNMzEuNjQ5NyAxMC42MDU2TDMyLjI0NzYgMTAuMDc0MUwzMS42NDk3IDEwLjYwNTZaTTI4LjY1NTkgNy4yMzc1N0wyOC4wNTggNy43NjkwN0wyOC4wNTggNy43NjkwN0wyOC42NTU5IDcuMjM3NTdaTTI2LjUzNTYgNS4yOTI1M0wyNi4yMDc5IDYuMDIyMzNMMjYuMjA3OSA2LjAyMjMzTDI2LjUzNTYgNS4yOTI1M1pNMzMuMTE2MSAxMi41ODI3TDMyLjM2ODMgMTIuODY3VjEyLjg2N0wzMy4xMTYxIDEyLjU4MjdaTTMxLjg2OTIgMzMuNTM1NUwzMi40MzQ5IDM0LjEwMTJMMzEuODY5MiAzMy41MzU1Wk0yNC4yMzEgMTEuNDgzNkwyNS4wMTU3IDExLjMyNzZMMjQuMjMxIDExLjQ4MzZaTTI2Ljg1IDE0LjEwMjZMMjYuNjk0IDE0Ljg4NzJMMjYuODUgMTQuMTAyNlpNMTEuNjY3IDIwLjg2NjdDMTEuMjI1MiAyMC44NjY3IDEwLjg2NyAyMS4yMjQ4IDEwLjg2NyAyMS42NjY3QzEwLjg2NyAyMi4xMDg1IDExLjIyNTIgMjIuNDY2NyAxMS42NjcgMjIuNDY2N1YyMC44NjY3Wk0yNS4wMDAzIDIyLjQ2NjdDMjUuNDQyMiAyMi40NjY3IDI1LjgwMDMgMjIuMTA4NSAyNS44MDAzIDIxLjY2NjdDMjUuODAwMyAyMS4yMjQ4IDI1LjQ0MjIgMjAuODY2NyAyNS4wMDAzIDIwLjg2NjdWMjIuNDY2N1pNMTEuNjY3IDI1Ljg2NjdDMTEuMjI1MiAyNS44NjY3IDEwLjg2NyAyNi4yMjQ4IDEwLjg2NyAyNi42NjY3QzEwLjg2NyAyNy4xMDg1IDExLjIyNTIgMjcuNDY2NyAxMS42NjcgMjcuNDY2N1YyNS44NjY3Wk0yMC4wMDAzIDI3LjQ2NjdDMjAuNDQyMiAyNy40NjY3IDIwLjgwMDMgMjcuMTA4NSAyMC44MDAzIDI2LjY2NjdDMjAuODAwMyAyNi4yMjQ4IDIwLjQ0MjIgMjUuODY2NyAyMC4wMDAzIDI1Ljg2NjdWMjcuNDY2N1pNMjMuMzMzNyAzNC4ySDE2LjY2N1YzNS44SDIzLjMzMzdWMzQuMlpNNy40NjY5OSAyNVYxNUg1Ljg2Njk5VjI1SDcuNDY2OTlaTTMyLjUzMzcgMTUuMDM0N1YyNUgzNC4xMzM3VjE1LjAzNDdIMzIuNTMzN1pNMTYuNjY3IDUuOEgyMy42NzMyVjQuMkgxNi42NjdWNS44Wk0yMy42NzMyIDUuOEMyNS4yMTg1IDUuOCAyNS43NDkzIDUuODE2MzkgMjYuMjA3OSA2LjAyMjMzTDI2Ljg2MzMgNC41NjI3NEMyNi4wMTkxIDQuMTgzNjEgMjUuMDc1OSA0LjIgMjMuNjczMiA0LjJWNS44Wk0yOS4yNTM5IDYuNzA2MDhDMjguMzIyIDUuNjU3NzEgMjcuNzA3NiA0Ljk0MTg3IDI2Ljg2MzMgNC41NjI3NEwyNi4yMDc5IDYuMDIyMzNDMjYuNjY2NSA2LjIyODI2IDI3LjAzMTQgNi42MTQxIDI4LjA1OCA3Ljc2OTA3TDI5LjI1MzkgNi43MDYwOFpNMzQuMTMzNyAxNS4wMzQ3QzM0LjEzMzcgMTMuODQxMSAzNC4xNDU4IDEzLjAzOTkgMzMuODYzOCAxMi4yOTg0TDMyLjM2ODMgMTIuODY3QzMyLjUyMTYgMTMuMjcwMiAzMi41MzM3IDEzLjcyMjEgMzIuNTMzNyAxNS4wMzQ3SDM0LjEzMzdaTTMxLjA1MTggMTEuMTM3MUMzMS45MjM4IDEyLjExODEgMzIuMjE1IDEyLjQ2MzkgMzIuMzY4MyAxMi44NjdMMzMuODYzOCAxMi4yOTg0QzMzLjU4MTkgMTEuNTU2OSAzMy4wNDA2IDEwLjk2NjIgMzIuMjQ3NiAxMC4wNzQxTDMxLjA1MTggMTEuMTM3MVpNMTYuNjY3IDM0LjJDMTQuMjg3NCAzNC4yIDEyLjU4MzEgMzQuMTk4MyAxMS4yODcyIDM0LjAyNDFDMTAuMDE0NCAzMy44NTI5IDkuMjU1OTYgMzMuNTI4NyA4LjY5NzE0IDMyLjk2OThMNy41NjU3NyAzNC4xMDEyQzguNDcxNDIgMzUuMDA2OSA5LjYyMzc1IDM1LjQxNDggMTEuMDc0IDM1LjYwOThDMTIuNTAxMyAzNS44MDE3IDE0LjMzMjYgMzUuOCAxNi42NjcgMzUuOFYzNC4yWk01Ljg2Njk5IDI1QzUuODY2OTkgMjcuMzM0NCA1Ljg2NTI5IDI5LjE2NTcgNi4wNTcxOCAzMC41OTNDNi4yNTIxNyAzMi4wNDMyIDYuNjYwMTIgMzMuMTk1NiA3LjU2NTc3IDM0LjEwMTJMOC42OTcxNCAzMi45Njk4QzguMTM4MzMgMzIuNDExIDcuODE0MDUgMzEuNjUyNiA3LjY0MjkyIDMwLjM3OThDNy40Njg2OSAyOS4wODM5IDcuNDY2OTkgMjcuMzc5NiA3LjQ2Njk5IDI1SDUuODY2OTlaTTIzLjMzMzcgMzUuOEMyNS42NjgxIDM1LjggMjcuNDk5MyAzNS44MDE3IDI4LjkyNjYgMzUuNjA5OEMzMC4zNzY5IDM1LjQxNDggMzEuNTI5MiAzNS4wMDY5IDMyLjQzNDkgMzQuMTAxMkwzMS4zMDM1IDMyLjk2OThDMzAuNzQ0NyAzMy41Mjg3IDI5Ljk4NjMgMzMuODUyOSAyOC43MTM0IDM0LjAyNDFDMjcuNDE3NSAzNC4xOTgzIDI1LjcxMzMgMzQuMiAyMy4zMzM3IDM0LjJWMzUuOFpNMzIuNTMzNyAyNUMzMi41MzM3IDI3LjM3OTYgMzIuNTMyIDI5LjA4MzkgMzIuMzU3NyAzMC4zNzk4QzMyLjE4NjYgMzEuNjUyNiAzMS44NjIzIDMyLjQxMSAzMS4zMDM1IDMyLjk2OThMMzIuNDM0OSAzNC4xMDEyQzMzLjM0MDUgMzMuMTk1NiAzMy43NDg1IDMyLjA0MzIgMzMuOTQzNSAzMC41OTNDMzQuMTM1NCAyOS4xNjU3IDM0LjEzMzcgMjcuMzM0NCAzNC4xMzM3IDI1SDMyLjUzMzdaTTcuNDY2OTkgMTVDNy40NjY5OSAxMi42MjA0IDcuNDY4NjkgMTAuOTE2MSA3LjY0MjkyIDkuNjIwMjRDNy44MTQwNSA4LjM0NzM4IDguMTM4MzMgNy41ODg5NyA4LjY5NzE0IDcuMDMwMTVMNy41NjU3NyA1Ljg5ODc4QzYuNjYwMTIgNi44MDQ0MyA2LjI1MjE3IDcuOTU2NzYgNi4wNTcxOCA5LjQwNzA0QzUuODY1MjkgMTAuODM0MyA1Ljg2Njk5IDEyLjY2NTYgNS44NjY5OSAxNUg3LjQ2Njk5Wk0xNi42NjcgNC4yQzE0LjMzMjYgNC4yIDEyLjUwMTMgNC4xOTgzIDExLjA3NCA0LjM5MDE5QzkuNjIzNzUgNC41ODUxOCA4LjQ3MTQyIDQuOTkzMTMgNy41NjU3NyA1Ljg5ODc4TDguNjk3MTQgNy4wMzAxNUM5LjI1NTk2IDYuNDcxMzMgMTAuMDE0NCA2LjE0NzA2IDExLjI4NzIgNS45NzU5MkMxMi41ODMxIDUuODAxNyAxNC4yODc0IDUuOCAxNi42NjcgNS44VjQuMlpNMjMuMzY3IDVWMTBIMjQuOTY3VjVIMjMuMzY3Wk0yOC4zMzM3IDE0Ljk2NjdIMzMuMzMzN1YxMy4zNjY3SDI4LjMzMzdWMTQuOTY2N1pNMjMuMzY3IDEwQzIzLjM2NyAxMC43MzYxIDIzLjM2MzEgMTEuMjIxIDIzLjQ0NjQgMTEuNjM5N0wyNS4wMTU3IDExLjMyNzZDMjQuOTcwOSAxMS4xMDIzIDI0Ljk2NyAxMC44MTI4IDI0Ljk2NyAxMEgyMy4zNjdaTTI4LjMzMzcgMTMuMzY2N0MyNy41MjA5IDEzLjM2NjcgMjcuMjMxMyAxMy4zNjI4IDI3LjAwNjEgMTMuMzE4TDI2LjY5NCAxNC44ODcyQzI3LjExMjcgMTQuOTcwNSAyNy41OTc2IDE0Ljk2NjcgMjguMzMzNyAxNC45NjY3VjEzLjM2NjdaTTIzLjQ0NjQgMTEuNjM5N0MyMy43NzI2IDEzLjI3OTQgMjUuMDU0MyAxNC41NjExIDI2LjY5NCAxNC44ODcyTDI3LjAwNjEgMTMuMzE4QzI2LjAwMTEgMTMuMTE4MSAyNS4yMTU2IDEyLjMzMjUgMjUuMDE1NyAxMS4zMjc2TDIzLjQ0NjQgMTEuNjM5N1pNMTEuNjY3IDIyLjQ2NjdIMjUuMDAwM1YyMC44NjY3SDExLjY2N1YyMi40NjY3Wk0xMS42NjcgMjcuNDY2N0gyMC4wMDAzVjI1Ljg2NjdIMTEuNjY3VjI3LjQ2NjdaTTMyLjI0NzYgMTAuMDc0MUwyOS4yNTM5IDYuNzA2MDhMMjguMDU4IDcuNzY5MDdMMzEuMDUxOCAxMS4xMzcxTDMyLjI0NzYgMTAuMDc0MVpcIiBmaWxsPVwiI0RCMjc3N1wiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2c+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc3ZnPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJncmlkIGdhcC0yXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzcz1cInRleHQtY2VudGVyIHRleHQtd2hpdGUtOTAwIHRleHQtc20gZm9udC1tZWRpdW0gbGVhZGluZy1zbnVnXCI+XHU1QzA2XHU5MTREXHU3RjZFXHU2NTg3XHU0RUY2XHU2MkQ2XHU1MjMwXHU2QjY0XHU1OTA0XHVGRjBDXHU2MjE2XHU2MjRCXHU1MkE4XHU5MDA5XHU2MkU5XHU2NTg3XHU0RUY2PC9oND5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgZ2FwLTJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJmaWxlXCIgaWQ9XCJDaG9vc2VGaWxlXCIgaGlkZGVuIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleCB3LTI4IGgtOSBweC0yIGZsZXgtY29sIGJnLXBpbmstNjAwIHJvdW5kZWQtZnVsbCBzaGFkb3cgdGV4dC13aGl0ZSB0ZXh0LXhzIGZvbnQtc2VtaWJvbGQgbGVhZGluZy00IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBjdXJzb3ItcG9pbnRlciBmb2N1czpvdXRsaW5lLW5vbmVcIj5cdTkwMDlcdTYyRTlcdTY1ODdcdTRFRjY8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPVwiaW1wb3J0Q29uZmlnRnJvbVVybCgpXCIgY2xhc3M9XCJmbGV4IHctMjggaC05IHB4LTIgZmxleC1jb2wgYmctYmx1ZS02MDAgcm91bmRlZC1mdWxsIHNoYWRvdyB0ZXh0LXdoaXRlIHRleHQteHMgZm9udC1zZW1pYm9sZCBsZWFkaW5nLTQgaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGN1cnNvci1wb2ludGVyIGZvY3VzOm91dGxpbmUtbm9uZVwiPlx1NEVDRVVSTFx1NUJGQ1x1NTE2NTwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PmA7XHJcblxyXG4gICAgLy8gXHU2REZCXHU1MkEwXHU2QTIxXHU2MDAxXHU2ODQ2XHU1MjMwXHU5ODc1XHU5NzYyXHJcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG1vZGFsKTtcclxuXHJcbiAgICAvLyBcdTZERkJcdTUyQTBcdTRFOEJcdTRFRjZcdTc2RDFcdTU0MkNcdTU2NjggLSBcdTUxNzNcdTk1RURcdTYzMDlcdTk0QUVcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjbG9zZUJveE1vZGFsJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChtb2RhbCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBcdTZERkJcdTUyQTBcdTRFOEJcdTRFRjZcdTc2RDFcdTU0MkNcdTU2NjggLSBcdTcwQjlcdTUxRkJcdTZBMjFcdTYwMDFcdTY4NDZcdTU5MTZcdTkwRThcdTUxNzNcdTk1RURcclxuICAgIG1vZGFsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBpZiAoZS50YXJnZXQgPT09IG1vZGFsKSB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobW9kYWwpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIC8vIFx1NkRGQlx1NTJBMFx1NEU4Qlx1NEVGNlx1NzZEMVx1NTQyQ1x1NTY2OCAtIFx1NjJENlx1NjJGRFx1NjU4N1x1NEVGNlxyXG4gICAgY29uc3QgZHJvcFpvbmUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZHJvcFpvbmUnKTtcclxuICAgIGNvbnN0IGZpbGVJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdDaG9vc2VGaWxlJyk7XHJcblxyXG4gICAgZHJvcFpvbmUuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ292ZXInLCAoZSkgPT4ge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBkcm9wWm9uZS5jbGFzc0xpc3QuYWRkKCdib3JkZXItYmx1ZS01MDAnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRyb3Bab25lLmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdsZWF2ZScsICgpID0+IHtcclxuICAgICAgICBkcm9wWm9uZS5jbGFzc0xpc3QucmVtb3ZlKCdib3JkZXItYmx1ZS01MDAnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRyb3Bab25lLmFkZEV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCAoZSkgPT4ge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBmdW4oZS5kYXRhVHJhbnNmZXIuZmlsZXNbMF0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZmlsZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChlKSA9PiB7XHJcbiAgICAgICAgZnVuKGZpbGVJbnB1dC5maWxlc1swXSk7XHJcbiAgICB9KTtcclxufVxyXG4iLCAiLy8gXHU2NTM5XHU4RkRCXHU3Njg0QVBJXHU4QkY3XHU2QzQyXHU1OTA0XHU3NDA2XHU1MUZEXHU2NTcwXHJcbmFzeW5jIGZ1bmN0aW9uIGhhbmRsZUFwaVJlcXVlc3QodXJsKSB7XHJcbiAgICBjb25zdCBjdXN0b21BcGkgPSB1cmwuc2VhcmNoUGFyYW1zLmdldCgnY3VzdG9tQXBpJykgfHwgJyc7XHJcbiAgICBjb25zdCBjdXN0b21EZXRhaWwgPSB1cmwuc2VhcmNoUGFyYW1zLmdldCgnY3VzdG9tRGV0YWlsJykgfHwgJyc7XHJcbiAgICBjb25zdCBzb3VyY2UgPSB1cmwuc2VhcmNoUGFyYW1zLmdldCgnc291cmNlJykgfHwgJ2hlaW11ZXInO1xyXG4gICAgXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGlmICh1cmwucGF0aG5hbWUgPT09ICcvYXBpL3NlYXJjaCcpIHtcclxuICAgICAgICAgICAgY29uc3Qgc2VhcmNoUXVlcnkgPSB1cmwuc2VhcmNoUGFyYW1zLmdldCgnd2QnKTtcclxuICAgICAgICAgICAgaWYgKCFzZWFyY2hRdWVyeSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdcdTdGM0FcdTVDMTFcdTY0MUNcdTdEMjJcdTUzQzJcdTY1NzAnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU5QThDXHU4QkMxQVBJXHU1NDhDc291cmNlXHU3Njg0XHU2NzA5XHU2NTQ4XHU2MDI3XHJcbiAgICAgICAgICAgIGlmIChzb3VyY2UgPT09ICdjdXN0b20nICYmICFjdXN0b21BcGkpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignXHU0RjdGXHU3NTI4XHU4MUVBXHU1QjlBXHU0RTQ5QVBJXHU2NUY2XHU1RkM1XHU5ODdCXHU2M0QwXHU0RjlCQVBJXHU1NzMwXHU1NzQwJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmICghQVBJX1NJVEVTW3NvdXJjZV0gJiYgc291cmNlICE9PSAnY3VzdG9tJykge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdcdTY1RTBcdTY1NDhcdTc2ODRBUElcdTY3NjVcdTZFOTAnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgYXBpVXJsID0gY3VzdG9tQXBpXHJcbiAgICAgICAgICAgICAgICA/IGAke2N1c3RvbUFwaX0ke0FQSV9DT05GSUcuc2VhcmNoLnBhdGh9JHtlbmNvZGVVUklDb21wb25lbnQoc2VhcmNoUXVlcnkpfWBcclxuICAgICAgICAgICAgICAgIDogYCR7QVBJX1NJVEVTW3NvdXJjZV0uYXBpfSR7QVBJX0NPTkZJRy5zZWFyY2gucGF0aH0ke2VuY29kZVVSSUNvbXBvbmVudChzZWFyY2hRdWVyeSl9YDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1OEQ4NVx1NjVGNlx1NTkwNFx1NzQwNlxyXG4gICAgICAgICAgICBjb25zdCBjb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xyXG4gICAgICAgICAgICBjb25zdCB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KCgpID0+IGNvbnRyb2xsZXIuYWJvcnQoKSwgMTAwMDApO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1OTI3NFx1Njc0M1x1NTNDMlx1NjU3MFx1NTIzMFx1NEVFM1x1NzQwNlVSTFxyXG4gICAgICAgICAgICAgICAgY29uc3QgcHJveGllZFVybCA9IGF3YWl0IHdpbmRvdy5Qcm94eUF1dGg/LmFkZEF1dGhUb1Byb3h5VXJsID8gXHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgd2luZG93LlByb3h5QXV0aC5hZGRBdXRoVG9Qcm94eVVybChQUk9YWV9VUkwgKyBlbmNvZGVVUklDb21wb25lbnQoYXBpVXJsKSkgOlxyXG4gICAgICAgICAgICAgICAgICAgIFBST1hZX1VSTCArIGVuY29kZVVSSUNvbXBvbmVudChhcGlVcmwpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChwcm94aWVkVXJsLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogQVBJX0NPTkZJRy5zZWFyY2guaGVhZGVycyxcclxuICAgICAgICAgICAgICAgICAgICBzaWduYWw6IGNvbnRyb2xsZXIuc2lnbmFsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEFQSVx1OEJGN1x1NkM0Mlx1NTkzMVx1OEQyNTogJHtyZXNwb25zZS5zdGF0dXN9YCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1NjhDMFx1NjdFNUpTT05cdTY4M0NcdTVGMEZcdTc2ODRcdTY3MDlcdTY1NDhcdTYwMjdcclxuICAgICAgICAgICAgICAgIGlmICghZGF0YSB8fCAhQXJyYXkuaXNBcnJheShkYXRhLmxpc3QpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBUElcdThGRDRcdTU2REVcdTc2ODRcdTY1NzBcdTYzNkVcdTY4M0NcdTVGMEZcdTY1RTBcdTY1NDgnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU2RTkwXHU0RkUxXHU2MDZGXHU1MjMwXHU2QkNGXHU0RTJBXHU3RUQzXHU2NzlDXHJcbiAgICAgICAgICAgICAgICBkYXRhLmxpc3QuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtLnNvdXJjZV9uYW1lID0gc291cmNlID09PSAnY3VzdG9tJyA/ICdcdTgxRUFcdTVCOUFcdTRFNDlcdTZFOTAnIDogQVBJX1NJVEVTW3NvdXJjZV0ubmFtZTtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtLnNvdXJjZV9jb2RlID0gc291cmNlO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1NUJGOVx1NEU4RVx1ODFFQVx1NUI5QVx1NEU0OVx1NkU5MFx1RkYwQ1x1NkRGQlx1NTJBMEFQSSBVUkxcdTRGRTFcdTYwNkZcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc291cmNlID09PSAnY3VzdG9tJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtLmFwaV91cmwgPSBjdXN0b21BcGk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgICAgICAgICAgY29kZTogMjAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGxpc3Q6IGRhdGEubGlzdCB8fCBbXSxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChmZXRjaEVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTtcclxuICAgICAgICAgICAgICAgIHRocm93IGZldGNoRXJyb3I7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFx1OEJFNlx1NjBDNVx1NTkwNFx1NzQwNlxyXG4gICAgICAgIGlmICh1cmwucGF0aG5hbWUgPT09ICcvYXBpL2RldGFpbCcpIHtcclxuICAgICAgICAgICAgY29uc3QgaWQgPSB1cmwuc2VhcmNoUGFyYW1zLmdldCgnaWQnKTtcclxuICAgICAgICAgICAgY29uc3Qgc291cmNlQ29kZSA9IHVybC5zZWFyY2hQYXJhbXMuZ2V0KCdzb3VyY2UnKSB8fCAnaGVpbXVlcic7IC8vIFx1ODNCN1x1NTNENlx1NkU5MFx1NEVFM1x1NzgwMVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKCFpZCkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdcdTdGM0FcdTVDMTFcdTg5QzZcdTk4OTFJRFx1NTNDMlx1NjU3MCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTlBOENcdThCQzFJRFx1NjgzQ1x1NUYwRiAtIFx1NTNFQVx1NTE0MVx1OEJCOFx1NjU3MFx1NUI1N1x1NTQ4Q1x1NjcwOVx1OTY1MFx1NzY4NFx1NzI3OVx1NkI4QVx1NUI1N1x1N0IyNlxyXG4gICAgICAgICAgICBpZiAoIS9eW1xcdy1dKyQvLnRlc3QoaWQpKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1x1NjVFMFx1NjU0OFx1NzY4NFx1ODlDNlx1OTg5MUlEXHU2ODNDXHU1RjBGJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFx1OUE4Q1x1OEJDMUFQSVx1NTQ4Q3NvdXJjZVx1NzY4NFx1NjcwOVx1NjU0OFx1NjAyN1xyXG4gICAgICAgICAgICBpZiAoc291cmNlQ29kZSA9PT0gJ2N1c3RvbScgJiYgIWN1c3RvbUFwaSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdcdTRGN0ZcdTc1MjhcdTgxRUFcdTVCOUFcdTRFNDlBUElcdTY1RjZcdTVGQzVcdTk4N0JcdTYzRDBcdTRGOUJBUElcdTU3MzBcdTU3NDAnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKCFBUElfU0lURVNbc291cmNlQ29kZV0gJiYgc291cmNlQ29kZSAhPT0gJ2N1c3RvbScpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignXHU2NUUwXHU2NTQ4XHU3Njg0QVBJXHU2NzY1XHU2RTkwJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFx1NUJGOVx1NEU4RVx1NjcwOWRldGFpbFx1NTNDMlx1NjU3MFx1NzY4NFx1NkU5MFx1RkYwQ1x1OTBGRFx1NEY3Rlx1NzUyOFx1NzI3OVx1NkI4QVx1NTkwNFx1NzQwNlx1NjVCOVx1NUYwRlxyXG4gICAgICAgICAgICBpZiAoc291cmNlQ29kZSAhPT0gJ2N1c3RvbScgJiYgQVBJX1NJVEVTW3NvdXJjZUNvZGVdLmRldGFpbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IGhhbmRsZVNwZWNpYWxTb3VyY2VEZXRhaWwoaWQsIHNvdXJjZUNvZGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTY2MkZcdTgxRUFcdTVCOUFcdTRFNDlBUElcdUZGMENcdTVFNzZcdTRFMTRcdTRGMjBcdTkwMTJcdTRFODZkZXRhaWxcdTUzQzJcdTY1NzBcdUZGMENcdTVDMURcdThCRDVcdTcyNzlcdTZCOEFcdTU5MDRcdTc0MDZcclxuICAgICAgICAgICAgLy8gXHU0RjE4XHU1MTQ4IGN1c3RvbURldGFpbFxyXG4gICAgICAgICAgICBpZiAoc291cmNlQ29kZSA9PT0gJ2N1c3RvbScgJiYgY3VzdG9tRGV0YWlsKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgaGFuZGxlQ3VzdG9tQXBpU3BlY2lhbERldGFpbChpZCwgY3VzdG9tRGV0YWlsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoc291cmNlQ29kZSA9PT0gJ2N1c3RvbScgJiYgdXJsLnNlYXJjaFBhcmFtcy5nZXQoJ3VzZURldGFpbCcpID09PSAndHJ1ZScpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCBoYW5kbGVDdXN0b21BcGlTcGVjaWFsRGV0YWlsKGlkLCBjdXN0b21BcGkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBkZXRhaWxVcmwgPSBjdXN0b21BcGlcclxuICAgICAgICAgICAgICAgID8gYCR7Y3VzdG9tQXBpfSR7QVBJX0NPTkZJRy5kZXRhaWwucGF0aH0ke2lkfWBcclxuICAgICAgICAgICAgICAgIDogYCR7QVBJX1NJVEVTW3NvdXJjZUNvZGVdLmFwaX0ke0FQSV9DT05GSUcuZGV0YWlsLnBhdGh9JHtpZH1gO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU4RDg1XHU2NUY2XHU1OTA0XHU3NDA2XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCkgPT4gY29udHJvbGxlci5hYm9ydCgpLCAxMDAwMCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU5Mjc0XHU2NzQzXHU1M0MyXHU2NTcwXHU1MjMwXHU0RUUzXHU3NDA2VVJMXHJcbiAgICAgICAgICAgICAgICBjb25zdCBwcm94aWVkVXJsID0gYXdhaXQgd2luZG93LlByb3h5QXV0aD8uYWRkQXV0aFRvUHJveHlVcmwgPyBcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB3aW5kb3cuUHJveHlBdXRoLmFkZEF1dGhUb1Byb3h5VXJsKFBST1hZX1VSTCArIGVuY29kZVVSSUNvbXBvbmVudChkZXRhaWxVcmwpKSA6XHJcbiAgICAgICAgICAgICAgICAgICAgUFJPWFlfVVJMICsgZW5jb2RlVVJJQ29tcG9uZW50KGRldGFpbFVybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHByb3hpZWRVcmwsIHtcclxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiBBUElfQ09ORklHLmRldGFpbC5oZWFkZXJzLFxyXG4gICAgICAgICAgICAgICAgICAgIHNpZ25hbDogY29udHJvbGxlci5zaWduYWxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgXHU4QkU2XHU2MEM1XHU4QkY3XHU2QzQyXHU1OTMxXHU4RDI1OiAke3Jlc3BvbnNlLnN0YXR1c31gKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHU4OUUzXHU2NzkwSlNPTlxyXG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU4RkQ0XHU1NkRFXHU3Njg0XHU2NTcwXHU2MzZFXHU2NjJGXHU1NDI2XHU2NzA5XHU2NTQ4XHJcbiAgICAgICAgICAgICAgICBpZiAoIWRhdGEgfHwgIWRhdGEubGlzdCB8fCAhQXJyYXkuaXNBcnJheShkYXRhLmxpc3QpIHx8IGRhdGEubGlzdC5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1x1ODNCN1x1NTNENlx1NTIzMFx1NzY4NFx1OEJFNlx1NjBDNVx1NTE4NVx1NUJCOVx1NjVFMFx1NjU0OCcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBcdTgzQjdcdTUzRDZcdTdCMkNcdTRFMDBcdTRFMkFcdTUzMzlcdTkxNERcdTc2ODRcdTg5QzZcdTk4OTFcdThCRTZcdTYwQzVcclxuICAgICAgICAgICAgICAgIGNvbnN0IHZpZGVvRGV0YWlsID0gZGF0YS5saXN0WzBdO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBcdTYzRDBcdTUzRDZcdTY0QURcdTY1M0VcdTU3MzBcdTU3NDBcclxuICAgICAgICAgICAgICAgIGxldCBlcGlzb2RlcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBpZiAodmlkZW9EZXRhaWwudm9kX3BsYXlfdXJsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU1MjA2XHU1MjcyXHU0RTBEXHU1NDBDXHU2NEFEXHU2NTNFXHU2RTkwXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGxheVNvdXJjZXMgPSB2aWRlb0RldGFpbC52b2RfcGxheV91cmwuc3BsaXQoJyQkJCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1NjNEMFx1NTNENlx1N0IyQ1x1NEUwMFx1NEUyQVx1NjRBRFx1NjUzRVx1NkU5MFx1NzY4NFx1OTZDNlx1NjU3MFx1RkYwOFx1OTAxQVx1NUUzOFx1NEUzQVx1NEUzQlx1ODk4MVx1NkU5MFx1RkYwOVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwbGF5U291cmNlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1haW5Tb3VyY2UgPSBwbGF5U291cmNlc1swXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXBpc29kZUxpc3QgPSBtYWluU291cmNlLnNwbGl0KCcjJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTRFQ0VcdTZCQ0ZcdTRFMkFcdTk2QzZcdTY1NzBcdTRFMkRcdTYzRDBcdTUzRDZVUkxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXBpc29kZXMgPSBlcGlzb2RlTGlzdC5tYXAoZXAgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFydHMgPSBlcC5zcGxpdCgnJCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU4RkQ0XHU1NkRFVVJMXHU5MEU4XHU1MjA2KFx1OTAxQVx1NUUzOFx1NjYyRlx1N0IyQ1x1NEU4Q1x1OTBFOFx1NTIwNlx1RkYwQ1x1NTk4Mlx1Njc5Q1x1NjcwOVx1NzY4NFx1OEJERClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJ0cy5sZW5ndGggPiAxID8gcGFydHNbMV0gOiAnJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSkuZmlsdGVyKHVybCA9PiB1cmwgJiYgKHVybC5zdGFydHNXaXRoKCdodHRwOi8vJykgfHwgdXJsLnN0YXJ0c1dpdGgoJ2h0dHBzOi8vJykpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NkNBMVx1NjcwOVx1NjI3RVx1NTIzMFx1NjRBRFx1NjUzRVx1NTczMFx1NTc0MFx1RkYwQ1x1NUMxRFx1OEJENVx1NEY3Rlx1NzUyOFx1NkI2M1x1NTIxOVx1ODg2OFx1OEZCRVx1NUYwRlx1NjdFNVx1NjI3RW0zdThcdTk0RkVcdTYzQTVcclxuICAgICAgICAgICAgICAgIGlmIChlcGlzb2Rlcy5sZW5ndGggPT09IDAgJiYgdmlkZW9EZXRhaWwudm9kX2NvbnRlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXRjaGVzID0gdmlkZW9EZXRhaWwudm9kX2NvbnRlbnQubWF0Y2goTTNVOF9QQVRURVJOKSB8fCBbXTtcclxuICAgICAgICAgICAgICAgICAgICBlcGlzb2RlcyA9IG1hdGNoZXMubWFwKGxpbmsgPT4gbGluay5yZXBsYWNlKC9eXFwkLywgJycpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgICAgICAgICAgICBjb2RlOiAyMDAsXHJcbiAgICAgICAgICAgICAgICAgICAgZXBpc29kZXM6IGVwaXNvZGVzLFxyXG4gICAgICAgICAgICAgICAgICAgIGRldGFpbFVybDogZGV0YWlsVXJsLFxyXG4gICAgICAgICAgICAgICAgICAgIHZpZGVvSW5mbzoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogdmlkZW9EZXRhaWwudm9kX25hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdmVyOiB2aWRlb0RldGFpbC52b2RfcGljLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNjOiB2aWRlb0RldGFpbC52b2RfY29udGVudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogdmlkZW9EZXRhaWwudHlwZV9uYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB5ZWFyOiB2aWRlb0RldGFpbC52b2RfeWVhcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXJlYTogdmlkZW9EZXRhaWwudm9kX2FyZWEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpcmVjdG9yOiB2aWRlb0RldGFpbC52b2RfZGlyZWN0b3IsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdG9yOiB2aWRlb0RldGFpbC52b2RfYWN0b3IsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbWFya3M6IHZpZGVvRGV0YWlsLnZvZF9yZW1hcmtzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTZFOTBcdTRGRTFcdTYwNkZcclxuICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlX25hbWU6IHNvdXJjZUNvZGUgPT09ICdjdXN0b20nID8gJ1x1ODFFQVx1NUI5QVx1NEU0OVx1NkU5MCcgOiBBUElfU0lURVNbc291cmNlQ29kZV0ubmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlX2NvZGU6IHNvdXJjZUNvZGVcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZmV0Y2hFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBmZXRjaEVycm9yO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1x1NjcyQVx1NzdFNVx1NzY4NEFQSVx1OERFRlx1NUY4NCcpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdBUElcdTU5MDRcdTc0MDZcdTk1MTlcdThCRUY6JywgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgIGNvZGU6IDQwMCxcclxuICAgICAgICAgICAgbXNnOiBlcnJvci5tZXNzYWdlIHx8ICdcdThCRjdcdTZDNDJcdTU5MDRcdTc0MDZcdTU5MzFcdThEMjUnLFxyXG4gICAgICAgICAgICBsaXN0OiBbXSxcclxuICAgICAgICAgICAgZXBpc29kZXM6IFtdLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyBcdTU5MDRcdTc0MDZcdTgxRUFcdTVCOUFcdTRFNDlBUElcdTc2ODRcdTcyNzlcdTZCOEFcdThCRTZcdTYwQzVcdTk4NzVcclxuYXN5bmMgZnVuY3Rpb24gaGFuZGxlQ3VzdG9tQXBpU3BlY2lhbERldGFpbChpZCwgY3VzdG9tQXBpKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIC8vIFx1Njc4NFx1NUVGQVx1OEJFNlx1NjBDNVx1OTg3NVVSTFxyXG4gICAgICAgIGNvbnN0IGRldGFpbFVybCA9IGAke2N1c3RvbUFwaX0vaW5kZXgucGhwL3ZvZC9kZXRhaWwvaWQvJHtpZH0uaHRtbGA7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU4RDg1XHU2NUY2XHU1OTA0XHU3NDA2XHJcbiAgICAgICAgY29uc3QgY29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcclxuICAgICAgICBjb25zdCB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KCgpID0+IGNvbnRyb2xsZXIuYWJvcnQoKSwgMTAwMDApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1OTI3NFx1Njc0M1x1NTNDMlx1NjU3MFx1NTIzMFx1NEVFM1x1NzQwNlVSTFxyXG4gICAgICAgIGNvbnN0IHByb3hpZWRVcmwgPSBhd2FpdCB3aW5kb3cuUHJveHlBdXRoPy5hZGRBdXRoVG9Qcm94eVVybCA/IFxyXG4gICAgICAgICAgICBhd2FpdCB3aW5kb3cuUHJveHlBdXRoLmFkZEF1dGhUb1Byb3h5VXJsKFBST1hZX1VSTCArIGVuY29kZVVSSUNvbXBvbmVudChkZXRhaWxVcmwpKSA6XHJcbiAgICAgICAgICAgIFBST1hZX1VSTCArIGVuY29kZVVSSUNvbXBvbmVudChkZXRhaWxVcmwpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAvLyBcdTgzQjdcdTUzRDZcdThCRTZcdTYwQzVcdTk4NzVIVE1MXHJcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChwcm94aWVkVXJsLCB7XHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgICdVc2VyLUFnZW50JzogJ01vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdpbjY0OyB4NjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS8xMjIuMC4wLjAgU2FmYXJpLzUzNy4zNicsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHNpZ25hbDogY29udHJvbGxlci5zaWduYWxcclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgXHU4MUVBXHU1QjlBXHU0RTQ5QVBJXHU4QkU2XHU2MEM1XHU5ODc1XHU4QkY3XHU2QzQyXHU1OTMxXHU4RDI1OiAke3Jlc3BvbnNlLnN0YXR1c31gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU4M0I3XHU1M0Q2SFRNTFx1NTE4NVx1NUJCOVxyXG4gICAgICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU0RjdGXHU3NTI4XHU5MDFBXHU3NTI4XHU2QTIxXHU1RjBGXHU2M0QwXHU1M0Q2bTN1OFx1OTRGRVx1NjNBNVxyXG4gICAgICAgIGNvbnN0IGdlbmVyYWxQYXR0ZXJuID0gL1xcJChodHRwcz86XFwvXFwvW15cIidcXHNdKz9cXC5tM3U4KS9nO1xyXG4gICAgICAgIGxldCBtYXRjaGVzID0gaHRtbC5tYXRjaChnZW5lcmFsUGF0dGVybikgfHwgW107XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU1OTA0XHU3NDA2XHU5NEZFXHU2M0E1XHJcbiAgICAgICAgbWF0Y2hlcyA9IG1hdGNoZXMubWFwKGxpbmsgPT4ge1xyXG4gICAgICAgICAgICBsaW5rID0gbGluay5zdWJzdHJpbmcoMSwgbGluay5sZW5ndGgpO1xyXG4gICAgICAgICAgICBjb25zdCBwYXJlbkluZGV4ID0gbGluay5pbmRleE9mKCcoJyk7XHJcbiAgICAgICAgICAgIHJldHVybiBwYXJlbkluZGV4ID4gMCA/IGxpbmsuc3Vic3RyaW5nKDAsIHBhcmVuSW5kZXgpIDogbGluaztcclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTYzRDBcdTUzRDZcdTU3RkFcdTY3MkNcdTRGRTFcdTYwNkZcclxuICAgICAgICBjb25zdCB0aXRsZU1hdGNoID0gaHRtbC5tYXRjaCgvPGgxW14+XSo+KFtePF0rKTxcXC9oMT4vKTtcclxuICAgICAgICBjb25zdCB0aXRsZVRleHQgPSB0aXRsZU1hdGNoID8gdGl0bGVNYXRjaFsxXS50cmltKCkgOiAnJztcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBkZXNjTWF0Y2ggPSBodG1sLm1hdGNoKC88ZGl2W14+XSpjbGFzcz1bXCInXXNrZXRjaFtcIiddW14+XSo+KFtcXHNcXFNdKj8pPFxcL2Rpdj4vKTtcclxuICAgICAgICBjb25zdCBkZXNjVGV4dCA9IGRlc2NNYXRjaCA/IGRlc2NNYXRjaFsxXS5yZXBsYWNlKC88W14+XSs+L2csICcgJykudHJpbSgpIDogJyc7XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgICAgY29kZTogMjAwLFxyXG4gICAgICAgICAgICBlcGlzb2RlczogbWF0Y2hlcyxcclxuICAgICAgICAgICAgZGV0YWlsVXJsOiBkZXRhaWxVcmwsXHJcbiAgICAgICAgICAgIHZpZGVvSW5mbzoge1xyXG4gICAgICAgICAgICAgICAgdGl0bGU6IHRpdGxlVGV4dCxcclxuICAgICAgICAgICAgICAgIGRlc2M6IGRlc2NUZXh0LFxyXG4gICAgICAgICAgICAgICAgc291cmNlX25hbWU6ICdcdTgxRUFcdTVCOUFcdTRFNDlcdTZFOTAnLFxyXG4gICAgICAgICAgICAgICAgc291cmNlX2NvZGU6ICdjdXN0b20nXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihgXHU4MUVBXHU1QjlBXHU0RTQ5QVBJXHU4QkU2XHU2MEM1XHU4M0I3XHU1M0Q2XHU1OTMxXHU4RDI1OmAsIGVycm9yKTtcclxuICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH1cclxufVxyXG5cclxuLy8gXHU5MDFBXHU3NTI4XHU3Mjc5XHU2QjhBXHU2RTkwXHU4QkU2XHU2MEM1XHU1OTA0XHU3NDA2XHU1MUZEXHU2NTcwXHJcbmFzeW5jIGZ1bmN0aW9uIGhhbmRsZVNwZWNpYWxTb3VyY2VEZXRhaWwoaWQsIHNvdXJjZUNvZGUpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgLy8gXHU2Nzg0XHU1RUZBXHU4QkU2XHU2MEM1XHU5ODc1VVJMXHVGRjA4XHU0RjdGXHU3NTI4XHU5MTREXHU3RjZFXHU0RTJEXHU3Njg0ZGV0YWlsIFVSTFx1ODAwQ1x1NEUwRFx1NjYyRmFwaSBVUkxcdUZGMDlcclxuICAgICAgICBjb25zdCBkZXRhaWxVcmwgPSBgJHtBUElfU0lURVNbc291cmNlQ29kZV0uZGV0YWlsfS9pbmRleC5waHAvdm9kL2RldGFpbC9pZC8ke2lkfS5odG1sYDtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTZERkJcdTUyQTBcdThEODVcdTY1RjZcdTU5MDRcdTc0MDZcclxuICAgICAgICBjb25zdCBjb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xyXG4gICAgICAgIGNvbnN0IHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCkgPT4gY29udHJvbGxlci5hYm9ydCgpLCAxMDAwMCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU5Mjc0XHU2NzQzXHU1M0MyXHU2NTcwXHU1MjMwXHU0RUUzXHU3NDA2VVJMXHJcbiAgICAgICAgY29uc3QgcHJveGllZFVybCA9IGF3YWl0IHdpbmRvdy5Qcm94eUF1dGg/LmFkZEF1dGhUb1Byb3h5VXJsID8gXHJcbiAgICAgICAgICAgIGF3YWl0IHdpbmRvdy5Qcm94eUF1dGguYWRkQXV0aFRvUHJveHlVcmwoUFJPWFlfVVJMICsgZW5jb2RlVVJJQ29tcG9uZW50KGRldGFpbFVybCkpIDpcclxuICAgICAgICAgICAgUFJPWFlfVVJMICsgZW5jb2RlVVJJQ29tcG9uZW50KGRldGFpbFVybCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIC8vIFx1ODNCN1x1NTNENlx1OEJFNlx1NjBDNVx1OTg3NUhUTUxcclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHByb3hpZWRVcmwsIHtcclxuICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgJ1VzZXItQWdlbnQnOiAnTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzEyMi4wLjAuMCBTYWZhcmkvNTM3LjM2JyxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc2lnbmFsOiBjb250cm9sbGVyLnNpZ25hbFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBcdThCRTZcdTYwQzVcdTk4NzVcdThCRjdcdTZDNDJcdTU5MzFcdThEMjU6ICR7cmVzcG9uc2Uuc3RhdHVzfWApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTgzQjdcdTUzRDZIVE1MXHU1MTg1XHU1QkI5XHJcbiAgICAgICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTY4MzlcdTYzNkVcdTRFMERcdTU0MENcdTZFOTBcdTdDN0JcdTU3OEJcdTRGN0ZcdTc1MjhcdTRFMERcdTU0MENcdTc2ODRcdTZCNjNcdTUyMTlcdTg4NjhcdThGQkVcdTVGMEZcclxuICAgICAgICBsZXQgbWF0Y2hlcyA9IFtdO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChzb3VyY2VDb2RlID09PSAnZmZ6eScpIHtcclxuICAgICAgICAgICAgLy8gXHU5NzVFXHU1MUUxXHU1RjcxXHU4OUM2XHU0RjdGXHU3NTI4XHU3Mjc5XHU1QjlBXHU3Njg0XHU2QjYzXHU1MjE5XHU4ODY4XHU4RkJFXHU1RjBGXHJcbiAgICAgICAgICAgIGNvbnN0IGZmenlQYXR0ZXJuID0gL1xcJChodHRwcz86XFwvXFwvW15cIidcXHNdKz9cXC9cXGR7OH1cXC9cXGQrX1thLWYwLTldK1xcL2luZGV4XFwubTN1OCkvZztcclxuICAgICAgICAgICAgbWF0Y2hlcyA9IGh0bWwubWF0Y2goZmZ6eVBhdHRlcm4pIHx8IFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTZDQTFcdTY3MDlcdTYyN0VcdTUyMzBcdTk0RkVcdTYzQTVcdTYyMTZcdTgwMDVcdTY2MkZcdTUxNzZcdTRFRDZcdTZFOTBcdTdDN0JcdTU3OEJcdUZGMENcdTVDMURcdThCRDVcdTRFMDBcdTRFMkFcdTY2RjRcdTkwMUFcdTc1MjhcdTc2ODRcdTZBMjFcdTVGMEZcclxuICAgICAgICBpZiAobWF0Y2hlcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgY29uc3QgZ2VuZXJhbFBhdHRlcm4gPSAvXFwkKGh0dHBzPzpcXC9cXC9bXlwiJ1xcc10rP1xcLm0zdTgpL2c7XHJcbiAgICAgICAgICAgIG1hdGNoZXMgPSBodG1sLm1hdGNoKGdlbmVyYWxQYXR0ZXJuKSB8fCBbXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gXHU1M0JCXHU5MUNEXHU1OTA0XHU3NDA2XHVGRjBDXHU5MDdGXHU1MTREXHU0RTAwXHU0RTJBXHU2NEFEXHU2NTNFXHU2RTkwXHU1OTFBXHU5NkM2XHU2NjNFXHU3OTNBXHJcbiAgICAgICAgbWF0Y2hlcyA9IFsuLi5uZXcgU2V0KG1hdGNoZXMpXTtcclxuICAgICAgICAvLyBcdTU5MDRcdTc0MDZcdTk0RkVcdTYzQTVcclxuICAgICAgICBtYXRjaGVzID0gbWF0Y2hlcy5tYXAobGluayA9PiB7XHJcbiAgICAgICAgICAgIGxpbmsgPSBsaW5rLnN1YnN0cmluZygxLCBsaW5rLmxlbmd0aCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHBhcmVuSW5kZXggPSBsaW5rLmluZGV4T2YoJygnKTtcclxuICAgICAgICAgICAgcmV0dXJuIHBhcmVuSW5kZXggPiAwID8gbGluay5zdWJzdHJpbmcoMCwgcGFyZW5JbmRleCkgOiBsaW5rO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NjNEMFx1NTNENlx1NTNFRlx1ODBGRFx1NUI1OFx1NTcyOFx1NzY4NFx1NjgwN1x1OTg5OFx1MzAwMVx1N0I4MFx1NEVDQlx1N0I0OVx1NTdGQVx1NjcyQ1x1NEZFMVx1NjA2RlxyXG4gICAgICAgIGNvbnN0IHRpdGxlTWF0Y2ggPSBodG1sLm1hdGNoKC88aDFbXj5dKj4oW148XSspPFxcL2gxPi8pO1xyXG4gICAgICAgIGNvbnN0IHRpdGxlVGV4dCA9IHRpdGxlTWF0Y2ggPyB0aXRsZU1hdGNoWzFdLnRyaW0oKSA6ICcnO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGRlc2NNYXRjaCA9IGh0bWwubWF0Y2goLzxkaXZbXj5dKmNsYXNzPVtcIiddc2tldGNoW1wiJ11bXj5dKj4oW1xcc1xcU10qPyk8XFwvZGl2Pi8pO1xyXG4gICAgICAgIGNvbnN0IGRlc2NUZXh0ID0gZGVzY01hdGNoID8gZGVzY01hdGNoWzFdLnJlcGxhY2UoLzxbXj5dKz4vZywgJyAnKS50cmltKCkgOiAnJztcclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgICBjb2RlOiAyMDAsXHJcbiAgICAgICAgICAgIGVwaXNvZGVzOiBtYXRjaGVzLFxyXG4gICAgICAgICAgICBkZXRhaWxVcmw6IGRldGFpbFVybCxcclxuICAgICAgICAgICAgdmlkZW9JbmZvOiB7XHJcbiAgICAgICAgICAgICAgICB0aXRsZTogdGl0bGVUZXh0LFxyXG4gICAgICAgICAgICAgICAgZGVzYzogZGVzY1RleHQsXHJcbiAgICAgICAgICAgICAgICBzb3VyY2VfbmFtZTogQVBJX1NJVEVTW3NvdXJjZUNvZGVdLm5hbWUsXHJcbiAgICAgICAgICAgICAgICBzb3VyY2VfY29kZTogc291cmNlQ29kZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYCR7QVBJX1NJVEVTW3NvdXJjZUNvZGVdLm5hbWV9XHU4QkU2XHU2MEM1XHU4M0I3XHU1M0Q2XHU1OTMxXHU4RDI1OmAsIGVycm9yKTtcclxuICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH1cclxufVxyXG5cclxuLy8gXHU1OTA0XHU3NDA2XHU4MDVBXHU1NDA4XHU2NDFDXHU3RDIyXHJcbmFzeW5jIGZ1bmN0aW9uIGhhbmRsZUFnZ3JlZ2F0ZWRTZWFyY2goc2VhcmNoUXVlcnkpIHtcclxuICAgIC8vIFx1ODNCN1x1NTNENlx1NTNFRlx1NzUyOFx1NzY4NEFQSVx1NkU5MFx1NTIxN1x1ODg2OFx1RkYwOFx1NjM5Mlx1OTY2NGFnZ3JlZ2F0ZWRcdTU0OENjdXN0b21cdUZGMDlcclxuICAgIGNvbnN0IGF2YWlsYWJsZVNvdXJjZXMgPSBPYmplY3Qua2V5cyhBUElfU0lURVMpLmZpbHRlcihrZXkgPT4gXHJcbiAgICAgICAga2V5ICE9PSAnYWdncmVnYXRlZCcgJiYga2V5ICE9PSAnY3VzdG9tJ1xyXG4gICAgKTtcclxuICAgIFxyXG4gICAgaWYgKGF2YWlsYWJsZVNvdXJjZXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdcdTZDQTFcdTY3MDlcdTUzRUZcdTc1MjhcdTc2ODRBUElcdTZFOTAnKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gXHU1MjFCXHU1RUZBXHU2MjQwXHU2NzA5QVBJXHU2RTkwXHU3Njg0XHU2NDFDXHU3RDIyXHU4QkY3XHU2QzQyXHJcbiAgICBjb25zdCBzZWFyY2hQcm9taXNlcyA9IGF2YWlsYWJsZVNvdXJjZXMubWFwKGFzeW5jIChzb3VyY2UpID0+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBhcGlVcmwgPSBgJHtBUElfU0lURVNbc291cmNlXS5hcGl9JHtBUElfQ09ORklHLnNlYXJjaC5wYXRofSR7ZW5jb2RlVVJJQ29tcG9uZW50KHNlYXJjaFF1ZXJ5KX1gO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU0RjdGXHU3NTI4UHJvbWlzZS5yYWNlXHU2REZCXHU1MkEwXHU4RDg1XHU2NUY2XHU1OTA0XHU3NDA2XHJcbiAgICAgICAgICAgIGNvbnN0IHRpbWVvdXRQcm9taXNlID0gbmV3IFByb21pc2UoKF8sIHJlamVjdCkgPT4gXHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHJlamVjdChuZXcgRXJyb3IoYCR7c291cmNlfVx1NkU5MFx1NjQxQ1x1N0QyMlx1OEQ4NVx1NjVGNmApKSwgODAwMClcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1OTI3NFx1Njc0M1x1NTNDMlx1NjU3MFx1NTIzMFx1NEVFM1x1NzQwNlVSTFxyXG4gICAgICAgICAgICBjb25zdCBwcm94aWVkVXJsID0gYXdhaXQgd2luZG93LlByb3h5QXV0aD8uYWRkQXV0aFRvUHJveHlVcmwgPyBcclxuICAgICAgICAgICAgICAgIGF3YWl0IHdpbmRvdy5Qcm94eUF1dGguYWRkQXV0aFRvUHJveHlVcmwoUFJPWFlfVVJMICsgZW5jb2RlVVJJQ29tcG9uZW50KGFwaVVybCkpIDpcclxuICAgICAgICAgICAgICAgIFBST1hZX1VSTCArIGVuY29kZVVSSUNvbXBvbmVudChhcGlVcmwpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgZmV0Y2hQcm9taXNlID0gZmV0Y2gocHJveGllZFVybCwge1xyXG4gICAgICAgICAgICAgICAgaGVhZGVyczogQVBJX0NPTkZJRy5zZWFyY2guaGVhZGVyc1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgUHJvbWlzZS5yYWNlKFtmZXRjaFByb21pc2UsIHRpbWVvdXRQcm9taXNlXSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7c291cmNlfVx1NkU5MFx1OEJGN1x1NkM0Mlx1NTkzMVx1OEQyNTogJHtyZXNwb25zZS5zdGF0dXN9YCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoIWRhdGEgfHwgIUFycmF5LmlzQXJyYXkoZGF0YS5saXN0KSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAke3NvdXJjZX1cdTZFOTBcdThGRDRcdTU2REVcdTc2ODRcdTY1NzBcdTYzNkVcdTY4M0NcdTVGMEZcdTY1RTBcdTY1NDhgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU0RTNBXHU2NDFDXHU3RDIyXHU3RUQzXHU2NzlDXHU2REZCXHU1MkEwXHU2RTkwXHU0RkUxXHU2MDZGXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdHMgPSBkYXRhLmxpc3QubWFwKGl0ZW0gPT4gKHtcclxuICAgICAgICAgICAgICAgIC4uLml0ZW0sXHJcbiAgICAgICAgICAgICAgICBzb3VyY2VfbmFtZTogQVBJX1NJVEVTW3NvdXJjZV0ubmFtZSxcclxuICAgICAgICAgICAgICAgIHNvdXJjZV9jb2RlOiBzb3VyY2VcclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdHM7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKGAke3NvdXJjZX1cdTZFOTBcdTY0MUNcdTdEMjJcdTU5MzFcdThEMjU6YCwgZXJyb3IpO1xyXG4gICAgICAgICAgICByZXR1cm4gW107IC8vIFx1OEZENFx1NTZERVx1N0E3QVx1NjU3MFx1N0VDNFx1ODg2OFx1NzkzQVx1OEJFNVx1NkU5MFx1NjQxQ1x1N0QyMlx1NTkzMVx1OEQyNVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICB0cnkge1xyXG4gICAgICAgIC8vIFx1NUU3Nlx1ODg0Q1x1NjI2N1x1ODg0Q1x1NjI0MFx1NjcwOVx1NjQxQ1x1N0QyMlx1OEJGN1x1NkM0MlxyXG4gICAgICAgIGNvbnN0IHJlc3VsdHNBcnJheSA9IGF3YWl0IFByb21pc2UuYWxsKHNlYXJjaFByb21pc2VzKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTU0MDhcdTVFNzZcdTYyNDBcdTY3MDlcdTdFRDNcdTY3OUNcclxuICAgICAgICBsZXQgYWxsUmVzdWx0cyA9IFtdO1xyXG4gICAgICAgIHJlc3VsdHNBcnJheS5mb3JFYWNoKHJlc3VsdHMgPT4ge1xyXG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShyZXN1bHRzKSAmJiByZXN1bHRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGFsbFJlc3VsdHMgPSBhbGxSZXN1bHRzLmNvbmNhdChyZXN1bHRzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NkNBMVx1NjcwOVx1NjQxQ1x1N0QyMlx1N0VEM1x1Njc5Q1x1RkYwQ1x1OEZENFx1NTZERVx1N0E3QVx1N0VEM1x1Njc5Q1xyXG4gICAgICAgIGlmIChhbGxSZXN1bHRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgICAgICAgY29kZTogMjAwLFxyXG4gICAgICAgICAgICAgICAgbGlzdDogW10sXHJcbiAgICAgICAgICAgICAgICBtc2c6ICdcdTYyNDBcdTY3MDlcdTZFOTBcdTU3NDdcdTY1RTBcdTY0MUNcdTdEMjJcdTdFRDNcdTY3OUMnXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTUzQkJcdTkxQ0RcdUZGMDhcdTY4MzlcdTYzNkV2b2RfaWRcdTU0OENzb3VyY2VfY29kZVx1N0VDNFx1NTQwOFx1RkYwOVxyXG4gICAgICAgIGNvbnN0IHVuaXF1ZVJlc3VsdHMgPSBbXTtcclxuICAgICAgICBjb25zdCBzZWVuID0gbmV3IFNldCgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGFsbFJlc3VsdHMuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgY29uc3Qga2V5ID0gYCR7aXRlbS5zb3VyY2VfY29kZX1fJHtpdGVtLnZvZF9pZH1gO1xyXG4gICAgICAgICAgICBpZiAoIXNlZW4uaGFzKGtleSkpIHtcclxuICAgICAgICAgICAgICAgIHNlZW4uYWRkKGtleSk7XHJcbiAgICAgICAgICAgICAgICB1bmlxdWVSZXN1bHRzLnB1c2goaXRlbSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTYzMDlcdTcxNjdcdTg5QzZcdTk4OTFcdTU0MERcdTc5RjBcdTU0OENcdTY3NjVcdTZFOTBcdTYzOTJcdTVFOEZcclxuICAgICAgICB1bmlxdWVSZXN1bHRzLnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgICAgICAgLy8gXHU5OTk2XHU1MTQ4XHU2MzA5XHU3MTY3XHU4OUM2XHU5ODkxXHU1NDBEXHU3OUYwXHU2MzkyXHU1RThGXHJcbiAgICAgICAgICAgIGNvbnN0IG5hbWVDb21wYXJlID0gKGEudm9kX25hbWUgfHwgJycpLmxvY2FsZUNvbXBhcmUoYi52b2RfbmFtZSB8fCAnJyk7XHJcbiAgICAgICAgICAgIGlmIChuYW1lQ29tcGFyZSAhPT0gMCkgcmV0dXJuIG5hbWVDb21wYXJlO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU1NDBEXHU3OUYwXHU3NkY4XHU1NDBDXHVGRjBDXHU1MjE5XHU2MzA5XHU3MTY3XHU2NzY1XHU2RTkwXHU2MzkyXHU1RThGXHJcbiAgICAgICAgICAgIHJldHVybiAoYS5zb3VyY2VfbmFtZSB8fCAnJykubG9jYWxlQ29tcGFyZShiLnNvdXJjZV9uYW1lIHx8ICcnKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgICBjb2RlOiAyMDAsXHJcbiAgICAgICAgICAgIGxpc3Q6IHVuaXF1ZVJlc3VsdHMsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1ODA1QVx1NTQwOFx1NjQxQ1x1N0QyMlx1NTkwNFx1NzQwNlx1OTUxOVx1OEJFRjonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgICAgY29kZTogNDAwLFxyXG4gICAgICAgICAgICBtc2c6ICdcdTgwNUFcdTU0MDhcdTY0MUNcdTdEMjJcdTU5MDRcdTc0MDZcdTU5MzFcdThEMjU6ICcgKyBlcnJvci5tZXNzYWdlLFxyXG4gICAgICAgICAgICBsaXN0OiBbXVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyBcdTU5MDRcdTc0MDZcdTU5MUFcdTRFMkFcdTgxRUFcdTVCOUFcdTRFNDlBUElcdTZFOTBcdTc2ODRcdTgwNUFcdTU0MDhcdTY0MUNcdTdEMjJcclxuYXN5bmMgZnVuY3Rpb24gaGFuZGxlTXVsdGlwbGVDdXN0b21TZWFyY2goc2VhcmNoUXVlcnksIGN1c3RvbUFwaVVybHMpIHtcclxuICAgIC8vIFx1ODlFM1x1Njc5MFx1ODFFQVx1NUI5QVx1NEU0OUFQSVx1NTIxN1x1ODg2OFxyXG4gICAgY29uc3QgYXBpVXJscyA9IGN1c3RvbUFwaVVybHMuc3BsaXQoQ1VTVE9NX0FQSV9DT05GSUcuc2VwYXJhdG9yKVxyXG4gICAgICAgIC5tYXAodXJsID0+IHVybC50cmltKCkpXHJcbiAgICAgICAgLmZpbHRlcih1cmwgPT4gdXJsLmxlbmd0aCA+IDAgJiYgL15odHRwcz86XFwvXFwvLy50ZXN0KHVybCkpXHJcbiAgICAgICAgLnNsaWNlKDAsIENVU1RPTV9BUElfQ09ORklHLm1heFNvdXJjZXMpO1xyXG4gICAgXHJcbiAgICBpZiAoYXBpVXJscy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1x1NkNBMVx1NjcwOVx1NjNEMFx1NEY5Qlx1NjcwOVx1NjU0OFx1NzY4NFx1ODFFQVx1NUI5QVx1NEU0OUFQSVx1NTczMFx1NTc0MCcpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBcdTRFM0FcdTZCQ0ZcdTRFMkFBUElcdTUyMUJcdTVFRkFcdTY0MUNcdTdEMjJcdThCRjdcdTZDNDJcclxuICAgIGNvbnN0IHNlYXJjaFByb21pc2VzID0gYXBpVXJscy5tYXAoYXN5bmMgKGFwaVVybCwgaW5kZXgpID0+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBmdWxsVXJsID0gYCR7YXBpVXJsfSR7QVBJX0NPTkZJRy5zZWFyY2gucGF0aH0ke2VuY29kZVVSSUNvbXBvbmVudChzZWFyY2hRdWVyeSl9YDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NEY3Rlx1NzUyOFByb21pc2UucmFjZVx1NkRGQlx1NTJBMFx1OEQ4NVx1NjVGNlx1NTkwNFx1NzQwNlxyXG4gICAgICAgICAgICBjb25zdCB0aW1lb3V0UHJvbWlzZSA9IG5ldyBQcm9taXNlKChfLCByZWplY3QpID0+IFxyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiByZWplY3QobmV3IEVycm9yKGBcdTgxRUFcdTVCOUFcdTRFNDlBUEkgJHtpbmRleCsxfSBcdTY0MUNcdTdEMjJcdThEODVcdTY1RjZgKSksIDgwMDApXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTkyNzRcdTY3NDNcdTUzQzJcdTY1NzBcdTUyMzBcdTRFRTNcdTc0MDZVUkxcclxuICAgICAgICAgICAgY29uc3QgcHJveGllZFVybCA9IGF3YWl0IHdpbmRvdy5Qcm94eUF1dGg/LmFkZEF1dGhUb1Byb3h5VXJsID8gXHJcbiAgICAgICAgICAgICAgICBhd2FpdCB3aW5kb3cuUHJveHlBdXRoLmFkZEF1dGhUb1Byb3h5VXJsKFBST1hZX1VSTCArIGVuY29kZVVSSUNvbXBvbmVudChmdWxsVXJsKSkgOlxyXG4gICAgICAgICAgICAgICAgUFJPWFlfVVJMICsgZW5jb2RlVVJJQ29tcG9uZW50KGZ1bGxVcmwpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgZmV0Y2hQcm9taXNlID0gZmV0Y2gocHJveGllZFVybCwge1xyXG4gICAgICAgICAgICAgICAgaGVhZGVyczogQVBJX0NPTkZJRy5zZWFyY2guaGVhZGVyc1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgUHJvbWlzZS5yYWNlKFtmZXRjaFByb21pc2UsIHRpbWVvdXRQcm9taXNlXSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFx1ODFFQVx1NUI5QVx1NEU0OUFQSSAke2luZGV4KzF9IFx1OEJGN1x1NkM0Mlx1NTkzMVx1OEQyNTogJHtyZXNwb25zZS5zdGF0dXN9YCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoIWRhdGEgfHwgIUFycmF5LmlzQXJyYXkoZGF0YS5saXN0KSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBcdTgxRUFcdTVCOUFcdTRFNDlBUEkgJHtpbmRleCsxfSBcdThGRDRcdTU2REVcdTc2ODRcdTY1NzBcdTYzNkVcdTY4M0NcdTVGMEZcdTY1RTBcdTY1NDhgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU0RTNBXHU2NDFDXHU3RDIyXHU3RUQzXHU2NzlDXHU2REZCXHU1MkEwXHU2RTkwXHU0RkUxXHU2MDZGXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdHMgPSBkYXRhLmxpc3QubWFwKGl0ZW0gPT4gKHtcclxuICAgICAgICAgICAgICAgIC4uLml0ZW0sXHJcbiAgICAgICAgICAgICAgICBzb3VyY2VfbmFtZTogYCR7Q1VTVE9NX0FQSV9DT05GSUcubmFtZVByZWZpeH0ke2luZGV4KzF9YCxcclxuICAgICAgICAgICAgICAgIHNvdXJjZV9jb2RlOiAnY3VzdG9tJyxcclxuICAgICAgICAgICAgICAgIGFwaV91cmw6IGFwaVVybCAvLyBcdTRGRERcdTVCNThBUEkgVVJMXHU0RUU1XHU0RkJGXHU4QkU2XHU2MEM1XHU4M0I3XHU1M0Q2XHJcbiAgICAgICAgICAgIH0pKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHRzO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihgXHU4MUVBXHU1QjlBXHU0RTQ5QVBJICR7aW5kZXgrMX0gXHU2NDFDXHU3RDIyXHU1OTMxXHU4RDI1OmAsIGVycm9yKTtcclxuICAgICAgICAgICAgcmV0dXJuIFtdOyAvLyBcdThGRDRcdTU2REVcdTdBN0FcdTY1NzBcdTdFQzRcdTg4NjhcdTc5M0FcdThCRTVcdTZFOTBcdTY0MUNcdTdEMjJcdTU5MzFcdThEMjVcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgdHJ5IHtcclxuICAgICAgICAvLyBcdTVFNzZcdTg4NENcdTYyNjdcdTg4NENcdTYyNDBcdTY3MDlcdTY0MUNcdTdEMjJcdThCRjdcdTZDNDJcclxuICAgICAgICBjb25zdCByZXN1bHRzQXJyYXkgPSBhd2FpdCBQcm9taXNlLmFsbChzZWFyY2hQcm9taXNlcyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU1NDA4XHU1RTc2XHU2MjQwXHU2NzA5XHU3RUQzXHU2NzlDXHJcbiAgICAgICAgbGV0IGFsbFJlc3VsdHMgPSBbXTtcclxuICAgICAgICByZXN1bHRzQXJyYXkuZm9yRWFjaChyZXN1bHRzID0+IHtcclxuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocmVzdWx0cykgJiYgcmVzdWx0cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBhbGxSZXN1bHRzID0gYWxsUmVzdWx0cy5jb25jYXQocmVzdWx0cyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTZDQTFcdTY3MDlcdTY0MUNcdTdEMjJcdTdFRDNcdTY3OUNcdUZGMENcdThGRDRcdTU2REVcdTdBN0FcdTdFRDNcdTY3OUNcclxuICAgICAgICBpZiAoYWxsUmVzdWx0cy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgICAgICAgIGNvZGU6IDIwMCxcclxuICAgICAgICAgICAgICAgIGxpc3Q6IFtdLFxyXG4gICAgICAgICAgICAgICAgbXNnOiAnXHU2MjQwXHU2NzA5XHU4MUVBXHU1QjlBXHU0RTQ5QVBJXHU2RTkwXHU1NzQ3XHU2NUUwXHU2NDFDXHU3RDIyXHU3RUQzXHU2NzlDJ1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU1M0JCXHU5MUNEXHVGRjA4XHU2ODM5XHU2MzZFdm9kX2lkXHU1NDhDYXBpX3VybFx1N0VDNFx1NTQwOFx1RkYwOVxyXG4gICAgICAgIGNvbnN0IHVuaXF1ZVJlc3VsdHMgPSBbXTtcclxuICAgICAgICBjb25zdCBzZWVuID0gbmV3IFNldCgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGFsbFJlc3VsdHMuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgY29uc3Qga2V5ID0gYCR7aXRlbS5hcGlfdXJsIHx8ICcnfV8ke2l0ZW0udm9kX2lkfWA7XHJcbiAgICAgICAgICAgIGlmICghc2Vlbi5oYXMoa2V5KSkge1xyXG4gICAgICAgICAgICAgICAgc2Vlbi5hZGQoa2V5KTtcclxuICAgICAgICAgICAgICAgIHVuaXF1ZVJlc3VsdHMucHVzaChpdGVtKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgIGNvZGU6IDIwMCxcclxuICAgICAgICAgICAgbGlzdDogdW5pcXVlUmVzdWx0cyxcclxuICAgICAgICB9KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignXHU4MUVBXHU1QjlBXHU0RTQ5QVBJXHU4MDVBXHU1NDA4XHU2NDFDXHU3RDIyXHU1OTA0XHU3NDA2XHU5NTE5XHU4QkVGOicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgICBjb2RlOiA0MDAsXHJcbiAgICAgICAgICAgIG1zZzogJ1x1ODFFQVx1NUI5QVx1NEU0OUFQSVx1ODA1QVx1NTQwOFx1NjQxQ1x1N0QyMlx1NTkwNFx1NzQwNlx1NTkzMVx1OEQyNTogJyArIGVycm9yLm1lc3NhZ2UsXHJcbiAgICAgICAgICAgIGxpc3Q6IFtdXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIFx1NjJFNlx1NjIyQUFQSVx1OEJGN1x1NkM0MlxyXG4oZnVuY3Rpb24oKSB7XHJcbiAgICBjb25zdCBvcmlnaW5hbEZldGNoID0gd2luZG93LmZldGNoO1xyXG4gICAgXHJcbiAgICB3aW5kb3cuZmV0Y2ggPSBhc3luYyBmdW5jdGlvbihpbnB1dCwgaW5pdCkge1xyXG4gICAgICAgIGNvbnN0IHJlcXVlc3RVcmwgPSB0eXBlb2YgaW5wdXQgPT09ICdzdHJpbmcnID8gbmV3IFVSTChpbnB1dCwgd2luZG93LmxvY2F0aW9uLm9yaWdpbikgOiBpbnB1dC51cmw7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHJlcXVlc3RVcmwucGF0aG5hbWUuc3RhcnRzV2l0aCgnL2FwaS8nKSkge1xyXG4gICAgICAgICAgICBpZiAod2luZG93LmlzUGFzc3dvcmRQcm90ZWN0ZWQgJiYgd2luZG93LmlzUGFzc3dvcmRWZXJpZmllZCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHdpbmRvdy5pc1Bhc3N3b3JkUHJvdGVjdGVkKCkgJiYgIXdpbmRvdy5pc1Bhc3N3b3JkVmVyaWZpZWQoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IGhhbmRsZUFwaVJlcXVlc3QocmVxdWVzdFVybCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFJlc3BvbnNlKGRhdGEsIHtcclxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4nOiAnKicsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBSZXNwb25zZShKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgICAgICAgICAgY29kZTogNTAwLFxyXG4gICAgICAgICAgICAgICAgICAgIG1zZzogJ1x1NjcwRFx1NTJBMVx1NTY2OFx1NTE4NVx1OTBFOFx1OTUxOVx1OEJFRicsXHJcbiAgICAgICAgICAgICAgICB9KSwge1xyXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogNTAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU5NzVFQVBJXHU4QkY3XHU2QzQyXHU0RjdGXHU3NTI4XHU1MzlGXHU1OUNCZmV0Y2hcclxuICAgICAgICByZXR1cm4gb3JpZ2luYWxGZXRjaC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG4gICAgfTtcclxufSkoKTtcclxuXHJcbmFzeW5jIGZ1bmN0aW9uIHRlc3RTaXRlQXZhaWxhYmlsaXR5KGFwaVVybCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICAvLyBcdTRGN0ZcdTc1MjhcdTY2RjRcdTdCODBcdTUzNTVcdTc2ODRcdTZENEJcdThCRDVcdTY3RTVcdThCRTJcclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCcvYXBpL3NlYXJjaD93ZD10ZXN0JmN1c3RvbUFwaT0nICsgZW5jb2RlVVJJQ29tcG9uZW50KGFwaVVybCksIHtcclxuICAgICAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU4RDg1XHU2NUY2XHJcbiAgICAgICAgICAgIHNpZ25hbDogQWJvcnRTaWduYWwudGltZW91dCg1MDAwKVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NTRDRFx1NUU5NFx1NzJCNlx1NjAwMVxyXG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NjhDMFx1NjdFNUFQSVx1NTRDRFx1NUU5NFx1NzY4NFx1NjcwOVx1NjU0OFx1NjAyN1xyXG4gICAgICAgIHJldHVybiBkYXRhICYmIGRhdGEuY29kZSAhPT0gNDAwICYmIEFycmF5LmlzQXJyYXkoZGF0YS5saXN0KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignXHU3QUQ5XHU3MEI5XHU1M0VGXHU3NTI4XHU2MDI3XHU2RDRCXHU4QkQ1XHU1OTMxXHU4RDI1OicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbn1cclxuIiwgIi8vIFx1OEM0Nlx1NzRFM1x1NzBFRFx1OTVFOFx1NzUzNVx1NUY3MVx1NzUzNVx1ODlDNlx1NTI2N1x1NjNBOFx1ODM1MFx1NTI5Rlx1ODBGRFxyXG5cclxuLy8gXHU4QzQ2XHU3NEUzXHU2ODA3XHU3QjdFXHU1MjE3XHU4ODY4IC0gXHU0RkVFXHU2NTM5XHU0RTNBXHU5RUQ4XHU4QkE0XHU2ODA3XHU3QjdFXHJcbmxldCBkZWZhdWx0TW92aWVUYWdzID0gWydcdTcwRURcdTk1RTgnLCAnXHU2NzAwXHU2NUIwJywgJ1x1N0VDRlx1NTE3OCcsICdcdThDNDZcdTc0RTNcdTlBRDhcdTUyMDYnLCAnXHU1MUI3XHU5NUU4XHU0RjczXHU3MjQ3JywgJ1x1NTM0RVx1OEJFRCcsICdcdTZCMjdcdTdGOEUnLCAnXHU5N0U5XHU1NkZEJywgJ1x1NjVFNVx1NjcyQycsICdcdTUyQThcdTRGNUMnLCAnXHU1NTlDXHU1MjY3JywgJ1x1NjVFNVx1N0VGQycsICdcdTcyMzFcdTYwQzUnLCAnXHU3OUQxXHU1RTdCJywgJ1x1NjBBQ1x1NzU5MScsICdcdTYwNTBcdTYwMTYnLCAnXHU2Q0JCXHU2MTA4J107XHJcbmxldCBkZWZhdWx0VHZUYWdzID0gWydcdTcwRURcdTk1RTgnLCAnXHU3RjhFXHU1MjY3JywgJ1x1ODJGMVx1NTI2NycsICdcdTk3RTlcdTUyNjcnLCAnXHU2NUU1XHU1MjY3JywgJ1x1NTZGRFx1NEVBN1x1NTI2NycsICdcdTZFMkZcdTUyNjcnLCAnXHU2NUU1XHU2NzJDXHU1MkE4XHU3NTNCJywgJ1x1N0VGQ1x1ODI3QScsICdcdTdFQUFcdTVGNTVcdTcyNDcnXTtcclxuXHJcbi8vIFx1NzUyOFx1NjIzN1x1NjgwN1x1N0I3RVx1NTIxN1x1ODg2OCAtIFx1NUI1OFx1NTBBOFx1NzUyOFx1NjIzN1x1NUI5RVx1OTY0NVx1NEY3Rlx1NzUyOFx1NzY4NFx1NjgwN1x1N0I3RVx1RkYwOFx1NTMwNVx1NTQyQlx1NEZERFx1NzU1OVx1NzY4NFx1N0NGQlx1N0VERlx1NjgwN1x1N0I3RVx1NTQ4Q1x1NzUyOFx1NjIzN1x1NkRGQlx1NTJBMFx1NzY4NFx1ODFFQVx1NUI5QVx1NEU0OVx1NjgwN1x1N0I3RVx1RkYwOVxyXG5sZXQgbW92aWVUYWdzID0gW107XHJcbmxldCB0dlRhZ3MgPSBbXTtcclxuXHJcbi8vIFx1NTJBMFx1OEY3RFx1NzUyOFx1NjIzN1x1NjgwN1x1N0I3RVxyXG5mdW5jdGlvbiBsb2FkVXNlclRhZ3MoKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIC8vIFx1NUMxRFx1OEJENVx1NEVDRVx1NjcyQ1x1NTczMFx1NUI1OFx1NTBBOFx1NTJBMFx1OEY3RFx1NzUyOFx1NjIzN1x1NEZERFx1NUI1OFx1NzY4NFx1NjgwN1x1N0I3RVxyXG4gICAgICAgIGNvbnN0IHNhdmVkTW92aWVUYWdzID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJNb3ZpZVRhZ3MnKTtcclxuICAgICAgICBjb25zdCBzYXZlZFR2VGFncyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VyVHZUYWdzJyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU2NzJDXHU1NzMwXHU1QjU4XHU1MEE4XHU0RTJEXHU2NzA5XHU2ODA3XHU3QjdFXHU2NTcwXHU2MzZFXHVGRjBDXHU1MjE5XHU0RjdGXHU3NTI4XHU1QjgzXHJcbiAgICAgICAgaWYgKHNhdmVkTW92aWVUYWdzKSB7XHJcbiAgICAgICAgICAgIG1vdmllVGFncyA9IEpTT04ucGFyc2Uoc2F2ZWRNb3ZpZVRhZ3MpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFx1NTQyNlx1NTIxOVx1NEY3Rlx1NzUyOFx1OUVEOFx1OEJBNFx1NjgwN1x1N0I3RVxyXG4gICAgICAgICAgICBtb3ZpZVRhZ3MgPSBbLi4uZGVmYXVsdE1vdmllVGFnc107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChzYXZlZFR2VGFncykge1xyXG4gICAgICAgICAgICB0dlRhZ3MgPSBKU09OLnBhcnNlKHNhdmVkVHZUYWdzKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBcdTU0MjZcdTUyMTlcdTRGN0ZcdTc1MjhcdTlFRDhcdThCQTRcdTY4MDdcdTdCN0VcclxuICAgICAgICAgICAgdHZUYWdzID0gWy4uLmRlZmF1bHRUdlRhZ3NdO1xyXG4gICAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdcdTUyQTBcdThGN0RcdTY4MDdcdTdCN0VcdTU5MzFcdThEMjVcdUZGMUEnLCBlKTtcclxuICAgICAgICAvLyBcdTUyMURcdTU5Q0JcdTUzMTZcdTRFM0FcdTlFRDhcdThCQTRcdTUwM0NcdUZGMENcdTk2MzJcdTZCNjJcdTk1MTlcdThCRUZcclxuICAgICAgICBtb3ZpZVRhZ3MgPSBbLi4uZGVmYXVsdE1vdmllVGFnc107XHJcbiAgICAgICAgdHZUYWdzID0gWy4uLmRlZmF1bHRUdlRhZ3NdO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyBcdTRGRERcdTVCNThcdTc1MjhcdTYyMzdcdTY4MDdcdTdCN0VcclxuZnVuY3Rpb24gc2F2ZVVzZXJUYWdzKCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndXNlck1vdmllVGFncycsIEpTT04uc3RyaW5naWZ5KG1vdmllVGFncykpO1xyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd1c2VyVHZUYWdzJywgSlNPTi5zdHJpbmdpZnkodHZUYWdzKSk7XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignXHU0RkREXHU1QjU4XHU2ODA3XHU3QjdFXHU1OTMxXHU4RDI1XHVGRjFBJywgZSk7XHJcbiAgICAgICAgc2hvd1RvYXN0KCdcdTRGRERcdTVCNThcdTY4MDdcdTdCN0VcdTU5MzFcdThEMjUnLCAnZXJyb3InKTtcclxuICAgIH1cclxufVxyXG5cclxubGV0IGRvdWJhbk1vdmllVHZDdXJyZW50U3dpdGNoID0gJ21vdmllJztcclxubGV0IGRvdWJhbkN1cnJlbnRUYWcgPSAnXHU3MEVEXHU5NUU4JztcclxubGV0IGRvdWJhblBhZ2VTdGFydCA9IDA7XHJcbmNvbnN0IGRvdWJhblBhZ2VTaXplID0gMTY7IC8vIFx1NEUwMFx1NkIyMVx1NjYzRVx1NzkzQVx1NzY4NFx1OTg3OVx1NzZFRVx1NjU3MFx1OTFDRlxyXG5cclxuLy8gXHU1MjFEXHU1OUNCXHU1MzE2XHU4QzQ2XHU3NEUzXHU1MjlGXHU4MEZEXHJcbmZ1bmN0aW9uIGluaXREb3ViYW4oKSB7XHJcbiAgICAvLyBcdThCQkVcdTdGNkVcdThDNDZcdTc0RTNcdTVGMDBcdTUxNzNcdTc2ODRcdTUyMURcdTU5Q0JcdTcyQjZcdTYwMDFcclxuICAgIGNvbnN0IGRvdWJhblRvZ2dsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkb3ViYW5Ub2dnbGUnKTtcclxuICAgIGlmIChkb3ViYW5Ub2dnbGUpIHtcclxuICAgICAgICBjb25zdCBpc0VuYWJsZWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZG91YmFuRW5hYmxlZCcpID09PSAndHJ1ZSc7XHJcbiAgICAgICAgZG91YmFuVG9nZ2xlLmNoZWNrZWQgPSBpc0VuYWJsZWQ7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU4QkJFXHU3RjZFXHU1RjAwXHU1MTczXHU1OTE2XHU4OUMyXHJcbiAgICAgICAgY29uc3QgdG9nZ2xlQmcgPSBkb3ViYW5Ub2dnbGUubmV4dEVsZW1lbnRTaWJsaW5nO1xyXG4gICAgICAgIGNvbnN0IHRvZ2dsZURvdCA9IHRvZ2dsZUJnLm5leHRFbGVtZW50U2libGluZztcclxuICAgICAgICBpZiAoaXNFbmFibGVkKSB7XHJcbiAgICAgICAgICAgIHRvZ2dsZUJnLmNsYXNzTGlzdC5hZGQoJ2JnLXBpbmstNjAwJyk7XHJcbiAgICAgICAgICAgIHRvZ2dsZURvdC5jbGFzc0xpc3QuYWRkKCd0cmFuc2xhdGUteC02Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NEU4Qlx1NEVGNlx1NzZEMVx1NTQyQ1xyXG4gICAgICAgIGRvdWJhblRvZ2dsZS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGlzQ2hlY2tlZCA9IGUudGFyZ2V0LmNoZWNrZWQ7XHJcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdkb3ViYW5FbmFibGVkJywgaXNDaGVja2VkKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1NjZGNFx1NjVCMFx1NUYwMFx1NTE3M1x1NTkxNlx1ODlDMlxyXG4gICAgICAgICAgICBpZiAoaXNDaGVja2VkKSB7XHJcbiAgICAgICAgICAgICAgICB0b2dnbGVCZy5jbGFzc0xpc3QuYWRkKCdiZy1waW5rLTYwMCcpO1xyXG4gICAgICAgICAgICAgICAgdG9nZ2xlRG90LmNsYXNzTGlzdC5hZGQoJ3RyYW5zbGF0ZS14LTYnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRvZ2dsZUJnLmNsYXNzTGlzdC5yZW1vdmUoJ2JnLXBpbmstNjAwJyk7XHJcbiAgICAgICAgICAgICAgICB0b2dnbGVEb3QuY2xhc3NMaXN0LnJlbW92ZSgndHJhbnNsYXRlLXgtNicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTY2RjRcdTY1QjBcdTY2M0VcdTc5M0FcdTcyQjZcdTYwMDFcclxuICAgICAgICAgICAgdXBkYXRlRG91YmFuVmlzaWJpbGl0eSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NTIxRFx1NTlDQlx1NjZGNFx1NjVCMFx1NjYzRVx1NzkzQVx1NzJCNlx1NjAwMVxyXG4gICAgICAgIHVwZGF0ZURvdWJhblZpc2liaWxpdHkoKTtcclxuXHJcbiAgICAgICAgLy8gXHU2RURBXHU1MkE4XHU1MjMwXHU5ODc1XHU5NzYyXHU5ODc2XHU5MEU4XHJcbiAgICAgICAgd2luZG93LnNjcm9sbFRvKDAsIDApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1NTJBMFx1OEY3RFx1NzUyOFx1NjIzN1x1NjgwN1x1N0I3RVxyXG4gICAgbG9hZFVzZXJUYWdzKCk7XHJcblxyXG4gICAgLy8gXHU2RTMyXHU2N0QzXHU3NTM1XHU1RjcxL1x1NzUzNVx1ODlDNlx1NTI2N1x1NTIwN1x1NjM2MlxyXG4gICAgcmVuZGVyRG91YmFuTW92aWVUdlN3aXRjaCgpO1xyXG4gICAgXHJcbiAgICAvLyBcdTZFMzJcdTY3RDNcdThDNDZcdTc0RTNcdTY4MDdcdTdCN0VcclxuICAgIHJlbmRlckRvdWJhblRhZ3MoKTtcclxuICAgIFxyXG4gICAgLy8gXHU2MzYyXHU0RTAwXHU2Mjc5XHU2MzA5XHU5NEFFXHU0RThCXHU0RUY2XHU3NkQxXHU1NDJDXHJcbiAgICBzZXR1cERvdWJhblJlZnJlc2hCdG4oKTtcclxuICAgIFxyXG4gICAgLy8gXHU1MjFEXHU1OUNCXHU1MkEwXHU4RjdEXHU3MEVEXHU5NUU4XHU1MTg1XHU1QkI5XHJcbiAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2RvdWJhbkVuYWJsZWQnKSA9PT0gJ3RydWUnKSB7XHJcbiAgICAgICAgcmVuZGVyUmVjb21tZW5kKGRvdWJhbkN1cnJlbnRUYWcsIGRvdWJhblBhZ2VTaXplLCBkb3ViYW5QYWdlU3RhcnQpO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyBcdTY4MzlcdTYzNkVcdThCQkVcdTdGNkVcdTY2RjRcdTY1QjBcdThDNDZcdTc0RTNcdTUzM0FcdTU3REZcdTc2ODRcdTY2M0VcdTc5M0FcdTcyQjZcdTYwMDFcclxuZnVuY3Rpb24gdXBkYXRlRG91YmFuVmlzaWJpbGl0eSgpIHtcclxuICAgIGNvbnN0IGRvdWJhbkFyZWEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZG91YmFuQXJlYScpO1xyXG4gICAgaWYgKCFkb3ViYW5BcmVhKSByZXR1cm47XHJcbiAgICBcclxuICAgIGNvbnN0IGlzRW5hYmxlZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdkb3ViYW5FbmFibGVkJykgPT09ICd0cnVlJztcclxuICAgIGNvbnN0IGlzU2VhcmNoaW5nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3VsdHNBcmVhJykgJiYgXHJcbiAgICAgICAgIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN1bHRzQXJlYScpLmNsYXNzTGlzdC5jb250YWlucygnaGlkZGVuJyk7XHJcbiAgICBcclxuICAgIC8vIFx1NTNFQVx1NjcwOVx1NTcyOFx1NTQyRlx1NzUyOFx1NEUxNFx1NkNBMVx1NjcwOVx1NjQxQ1x1N0QyMlx1N0VEM1x1Njc5Q1x1NjYzRVx1NzkzQVx1NjVGNlx1NjI0RFx1NjYzRVx1NzkzQVx1OEM0Nlx1NzRFM1x1NTMzQVx1NTdERlxyXG4gICAgaWYgKGlzRW5hYmxlZCAmJiAhaXNTZWFyY2hpbmcpIHtcclxuICAgICAgICBkb3ViYW5BcmVhLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xyXG4gICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1OEM0Nlx1NzRFM1x1N0VEM1x1Njc5Q1x1NEUzQVx1N0E3QVx1RkYwQ1x1OTFDRFx1NjVCMFx1NTJBMFx1OEY3RFxyXG4gICAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZG91YmFuLXJlc3VsdHMnKS5jaGlsZHJlbi5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgcmVuZGVyUmVjb21tZW5kKGRvdWJhbkN1cnJlbnRUYWcsIGRvdWJhblBhZ2VTaXplLCBkb3ViYW5QYWdlU3RhcnQpO1xyXG4gICAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZG91YmFuQXJlYS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcclxuICAgIH1cclxufVxyXG5cclxuLy8gXHU1M0VBXHU1ODZCXHU1MTQ1XHU2NDFDXHU3RDIyXHU2ODQ2XHVGRjBDXHU0RTBEXHU2MjY3XHU4ODRDXHU2NDFDXHU3RDIyXHVGRjBDXHU4QkE5XHU3NTI4XHU2MjM3XHU4MUVBXHU0RTNCXHU1MUIzXHU1QjlBXHU2NDFDXHU3RDIyXHU2NUY2XHU2NzNBXHJcbmZ1bmN0aW9uIGZpbGxTZWFyY2hJbnB1dCh0aXRsZSkge1xyXG4gICAgaWYgKCF0aXRsZSkgcmV0dXJuO1xyXG4gICAgXHJcbiAgICAvLyBcdTVCODlcdTUxNjhcdTU5MDRcdTc0MDZcdTY4MDdcdTk4OThcdUZGMENcdTk2MzJcdTZCNjJYU1NcclxuICAgIGNvbnN0IHNhZmVUaXRsZSA9IHRpdGxlXHJcbiAgICAgICAgLnJlcGxhY2UoLzwvZywgJyZsdDsnKVxyXG4gICAgICAgIC5yZXBsYWNlKC8+L2csICcmZ3Q7JylcclxuICAgICAgICAucmVwbGFjZSgvXCIvZywgJyZxdW90OycpO1xyXG4gICAgXHJcbiAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWFyY2hJbnB1dCcpO1xyXG4gICAgaWYgKGlucHV0KSB7XHJcbiAgICAgICAgaW5wdXQudmFsdWUgPSBzYWZlVGl0bGU7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU4MDVBXHU3MTI2XHU2NDFDXHU3RDIyXHU2ODQ2XHVGRjBDXHU0RkJGXHU0RThFXHU3NTI4XHU2MjM3XHU3QUNCXHU1MzczXHU0RjdGXHU3NTI4XHU5NTJFXHU3NkQ4XHU2NENEXHU0RjVDXHJcbiAgICAgICAgaW5wdXQuZm9jdXMoKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTY2M0VcdTc5M0FcdTRFMDBcdTRFMkFcdTYzRDBcdTc5M0FcdUZGMENcdTU0NEFcdTc3RTVcdTc1MjhcdTYyMzdcdTcwQjlcdTUxRkJcdTY0MUNcdTdEMjJcdTYzMDlcdTk0QUVcdThGREJcdTg4NENcdTY0MUNcdTdEMjJcclxuICAgICAgICBzaG93VG9hc3QoJ1x1NURGMlx1NTg2Qlx1NTE0NVx1NjQxQ1x1N0QyMlx1NTE4NVx1NUJCOVx1RkYwQ1x1NzBCOVx1NTFGQlx1NjQxQ1x1N0QyMlx1NjMwOVx1OTRBRVx1NUYwMFx1NTlDQlx1NjQxQ1x1N0QyMicsICdpbmZvJyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIFx1NTg2Qlx1NTE0NVx1NjQxQ1x1N0QyMlx1Njg0Nlx1NUU3Nlx1NjI2N1x1ODg0Q1x1NjQxQ1x1N0QyMlxyXG5mdW5jdGlvbiBmaWxsQW5kU2VhcmNoKHRpdGxlKSB7XHJcbiAgICBpZiAoIXRpdGxlKSByZXR1cm47XHJcbiAgICBcclxuICAgIC8vIFx1NUI4OVx1NTE2OFx1NTkwNFx1NzQwNlx1NjgwN1x1OTg5OFx1RkYwQ1x1OTYzMlx1NkI2MlhTU1xyXG4gICAgY29uc3Qgc2FmZVRpdGxlID0gdGl0bGVcclxuICAgICAgICAucmVwbGFjZSgvPC9nLCAnJmx0OycpXHJcbiAgICAgICAgLnJlcGxhY2UoLz4vZywgJyZndDsnKVxyXG4gICAgICAgIC5yZXBsYWNlKC9cIi9nLCAnJnF1b3Q7Jyk7XHJcbiAgICBcclxuICAgIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlYXJjaElucHV0Jyk7XHJcbiAgICBpZiAoaW5wdXQpIHtcclxuICAgICAgICBpbnB1dC52YWx1ZSA9IHNhZmVUaXRsZTtcclxuICAgICAgICBzZWFyY2goKTsgLy8gXHU0RjdGXHU3NTI4XHU1REYyXHU2NzA5XHU3Njg0c2VhcmNoXHU1MUZEXHU2NTcwXHU2MjY3XHU4ODRDXHU2NDFDXHU3RDIyXHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU1NDBDXHU2NUY2XHU2NkY0XHU2NUIwXHU2RDRGXHU4OUM4XHU1NjY4VVJMXHVGRjBDXHU0RjdGXHU1MTc2XHU1M0NEXHU2NjIwXHU1RjUzXHU1MjREXHU3Njg0XHU2NDFDXHU3RDIyXHU3MkI2XHU2MDAxXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gXHU0RjdGXHU3NTI4VVJJXHU3RjE2XHU3ODAxXHU3ODZFXHU0RkREXHU3Mjc5XHU2QjhBXHU1QjU3XHU3QjI2XHU4MEZEXHU1OTFGXHU2QjYzXHU3ODZFXHU2NjNFXHU3OTNBXHJcbiAgICAgICAgICAgIGNvbnN0IGVuY29kZWRRdWVyeSA9IGVuY29kZVVSSUNvbXBvbmVudChzYWZlVGl0bGUpO1xyXG4gICAgICAgICAgICAvLyBcdTRGN0ZcdTc1MjhIVE1MNSBIaXN0b3J5IEFQSVx1NjZGNFx1NjVCMFVSTFx1RkYwQ1x1NEUwRFx1NTIzN1x1NjVCMFx1OTg3NVx1OTc2MlxyXG4gICAgICAgICAgICB3aW5kb3cuaGlzdG9yeS5wdXNoU3RhdGUoXHJcbiAgICAgICAgICAgICAgICB7IHNlYXJjaDogc2FmZVRpdGxlIH0sIFxyXG4gICAgICAgICAgICAgICAgYFx1NjQxQ1x1N0QyMjogJHtzYWZlVGl0bGV9IC0gTGlicmVUVmAsIFxyXG4gICAgICAgICAgICAgICAgYC9zPSR7ZW5jb2RlZFF1ZXJ5fWBcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgLy8gXHU2NkY0XHU2NUIwXHU5ODc1XHU5NzYyXHU2ODA3XHU5ODk4XHJcbiAgICAgICAgICAgIGRvY3VtZW50LnRpdGxlID0gYFx1NjQxQ1x1N0QyMjogJHtzYWZlVGl0bGV9IC0gTGlicmVUVmA7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdTY2RjRcdTY1QjBcdTZENEZcdTg5QzhcdTU2NjhcdTUzODZcdTUzRjJcdTU5MzFcdThEMjU6JywgZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG4vLyBcdTU4NkJcdTUxNDVcdTY0MUNcdTdEMjJcdTY4NDZcdUZGMENcdTc4NkVcdTRGRERcdThDNDZcdTc0RTNcdThENDRcdTZFOTBBUElcdTg4QUJcdTkwMDlcdTRFMkRcdUZGMENcdTcxMzZcdTU0MEVcdTYyNjdcdTg4NENcdTY0MUNcdTdEMjJcclxuYXN5bmMgZnVuY3Rpb24gZmlsbEFuZFNlYXJjaFdpdGhEb3ViYW4odGl0bGUpIHtcclxuICAgIGlmICghdGl0bGUpIHJldHVybjtcclxuICAgIFxyXG4gICAgLy8gXHU1Qjg5XHU1MTY4XHU1OTA0XHU3NDA2XHU2ODA3XHU5ODk4XHVGRjBDXHU5NjMyXHU2QjYyWFNTXHJcbiAgICBjb25zdCBzYWZlVGl0bGUgPSB0aXRsZVxyXG4gICAgICAgIC5yZXBsYWNlKC88L2csICcmbHQ7JylcclxuICAgICAgICAucmVwbGFjZSgvPi9nLCAnJmd0OycpXHJcbiAgICAgICAgLnJlcGxhY2UoL1wiL2csICcmcXVvdDsnKTtcclxuICAgIFxyXG4gICAgLy8gXHU3ODZFXHU0RkREXHU4QzQ2XHU3NEUzXHU4RDQ0XHU2RTkwQVBJXHU4OEFCXHU5MDA5XHU0RTJEXHJcbiAgICBpZiAodHlwZW9mIHNlbGVjdGVkQVBJcyAhPT0gJ3VuZGVmaW5lZCcgJiYgIXNlbGVjdGVkQVBJcy5pbmNsdWRlcygnZGJ6eScpKSB7XHJcbiAgICAgICAgLy8gXHU1NzI4XHU4QkJFXHU3RjZFXHU0RTJEXHU1MkZFXHU5MDA5XHU4QzQ2XHU3NEUzXHU4RDQ0XHU2RTkwQVBJXHU1OTBEXHU5MDA5XHU2ODQ2XHJcbiAgICAgICAgY29uc3QgZG91YmFuQ2hlY2tib3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dFtpZD1cImFwaV9kYnp5XCJdJyk7XHJcbiAgICAgICAgaWYgKGRvdWJhbkNoZWNrYm94KSB7XHJcbiAgICAgICAgICAgIGRvdWJhbkNoZWNrYm94LmNoZWNrZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU4OUU2XHU1M0QxdXBkYXRlU2VsZWN0ZWRBUElzXHU1MUZEXHU2NTcwXHU0RUU1XHU2NkY0XHU2NUIwXHU3MkI2XHU2MDAxXHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdXBkYXRlU2VsZWN0ZWRBUElzID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVTZWxlY3RlZEFQSXMoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NTFGRFx1NjU3MFx1NEUwRFx1NTNFRlx1NzUyOFx1RkYwQ1x1NTIxOVx1NjI0Qlx1NTJBOFx1NkRGQlx1NTJBMFx1NTIzMHNlbGVjdGVkQVBJc1xyXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRBUElzLnB1c2goJ2RienknKTtcclxuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdzZWxlY3RlZEFQSXMnLCBKU09OLnN0cmluZ2lmeShzZWxlY3RlZEFQSXMpKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHU2NkY0XHU2NUIwXHU5MDA5XHU0RTJEQVBJXHU4QkExXHU2NTcwXHVGRjA4XHU1OTgyXHU2NzlDXHU2NzA5XHU4RkQ5XHU0RTJBXHU1MTQzXHU3RDIwXHVGRjA5XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb3VudEVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlbGVjdGVkQVBJQ291bnQnKTtcclxuICAgICAgICAgICAgICAgIGlmIChjb3VudEVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY291bnRFbC50ZXh0Q29udGVudCA9IHNlbGVjdGVkQVBJcy5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHNob3dUb2FzdCgnXHU1REYyXHU4MUVBXHU1MkE4XHU5MDA5XHU2MkU5XHU4QzQ2XHU3NEUzXHU4RDQ0XHU2RTkwQVBJJywgJ2luZm8nKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIFx1NTg2Qlx1NTE0NVx1NjQxQ1x1N0QyMlx1Njg0Nlx1NUU3Nlx1NjI2N1x1ODg0Q1x1NjQxQ1x1N0QyMlxyXG4gICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VhcmNoSW5wdXQnKTtcclxuICAgIGlmIChpbnB1dCkge1xyXG4gICAgICAgIGlucHV0LnZhbHVlID0gc2FmZVRpdGxlO1xyXG4gICAgICAgIGF3YWl0IHNlYXJjaCgpOyAvLyBcdTRGN0ZcdTc1MjhcdTVERjJcdTY3MDlcdTc2ODRzZWFyY2hcdTUxRkRcdTY1NzBcdTYyNjdcdTg4NENcdTY0MUNcdTdEMjJcclxuICAgICAgICBcclxuICAgICAgICAvLyBcdTY2RjRcdTY1QjBcdTZENEZcdTg5QzhcdTU2NjhVUkxcdUZGMENcdTRGN0ZcdTUxNzZcdTUzQ0RcdTY2MjBcdTVGNTNcdTUyNERcdTc2ODRcdTY0MUNcdTdEMjJcdTcyQjZcdTYwMDFcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBcdTRGN0ZcdTc1MjhVUklcdTdGMTZcdTc4MDFcdTc4NkVcdTRGRERcdTcyNzlcdTZCOEFcdTVCNTdcdTdCMjZcdTgwRkRcdTU5MUZcdTZCNjNcdTc4NkVcdTY2M0VcdTc5M0FcclxuICAgICAgICAgICAgY29uc3QgZW5jb2RlZFF1ZXJ5ID0gZW5jb2RlVVJJQ29tcG9uZW50KHNhZmVUaXRsZSk7XHJcbiAgICAgICAgICAgIC8vIFx1NEY3Rlx1NzUyOEhUTUw1IEhpc3RvcnkgQVBJXHU2NkY0XHU2NUIwVVJMXHVGRjBDXHU0RTBEXHU1MjM3XHU2NUIwXHU5ODc1XHU5NzYyXHJcbiAgICAgICAgICAgIHdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZShcclxuICAgICAgICAgICAgICAgIHsgc2VhcmNoOiBzYWZlVGl0bGUgfSwgXHJcbiAgICAgICAgICAgICAgICBgXHU2NDFDXHU3RDIyOiAke3NhZmVUaXRsZX0gLSBMaWJyZVRWYCwgXHJcbiAgICAgICAgICAgICAgICBgL3M9JHtlbmNvZGVkUXVlcnl9YFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAvLyBcdTY2RjRcdTY1QjBcdTk4NzVcdTk3NjJcdTY4MDdcdTk4OThcclxuICAgICAgICAgICAgZG9jdW1lbnQudGl0bGUgPSBgXHU2NDFDXHU3RDIyOiAke3NhZmVUaXRsZX0gLSBMaWJyZVRWYDtcclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1NjZGNFx1NjVCMFx1NkQ0Rlx1ODlDOFx1NTY2OFx1NTM4Nlx1NTNGMlx1NTkzMVx1OEQyNTonLCBlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA8PSA3NjgpIHtcclxuICAgICAgICAgIHdpbmRvdy5zY3JvbGxUbyh7XHJcbiAgICAgICAgICAgICAgdG9wOiAwLFxyXG4gICAgICAgICAgICAgIGJlaGF2aW9yOiAnc21vb3RoJ1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG4vLyBcdTZFMzJcdTY3RDNcdTc1MzVcdTVGNzEvXHU3NTM1XHU4OUM2XHU1MjY3XHU1MjA3XHU2MzYyXHU1NjY4XHJcbmZ1bmN0aW9uIHJlbmRlckRvdWJhbk1vdmllVHZTd2l0Y2goKSB7XHJcbiAgICAvLyBcdTgzQjdcdTUzRDZcdTUyMDdcdTYzNjJcdTYzMDlcdTk0QUVcdTUxNDNcdTdEMjBcclxuICAgIGNvbnN0IG1vdmllVG9nZ2xlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RvdWJhbi1tb3ZpZS10b2dnbGUnKTtcclxuICAgIGNvbnN0IHR2VG9nZ2xlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RvdWJhbi10di10b2dnbGUnKTtcclxuXHJcbiAgICBpZiAoIW1vdmllVG9nZ2xlIHx8IXR2VG9nZ2xlKSByZXR1cm47XHJcblxyXG4gICAgbW92aWVUb2dnbGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcclxuICAgICAgICBpZiAoZG91YmFuTW92aWVUdkN1cnJlbnRTd2l0Y2ggIT09ICdtb3ZpZScpIHtcclxuICAgICAgICAgICAgLy8gXHU2NkY0XHU2NUIwXHU2MzA5XHU5NEFFXHU2ODM3XHU1RjBGXHJcbiAgICAgICAgICAgIG1vdmllVG9nZ2xlLmNsYXNzTGlzdC5hZGQoJ2JnLXBpbmstNjAwJywgJ3RleHQtd2hpdGUnKTtcclxuICAgICAgICAgICAgbW92aWVUb2dnbGUuY2xhc3NMaXN0LnJlbW92ZSgndGV4dC1ncmF5LTMwMCcpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdHZUb2dnbGUuY2xhc3NMaXN0LnJlbW92ZSgnYmctcGluay02MDAnLCAndGV4dC13aGl0ZScpO1xyXG4gICAgICAgICAgICB0dlRvZ2dsZS5jbGFzc0xpc3QuYWRkKCd0ZXh0LWdyYXktMzAwJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBkb3ViYW5Nb3ZpZVR2Q3VycmVudFN3aXRjaCA9ICdtb3ZpZSc7XHJcbiAgICAgICAgICAgIGRvdWJhbkN1cnJlbnRUYWcgPSAnXHU3MEVEXHU5NUU4JztcclxuXHJcbiAgICAgICAgICAgIC8vIFx1OTFDRFx1NjVCMFx1NTJBMFx1OEY3RFx1OEM0Nlx1NzRFM1x1NTE4NVx1NUJCOVxyXG4gICAgICAgICAgICByZW5kZXJEb3ViYW5UYWdzKG1vdmllVGFncyk7XHJcblxyXG4gICAgICAgICAgICAvLyBcdTYzNjJcdTRFMDBcdTYyNzlcdTYzMDlcdTk0QUVcdTRFOEJcdTRFRjZcdTc2RDFcdTU0MkNcclxuICAgICAgICAgICAgc2V0dXBEb3ViYW5SZWZyZXNoQnRuKCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTUyMURcdTU5Q0JcdTUyQTBcdThGN0RcdTcwRURcdTk1RThcdTUxODVcdTVCQjlcclxuICAgICAgICAgICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdkb3ViYW5FbmFibGVkJykgPT09ICd0cnVlJykge1xyXG4gICAgICAgICAgICAgICAgcmVuZGVyUmVjb21tZW5kKGRvdWJhbkN1cnJlbnRUYWcsIGRvdWJhblBhZ2VTaXplLCBkb3ViYW5QYWdlU3RhcnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIC8vIFx1NzUzNVx1ODlDNlx1NTI2N1x1NjMwOVx1OTRBRVx1NzBCOVx1NTFGQlx1NEU4Qlx1NEVGNlxyXG4gICAgdHZUb2dnbGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcclxuICAgICAgICBpZiAoZG91YmFuTW92aWVUdkN1cnJlbnRTd2l0Y2ggIT09ICd0dicpIHtcclxuICAgICAgICAgICAgLy8gXHU2NkY0XHU2NUIwXHU2MzA5XHU5NEFFXHU2ODM3XHU1RjBGXHJcbiAgICAgICAgICAgIHR2VG9nZ2xlLmNsYXNzTGlzdC5hZGQoJ2JnLXBpbmstNjAwJywgJ3RleHQtd2hpdGUnKTtcclxuICAgICAgICAgICAgdHZUb2dnbGUuY2xhc3NMaXN0LnJlbW92ZSgndGV4dC1ncmF5LTMwMCcpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgbW92aWVUb2dnbGUuY2xhc3NMaXN0LnJlbW92ZSgnYmctcGluay02MDAnLCAndGV4dC13aGl0ZScpO1xyXG4gICAgICAgICAgICBtb3ZpZVRvZ2dsZS5jbGFzc0xpc3QuYWRkKCd0ZXh0LWdyYXktMzAwJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBkb3ViYW5Nb3ZpZVR2Q3VycmVudFN3aXRjaCA9ICd0dic7XHJcbiAgICAgICAgICAgIGRvdWJhbkN1cnJlbnRUYWcgPSAnXHU3MEVEXHU5NUU4JztcclxuXHJcbiAgICAgICAgICAgIC8vIFx1OTFDRFx1NjVCMFx1NTJBMFx1OEY3RFx1OEM0Nlx1NzRFM1x1NTE4NVx1NUJCOVxyXG4gICAgICAgICAgICByZW5kZXJEb3ViYW5UYWdzKHR2VGFncyk7XHJcblxyXG4gICAgICAgICAgICAvLyBcdTYzNjJcdTRFMDBcdTYyNzlcdTYzMDlcdTk0QUVcdTRFOEJcdTRFRjZcdTc2RDFcdTU0MkNcclxuICAgICAgICAgICAgc2V0dXBEb3ViYW5SZWZyZXNoQnRuKCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBcdTUyMURcdTU5Q0JcdTUyQTBcdThGN0RcdTcwRURcdTk1RThcdTUxODVcdTVCQjlcclxuICAgICAgICAgICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdkb3ViYW5FbmFibGVkJykgPT09ICd0cnVlJykge1xyXG4gICAgICAgICAgICAgICAgcmVuZGVyUmVjb21tZW5kKGRvdWJhbkN1cnJlbnRUYWcsIGRvdWJhblBhZ2VTaXplLCBkb3ViYW5QYWdlU3RhcnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8vIFx1NkUzMlx1NjdEM1x1OEM0Nlx1NzRFM1x1NjgwN1x1N0I3RVx1OTAwOVx1NjJFOVx1NTY2OFxyXG5mdW5jdGlvbiByZW5kZXJEb3ViYW5UYWdzKHRhZ3MpIHtcclxuICAgIGNvbnN0IHRhZ0NvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkb3ViYW4tdGFncycpO1xyXG4gICAgaWYgKCF0YWdDb250YWluZXIpIHJldHVybjtcclxuICAgIFxyXG4gICAgLy8gXHU3ODZFXHU1QjlBXHU1RjUzXHU1MjREXHU1RTk0XHU4QkU1XHU0RjdGXHU3NTI4XHU3Njg0XHU2ODA3XHU3QjdFXHU1MjE3XHU4ODY4XHJcbiAgICBjb25zdCBjdXJyZW50VGFncyA9IGRvdWJhbk1vdmllVHZDdXJyZW50U3dpdGNoID09PSAnbW92aWUnID8gbW92aWVUYWdzIDogdHZUYWdzO1xyXG4gICAgXHJcbiAgICAvLyBcdTZFMDVcdTdBN0FcdTY4MDdcdTdCN0VcdTVCQjlcdTU2NjhcclxuICAgIHRhZ0NvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcclxuXHJcbiAgICAvLyBcdTUxNDhcdTZERkJcdTUyQTBcdTY4MDdcdTdCN0VcdTdCQTFcdTc0MDZcdTYzMDlcdTk0QUVcclxuICAgIGNvbnN0IG1hbmFnZUJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG4gICAgbWFuYWdlQnRuLmNsYXNzTmFtZSA9ICdweS0xLjUgcHgtMy41IHJvdW5kZWQgdGV4dC1zbSBmb250LW1lZGl1bSB0cmFuc2l0aW9uLWFsbCBkdXJhdGlvbi0zMDAgYmctWyMxYTFhMWFdIHRleHQtZ3JheS0zMDAgaG92ZXI6YmctcGluay03MDAgaG92ZXI6dGV4dC13aGl0ZSBib3JkZXIgYm9yZGVyLVsjMzMzXSBob3Zlcjpib3JkZXItd2hpdGUnO1xyXG4gICAgbWFuYWdlQnRuLmlubmVySFRNTCA9ICc8c3BhbiBjbGFzcz1cImZsZXggaXRlbXMtY2VudGVyXCI+PHN2ZyBjbGFzcz1cInctMyBoLTMgbXItMVwiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiPjxwYXRoIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiIHN0cm9rZS13aWR0aD1cIjJcIiBkPVwiTTEyIDZ2Nm0wIDB2Nm0wLTZoNm0tNiAwSDZcIj48L3BhdGg+PC9zdmc+XHU3QkExXHU3NDA2XHU2ODA3XHU3QjdFPC9zcGFuPic7XHJcbiAgICBtYW5hZ2VCdG4ub25jbGljayA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHNob3dUYWdNYW5hZ2VNb2RhbCgpO1xyXG4gICAgfTtcclxuICAgIHRhZ0NvbnRhaW5lci5hcHBlbmRDaGlsZChtYW5hZ2VCdG4pO1xyXG5cclxuICAgIC8vIFx1NkRGQlx1NTJBMFx1NjI0MFx1NjcwOVx1NjgwN1x1N0I3RVxyXG4gICAgY3VycmVudFRhZ3MuZm9yRWFjaCh0YWcgPT4ge1xyXG4gICAgICAgIGNvbnN0IGJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1OEJCRVx1N0Y2RVx1NjgzN1x1NUYwRlxyXG4gICAgICAgIGxldCBidG5DbGFzcyA9ICdweS0xLjUgcHgtMy41IHJvdW5kZWQgdGV4dC1zbSBmb250LW1lZGl1bSB0cmFuc2l0aW9uLWFsbCBkdXJhdGlvbi0zMDAgYm9yZGVyICc7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU1RjUzXHU1MjREXHU5MDA5XHU0RTJEXHU3Njg0XHU2ODA3XHU3QjdFXHU0RjdGXHU3NTI4XHU5QUQ4XHU0RUFFXHU2ODM3XHU1RjBGXHJcbiAgICAgICAgaWYgKHRhZyA9PT0gZG91YmFuQ3VycmVudFRhZykge1xyXG4gICAgICAgICAgICBidG5DbGFzcyArPSAnYmctcGluay02MDAgdGV4dC13aGl0ZSBzaGFkb3ctbWQgYm9yZGVyLXdoaXRlJztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBidG5DbGFzcyArPSAnYmctWyMxYTFhMWFdIHRleHQtZ3JheS0zMDAgaG92ZXI6YmctcGluay03MDAgaG92ZXI6dGV4dC13aGl0ZSBib3JkZXItWyMzMzNdIGhvdmVyOmJvcmRlci13aGl0ZSc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGJ0bi5jbGFzc05hbWUgPSBidG5DbGFzcztcclxuICAgICAgICBidG4udGV4dENvbnRlbnQgPSB0YWc7XHJcbiAgICAgICAgXHJcbiAgICAgICAgYnRuLm9uY2xpY2sgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgaWYgKGRvdWJhbkN1cnJlbnRUYWcgIT09IHRhZykge1xyXG4gICAgICAgICAgICAgICAgZG91YmFuQ3VycmVudFRhZyA9IHRhZztcclxuICAgICAgICAgICAgICAgIGRvdWJhblBhZ2VTdGFydCA9IDA7XHJcbiAgICAgICAgICAgICAgICByZW5kZXJSZWNvbW1lbmQoZG91YmFuQ3VycmVudFRhZywgZG91YmFuUGFnZVNpemUsIGRvdWJhblBhZ2VTdGFydCk7XHJcbiAgICAgICAgICAgICAgICByZW5kZXJEb3ViYW5UYWdzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRhZ0NvbnRhaW5lci5hcHBlbmRDaGlsZChidG4pO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8vIFx1OEJCRVx1N0Y2RVx1NjM2Mlx1NEUwMFx1NjI3OVx1NjMwOVx1OTRBRVx1NEU4Qlx1NEVGNlxyXG5mdW5jdGlvbiBzZXR1cERvdWJhblJlZnJlc2hCdG4oKSB7XHJcbiAgICAvLyBcdTRGRUVcdTU5MERJRFx1RkYwQ1x1NEY3Rlx1NzUyOFx1NkI2M1x1Nzg2RVx1NzY4NElEIGRvdWJhbi1yZWZyZXNoIFx1ODAwQ1x1NEUwRFx1NjYyRiBkb3ViYW4tcmVmcmVzaC1idG5cclxuICAgIGNvbnN0IGJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkb3ViYW4tcmVmcmVzaCcpO1xyXG4gICAgaWYgKCFidG4pIHJldHVybjtcclxuICAgIFxyXG4gICAgYnRuLm9uY2xpY2sgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBkb3ViYW5QYWdlU3RhcnQgKz0gZG91YmFuUGFnZVNpemU7XHJcbiAgICAgICAgaWYgKGRvdWJhblBhZ2VTdGFydCA+IDkgKiBkb3ViYW5QYWdlU2l6ZSkge1xyXG4gICAgICAgICAgICBkb3ViYW5QYWdlU3RhcnQgPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZW5kZXJSZWNvbW1lbmQoZG91YmFuQ3VycmVudFRhZywgZG91YmFuUGFnZVNpemUsIGRvdWJhblBhZ2VTdGFydCk7XHJcbiAgICB9O1xyXG59XHJcblxyXG5mdW5jdGlvbiBmZXRjaERvdWJhblRhZ3MoKSB7XHJcbiAgICBjb25zdCBtb3ZpZVRhZ3NUYXJnZXQgPSBgaHR0cHM6Ly9tb3ZpZS5kb3ViYW4uY29tL2ovc2VhcmNoX3RhZ3M/dHlwZT1tb3ZpZWBcclxuICAgIGZldGNoRG91YmFuRGF0YShtb3ZpZVRhZ3NUYXJnZXQpXHJcbiAgICAgICAgLnRoZW4oZGF0YSA9PiB7XHJcbiAgICAgICAgICAgIG1vdmllVGFncyA9IGRhdGEudGFncztcclxuICAgICAgICAgICAgaWYgKGRvdWJhbk1vdmllVHZDdXJyZW50U3dpdGNoID09PSAnbW92aWUnKSB7XHJcbiAgICAgICAgICAgICAgICByZW5kZXJEb3ViYW5UYWdzKG1vdmllVGFncyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaChlcnJvciA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJcdTgzQjdcdTUzRDZcdThDNDZcdTc0RTNcdTcwRURcdTk1RThcdTc1MzVcdTVGNzFcdTY4MDdcdTdCN0VcdTU5MzFcdThEMjVcdUZGMUFcIiwgZXJyb3IpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgY29uc3QgdHZUYWdzVGFyZ2V0ID0gYGh0dHBzOi8vbW92aWUuZG91YmFuLmNvbS9qL3NlYXJjaF90YWdzP3R5cGU9dHZgXHJcbiAgICBmZXRjaERvdWJhbkRhdGEodHZUYWdzVGFyZ2V0KVxyXG4gICAgICAgLnRoZW4oZGF0YSA9PiB7XHJcbiAgICAgICAgICAgIHR2VGFncyA9IGRhdGEudGFncztcclxuICAgICAgICAgICAgaWYgKGRvdWJhbk1vdmllVHZDdXJyZW50U3dpdGNoID09PSAndHYnKSB7XHJcbiAgICAgICAgICAgICAgICByZW5kZXJEb3ViYW5UYWdzKHR2VGFncyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgLmNhdGNoKGVycm9yID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIlx1ODNCN1x1NTNENlx1OEM0Nlx1NzRFM1x1NzBFRFx1OTVFOFx1NzUzNVx1ODlDNlx1NTI2N1x1NjgwN1x1N0I3RVx1NTkzMVx1OEQyNVx1RkYxQVwiLCBlcnJvcik7XHJcbiAgICAgICAgfSk7XHJcbn1cclxuXHJcbi8vIFx1NkUzMlx1NjdEM1x1NzBFRFx1OTVFOFx1NjNBOFx1ODM1MFx1NTE4NVx1NUJCOVxyXG5mdW5jdGlvbiByZW5kZXJSZWNvbW1lbmQodGFnLCBwYWdlTGltaXQsIHBhZ2VTdGFydCkge1xyXG4gICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkb3ViYW4tcmVzdWx0c1wiKTtcclxuICAgIGlmICghY29udGFpbmVyKSByZXR1cm47XHJcblxyXG4gICAgY29uc3QgbG9hZGluZ092ZXJsYXlIVE1MID0gYFxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJhYnNvbHV0ZSBpbnNldC0wIGJnLWJsYWNrLzgwIGJhY2tkcm9wLWJsdXItc20gZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgei0xMFwiPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXJcIj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ3LTYgaC02IGJvcmRlci0yIGJvcmRlci1waW5rLTUwMCBib3JkZXItdC10cmFuc3BhcmVudCByb3VuZGVkLWZ1bGwgYW5pbWF0ZS1zcGluIGlubGluZS1ibG9ja1wiPjwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJ0ZXh0LXBpbmstNTAwIG1sLTRcIj5cdTUyQTBcdThGN0RcdTRFMkQuLi48L3NwYW4+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgYDtcclxuXHJcbiAgICBjb250YWluZXIuY2xhc3NMaXN0LmFkZChcInJlbGF0aXZlXCIpO1xyXG4gICAgY29udGFpbmVyLmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJywgbG9hZGluZ092ZXJsYXlIVE1MKTtcclxuICAgIFxyXG4gICAgY29uc3QgdGFyZ2V0ID0gYGh0dHBzOi8vbW92aWUuZG91YmFuLmNvbS9qL3NlYXJjaF9zdWJqZWN0cz90eXBlPSR7ZG91YmFuTW92aWVUdkN1cnJlbnRTd2l0Y2h9JnRhZz0ke3RhZ30mc29ydD1yZWNvbW1lbmQmcGFnZV9saW1pdD0ke3BhZ2VMaW1pdH0mcGFnZV9zdGFydD0ke3BhZ2VTdGFydH1gO1xyXG4gICAgXHJcbiAgICAvLyBcdTRGN0ZcdTc1MjhcdTkwMUFcdTc1MjhcdThCRjdcdTZDNDJcdTUxRkRcdTY1NzBcclxuICAgIGZldGNoRG91YmFuRGF0YSh0YXJnZXQpXHJcbiAgICAgICAgLnRoZW4oZGF0YSA9PiB7XHJcbiAgICAgICAgICAgIHJlbmRlckRvdWJhbkNhcmRzKGRhdGEsIGNvbnRhaW5lcik7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goZXJyb3IgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiXHU4M0I3XHU1M0Q2XHU4QzQ2XHU3NEUzXHU2NTcwXHU2MzZFXHU1OTMxXHU4RDI1XHVGRjFBXCIsIGVycm9yKTtcclxuICAgICAgICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9IGBcclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtc3Bhbi1mdWxsIHRleHQtY2VudGVyIHB5LThcIj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGV4dC1yZWQtNDAwXCI+XHUyNzRDIFx1ODNCN1x1NTNENlx1OEM0Nlx1NzRFM1x1NjU3MFx1NjM2RVx1NTkzMVx1OEQyNVx1RkYwQ1x1OEJGN1x1N0EwRFx1NTQwRVx1OTFDRFx1OEJENTwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0ZXh0LWdyYXktNTAwIHRleHQtc20gbXQtMlwiPlx1NjNEMFx1NzkzQVx1RkYxQVx1NEY3Rlx1NzUyOFZQTlx1NTNFRlx1ODBGRFx1NjcwOVx1NTJBOVx1NEU4RVx1ODlFM1x1NTFCM1x1NkI2NFx1OTVFRVx1OTg5ODwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIGA7XHJcbiAgICAgICAgfSk7XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGZldGNoRG91YmFuRGF0YSh1cmwpIHtcclxuICAgIC8vIFx1NkRGQlx1NTJBMFx1OEQ4NVx1NjVGNlx1NjNBN1x1NTIzNlxyXG4gICAgY29uc3QgY29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcclxuICAgIGNvbnN0IHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCkgPT4gY29udHJvbGxlci5hYm9ydCgpLCAxMDAwMCk7IC8vIDEwXHU3OUQyXHU4RDg1XHU2NUY2XHJcbiAgICBcclxuICAgIC8vIFx1OEJCRVx1N0Y2RVx1OEJGN1x1NkM0Mlx1OTAwOVx1OTg3OVx1RkYwQ1x1NTMwNVx1NjJFQ1x1NEZFMVx1NTNGN1x1NTQ4Q1x1NTkzNFx1OTBFOFxyXG4gICAgY29uc3QgZmV0Y2hPcHRpb25zID0ge1xyXG4gICAgICAgIHNpZ25hbDogY29udHJvbGxlci5zaWduYWwsXHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAnVXNlci1BZ2VudCc6ICdNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvMTIxLjAuMC4wIFNhZmFyaS81MzcuMzYnLFxyXG4gICAgICAgICAgICAnUmVmZXJlcic6ICdodHRwczovL21vdmllLmRvdWJhbi5jb20vJyxcclxuICAgICAgICAgICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L3BsYWluLCAqLyonLFxyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTkyNzRcdTY3NDNcdTUzQzJcdTY1NzBcdTUyMzBcdTRFRTNcdTc0MDZVUkxcclxuICAgICAgICBjb25zdCBwcm94aWVkVXJsID0gYXdhaXQgd2luZG93LlByb3h5QXV0aD8uYWRkQXV0aFRvUHJveHlVcmwgPyBcclxuICAgICAgICAgICAgYXdhaXQgd2luZG93LlByb3h5QXV0aC5hZGRBdXRoVG9Qcm94eVVybChQUk9YWV9VUkwgKyBlbmNvZGVVUklDb21wb25lbnQodXJsKSkgOlxyXG4gICAgICAgICAgICBQUk9YWV9VUkwgKyBlbmNvZGVVUklDb21wb25lbnQodXJsKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgLy8gXHU1QzFEXHU4QkQ1XHU3NkY0XHU2M0E1XHU4QkJGXHU5NUVFXHVGRjA4XHU4QzQ2XHU3NEUzQVBJXHU1M0VGXHU4MEZEXHU1MTQxXHU4QkI4XHU5MEU4XHU1MjA2Q09SU1x1OEJGN1x1NkM0Mlx1RkYwOVxyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2gocHJveGllZFVybCwgZmV0Y2hPcHRpb25zKTtcclxuICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSFRUUCBlcnJvciEgU3RhdHVzOiAke3Jlc3BvbnNlLnN0YXR1c31gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJcdThDNDZcdTc0RTMgQVBJIFx1OEJGN1x1NkM0Mlx1NTkzMVx1OEQyNVx1RkYwOFx1NzZGNFx1NjNBNVx1NEVFM1x1NzQwNlx1RkYwOVx1RkYxQVwiLCBlcnIpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NTkzMVx1OEQyNVx1NTQwRVx1NUMxRFx1OEJENVx1NTkwN1x1NzUyOFx1NjVCOVx1NkNENVx1RkYxQVx1NEY1Q1x1NEUzQVx1NTkwN1x1OTAwOVxyXG4gICAgICAgIGNvbnN0IGZhbGxiYWNrVXJsID0gYGh0dHBzOi8vYXBpLmFsbG9yaWdpbnMud2luL2dldD91cmw9JHtlbmNvZGVVUklDb21wb25lbnQodXJsKX1gO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZhbGxiYWNrUmVzcG9uc2UgPSBhd2FpdCBmZXRjaChmYWxsYmFja1VybCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoIWZhbGxiYWNrUmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgXHU1OTA3XHU3NTI4QVBJXHU4QkY3XHU2QzQyXHU1OTMxXHU4RDI1ISBcdTcyQjZcdTYwMDE6ICR7ZmFsbGJhY2tSZXNwb25zZS5zdGF0dXN9YCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBmYWxsYmFja1Jlc3BvbnNlLmpzb24oKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFx1ODlFM1x1Njc5MFx1NTM5Rlx1NTlDQlx1NTE4NVx1NUJCOVxyXG4gICAgICAgICAgICBpZiAoZGF0YSAmJiBkYXRhLmNvbnRlbnRzKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShkYXRhLmNvbnRlbnRzKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlx1NjVFMFx1NkNENVx1ODNCN1x1NTNENlx1NjcwOVx1NjU0OFx1NjU3MFx1NjM2RVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGZhbGxiYWNrRXJyKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJcdThDNDZcdTc0RTMgQVBJIFx1NTkwN1x1NzUyOFx1OEJGN1x1NkM0Mlx1NEU1Rlx1NTkzMVx1OEQyNVx1RkYxQVwiLCBmYWxsYmFja0Vycik7XHJcbiAgICAgICAgICAgIHRocm93IGZhbGxiYWNrRXJyOyAvLyBcdTU0MTFcdTRFMEFcdTYyOUJcdTUxRkFcdTk1MTlcdThCRUZcdUZGMENcdThCQTlcdThDMDNcdTc1MjhcdTgwMDVcdTU5MDRcdTc0MDZcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBcdThDNDZcdTc0RTNcdTcwRURcdTk1RThcdTVDMDFcdTk3NjJcdUZGMUFcdTRGN0ZcdTc1MjhcdTg5QzZcdTk4OTFcdTZFOTBcdTVDMDFcdTk3NjJcdTY2RkZcdTYzNjJcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4vLyBcdThGN0JcdTkxQ0ZcdTVFNzZcdTUzRDFcdTYzQTdcdTUyMzZcdUZGMENcdTkwN0ZcdTUxNERcdTRFMDBcdTZCMjFcdTYwMjdcdTg5RTZcdTUzRDFcdThGQzdcdTU5MUFcdTY0MUNcdTdEMjJcdThCRjdcdTZDNDJcclxuY29uc3QgRE9VQkFOX0NPVkVSX0ZFVENIX0NPTkNVUlJFTkNZID0gNDtcclxubGV0IF9kb3ViYW5Db3ZlckFjdGl2ZUNvdW50ID0gMDtcclxuY29uc3QgX2RvdWJhbkNvdmVyUGVuZGluZ1F1ZXVlID0gW107XHJcblxyXG4vLyBcdTY4MDdcdTk4OTggLT4gXHU1QzAxXHU5NzYyVVJMIFx1NzY4NFx1N0YxM1x1NUI1OFx1RkYwOFx1NEYxQVx1OEJERFx1N0VBN1x1RkYxQlx1NTIzN1x1NjVCMFx1OTg3NVx1OTc2Mlx1NEYxQVx1NEUyMlx1NTkzMVx1RkYwOVxyXG5jb25zdCBfZG91YmFuVGl0bGVUb0NvdmVyQ2FjaGUgPSBuZXcgTWFwKCk7XHJcblxyXG5mdW5jdGlvbiBfZG91YmFuUnVuTmV4dENvdmVyVGFzaygpIHtcclxuICAgIHdoaWxlIChfZG91YmFuQ292ZXJBY3RpdmVDb3VudCA8IERPVUJBTl9DT1ZFUl9GRVRDSF9DT05DVVJSRU5DWSAmJiBfZG91YmFuQ292ZXJQZW5kaW5nUXVldWUubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGNvbnN0IHRhc2sgPSBfZG91YmFuQ292ZXJQZW5kaW5nUXVldWUuc2hpZnQoKTtcclxuICAgICAgICBfZG91YmFuQ292ZXJBY3RpdmVDb3VudCsrO1xyXG4gICAgICAgIHRhc2soKVxyXG4gICAgICAgICAgICAuY2F0Y2goKCkgPT4ge30pXHJcbiAgICAgICAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIF9kb3ViYW5Db3ZlckFjdGl2ZUNvdW50LS07XHJcbiAgICAgICAgICAgICAgICBfZG91YmFuUnVuTmV4dENvdmVyVGFzaygpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gX2RvdWJhbkVucXVldWVDb3ZlclRhc2soZm4pIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgX2RvdWJhbkNvdmVyUGVuZGluZ1F1ZXVlLnB1c2goYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZm4oKTtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUocmVzKTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgX2RvdWJhblJ1bk5leHRDb3ZlclRhc2soKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBfZG91YmFuTm9ybWFsaXplVGl0bGVGb3JTZWFyY2godGl0bGUpIHtcclxuICAgIHJldHVybiAodGl0bGUgfHwgJycpXHJcbiAgICAgICAgLnRvU3RyaW5nKClcclxuICAgICAgICAudHJpbSgpXHJcbiAgICAgICAgLy8gXHU1RTM4XHU4OUMxXHU3Njg0XHU3MjQ3XHU1NDBEXHU1NDBFXHU3RjAwXHU1OTA0XHU3NDA2XHVGRjFBXHU1M0JCXHU2Mzg5XHU2MkVDXHU1M0Y3XHU1MTg1XHU1QkI5XHJcbiAgICAgICAgLnJlcGxhY2UoL1xccypbXHVGRjA4KF0uKj9bKVx1RkYwOV1cXHMqJC9nLCAnJylcclxuICAgICAgICAvLyBcdTUzQkJcdTYzODlcdTVCNjMvXHU5NkM2L1x1NjcxRlx1N0I0OVx1NUMzRVx1NURGNFx1RkYwOFx1NUMzRFx1OTFDRlx1NEZERFx1NUI4OFx1RkYwOVxyXG4gICAgICAgIC5yZXBsYWNlKC9cXHMqKFx1N0IyQ1xccypcXGQrXFxzKihcdTVCNjN8XHU5NkM2fFx1NjcxRikpXFxzKiQvZywgJycpXHJcbiAgICAgICAgLnRyaW0oKTtcclxufVxyXG5cclxuZnVuY3Rpb24gX2RvdWJhbk5vcm1hbGl6ZUNvdmVyVXJsKHVybCkge1xyXG4gICAgaWYgKCF1cmwpIHJldHVybiBudWxsO1xyXG4gICAgbGV0IHUgPSBTdHJpbmcodXJsKS50cmltKCk7XHJcbiAgICBpZiAoIXUpIHJldHVybiBudWxsO1xyXG5cclxuICAgIC8vIFx1NUY4OFx1NTkxQVx1NkU5MFx1NEYxQVx1OEZENFx1NTZERSAvL3h4L3h4LmpwZ1xyXG4gICAgaWYgKHUuc3RhcnRzV2l0aCgnLy8nKSkgdSA9ICdodHRwczonICsgdTtcclxuXHJcbiAgICAvLyBcdTY3ODFcdTVDMTFcdTY1NzBcdTRGMUFcdThGRDRcdTU2REUgaHR0cDovLy8veHhcclxuICAgIHUgPSB1LnJlcGxhY2UoL15odHRwOlxcL1xcLysvLCAnaHR0cDovLycpO1xyXG4gICAgdSA9IHUucmVwbGFjZSgvXmh0dHBzOlxcL1xcLysvLCAnaHR0cHM6Ly8nKTtcclxuXHJcbiAgICAvLyBcdTRFMDBcdTRFOUJcdTZFOTBcdTRGMUFcdThGRDRcdTU2REVcdTRFMERcdTVFMjZcdTUzNEZcdThCQUVcdTc2ODRcdTc2RjhcdTVCRjlcdThERUZcdTVGODRcdUZGMENcdThGRDlcdTkxQ0NcdTRFMERcdTY0QzVcdTgxRUFcdTYyRkNcdTU3REZcdTU0MERcdUZGMENcdTc2RjRcdTYzQTVcdTY1M0VcdTVGMDNcclxuICAgIGlmICghL15odHRwcz86XFwvXFwvL2kudGVzdCh1KSkgcmV0dXJuIG51bGw7XHJcblxyXG4gICAgcmV0dXJuIHU7XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIF9kb3ViYW5TZWFyY2hGaXJzdENvdmVyRnJvbVZpZGVvU291cmNlcyh0aXRsZSkge1xyXG4gICAgY29uc3QgcmF3VGl0bGUgPSAodGl0bGUgfHwgJycpLnRvU3RyaW5nKCkudHJpbSgpO1xyXG4gICAgY29uc3Qgbm9ybWFsaXplZFRpdGxlID0gX2RvdWJhbk5vcm1hbGl6ZVRpdGxlRm9yU2VhcmNoKHJhd1RpdGxlKTtcclxuICAgIGNvbnN0IGNhY2hlS2V5ID0gbm9ybWFsaXplZFRpdGxlIHx8IHJhd1RpdGxlO1xyXG5cclxuICAgIGlmICghY2FjaGVLZXkpIHJldHVybiBudWxsO1xyXG5cclxuICAgIC8vIFx1NTQ3RFx1NEUyRFx1N0YxM1x1NUI1OFx1NzZGNFx1NjNBNVx1OEZENFx1NTZERVx1RkYwOFx1NjVFMFx1OEJCQVx1NjYyRlx1NTQ3RFx1NEUyRFx1NUMwMVx1OTc2Mlx1OEZEOFx1NjYyRlx1NTQ3RFx1NEUyRCBudWxsXHVGRjBDXHU5MEZEXHU5MDdGXHU1MTREXHU5MUNEXHU1OTBEXHU4QkY3XHU2QzQyXHVGRjA5XHJcbiAgICBpZiAoX2RvdWJhblRpdGxlVG9Db3ZlckNhY2hlLmhhcyhjYWNoZUtleSkpIHtcclxuICAgICAgICByZXR1cm4gX2RvdWJhblRpdGxlVG9Db3ZlckNhY2hlLmdldChjYWNoZUtleSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHU5OTk2XHU5ODc1XHU1QzAxXHU5NzYyXHU1NkZBXHU1QjlBXHU4RDcwXHU4MzA1XHU1M0YwXHU2RTkwXHVGRjBDXHU5MDdGXHU1MTREXHU4QzQ2XHU3NEUzXHU1QzAxXHU5NzYyXHU1QjU3XHU2QkI1XHU1OTMxXHU2NTQ4XHJcbiAgICBjb25zdCBhcGlJZHMgPSBbJ21hb3RhaSddO1xyXG5cclxuICAgIC8vIFx1NTk4Mlx1Njc5QyBzZWFyY2hCeUFQSUFuZEtleVdvcmQgXHU0RTBEXHU1QjU4XHU1NzI4XHVGRjBDXHU3NkY0XHU2M0E1XHU4RkQ0XHU1NkRFIG51bGxcdUZGMDhcdTkwN0ZcdTUxNERcdTYyQTVcdTk1MTlcdUZGMDlcclxuICAgIGlmICh0eXBlb2Ygc2VhcmNoQnlBUElBbmRLZXlXb3JkICE9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgX2RvdWJhblRpdGxlVG9Db3ZlckNhY2hlLnNldChub3JtYWxpemVkVGl0bGUsIG51bGwpO1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1NEUzQVx1NEU4Nlx1OTA3Rlx1NTE0RFx1OEJGN1x1NkM0Mlx1OThDRVx1NjZCNFx1RkYwQ1x1OEZEOVx1OTFDQ1x1NTA1QVx1NUU3Nlx1NTNEMVx1OTY1MFx1NTIzNlxyXG4gICAgY29uc3QgY292ZXJVcmwgPSBhd2FpdCBfZG91YmFuRW5xdWV1ZUNvdmVyVGFzayhhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgZm9yIChjb25zdCBhcGlJZCBvZiBhcGlJZHMpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIC8vIDEuIFx1NTE0OFx1NzUyOFx1NUY1Mlx1NEUwMFx1NTMxNlx1NjgwN1x1OTg5OFx1NjQxQ1x1N0QyMlx1RkYwOFx1NjZGNFx1NUU3Mlx1NTFDMFx1RkYwQ1x1NTQ3RFx1NEUyRFx1NzM4N1x1OTAxQVx1NUUzOFx1NjZGNFx1OUFEOFx1RkYwOVxyXG4gICAgICAgICAgICAgICAgaWYgKG5vcm1hbGl6ZWRUaXRsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBzZWFyY2hCeUFQSUFuZEtleVdvcmQoYXBpSWQsIG5vcm1hbGl6ZWRUaXRsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocmVzdWx0cykgJiYgcmVzdWx0cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpcnN0ID0gcmVzdWx0c1swXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGljID0gX2RvdWJhbk5vcm1hbGl6ZUNvdmVyVXJsKGZpcnN0Py52b2RfcGljKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBpYykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBpYztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyAyLiBcdTVGNTJcdTRFMDBcdTUzMTZcdTY4MDdcdTk4OThcdTZDQTFcdTU0N0RcdTRFMkRcdTY1RjZcdUZGMENcdTUxOERcdTc1MjhcdTUzOUZcdTU5Q0JcdTY4MDdcdTk4OThcdTUxNUNcdTVFOTVcdTY0MUNcdTdEMjJcdTRFMDBcdTZCMjFcclxuICAgICAgICAgICAgICAgIGlmIChyYXdUaXRsZSAmJiByYXdUaXRsZSAhPT0gbm9ybWFsaXplZFRpdGxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmF3UmVzdWx0cyA9IGF3YWl0IHNlYXJjaEJ5QVBJQW5kS2V5V29yZChhcGlJZCwgcmF3VGl0bGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHJhd1Jlc3VsdHMpICYmIHJhd1Jlc3VsdHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaXJzdFJhdyA9IHJhd1Jlc3VsdHNbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJhd1BpYyA9IF9kb3ViYW5Ob3JtYWxpemVDb3ZlclVybChmaXJzdFJhdz8udm9kX3BpYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyYXdQaWMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByYXdQaWM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIC8vIFx1NTM1NVx1NEUyQVx1NkU5MFx1NTkzMVx1OEQyNVx1NEUwRFx1NUY3MVx1NTRDRFx1NTE3Nlx1NEVENlx1NkU5MFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfSk7XHJcblxyXG4gICAgX2RvdWJhblRpdGxlVG9Db3ZlckNhY2hlLnNldChjYWNoZUtleSwgY292ZXJVcmwpO1xyXG4gICAgcmV0dXJuIGNvdmVyVXJsO1xyXG59XHJcblxyXG5mdW5jdGlvbiBfZG91YmFuVXBkYXRlQ292ZXJJbWdCeUNhcmRJZChjYXJkSWQsIGNvdmVyVXJsKSB7XHJcbiAgICBpZiAoIWNhcmRJZCB8fCAhY292ZXJVcmwpIHJldHVybjtcclxuICAgIGNvbnN0IGltZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCNkb3ViYW4tcmVzdWx0cyBbZGF0YS1kb3ViYW4tY2FyZC1pZD1cIiR7Y2FyZElkfVwiXSBpbWdbZGF0YS1yb2xlPVwiZG91YmFuLWNvdmVyXCJdYCk7XHJcbiAgICBpZiAoIWltZykgcmV0dXJuO1xyXG5cclxuICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NTZGRVx1NzI0N1x1NURGMlx1N0VDRlx1NjYyRlx1NTQwQ1x1NEUwMFx1NEUyQSBVUkwgXHU1QzMxXHU0RTBEXHU2NkY0XHU2NUIwXHJcbiAgICBpZiAoaW1nLmdldEF0dHJpYnV0ZSgnc3JjJykgPT09IGNvdmVyVXJsKSByZXR1cm47XHJcblxyXG4gICAgLy8gXHU0RkREXHU3NTU5XHU1MTVDXHU1RTk1IG9uZXJyb3JcdUZGMDhcdTkwN0ZcdTUxNERcdTVDMDFcdTk3NjIgNDA0IFx1NjVGNlx1NTZGRVx1NzI0N1x1ODhDMlx1NUYwMFx1RkYwOVxyXG4gICAgaW1nLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5vbmVycm9yID0gbnVsbDtcclxuICAgICAgICB0aGlzLnNyYyA9ICdpbWFnZS9ub21lZGlhLnBuZyc7XHJcbiAgICAgICAgdGhpcy5jbGFzc0xpc3QuYWRkKCdvYmplY3QtY29udGFpbicpO1xyXG4gICAgfTtcclxuXHJcbiAgICBpbWcuc2V0QXR0cmlidXRlKCdzcmMnLCBjb3ZlclVybCk7XHJcbiAgICBpbWcuY2xhc3NMaXN0LnJlbW92ZSgnb2JqZWN0LWNvbnRhaW4nKTtcclxuICAgIGltZy5jbGFzc0xpc3QuYWRkKCdvYmplY3QtY292ZXInKTtcclxuXHJcbiAgICAvLyBcdTRFQzVcdTU3MjhcdTYyMTBcdTUyOUZcdTYyRkZcdTUyMzBcdTVDMDFcdTk3NjJcdTY1RjZcdTYyNTNcdTUzNzBcdTRFMDBcdTZCMjFcdThDMDNcdThCRDVcdTY1RTVcdTVGRDdcclxuICAgIGlmICghaW1nLmRhdGFzZXQuY292ZXJMb2dnZWQpIHtcclxuICAgICAgICBpbWcuZGF0YXNldC5jb3ZlckxvZ2dlZCA9ICcxJztcclxuICAgICAgICBjb25zb2xlLmRlYnVnKCdbZG91YmFuXSBjb3ZlciByZXBsYWNlZDonLCB7IGNhcmRJZCwgY292ZXJVcmwgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIFx1NjJCRFx1NTNENlx1NkUzMlx1NjdEM1x1OEM0Nlx1NzRFM1x1NTM2MVx1NzI0N1x1NzY4NFx1OTAzQlx1OEY5MVx1NTIzMFx1NTM1NVx1NzJFQ1x1NTFGRFx1NjU3MFxyXG5mdW5jdGlvbiByZW5kZXJEb3ViYW5DYXJkcyhkYXRhLCBjb250YWluZXIpIHtcclxuICAgIC8vIFx1NTIxQlx1NUVGQVx1NjU4N1x1Njg2M1x1NzI0N1x1NkJCNVx1NEVFNVx1NjNEMFx1OUFEOFx1NjAyN1x1ODBGRFxyXG4gICAgY29uc3QgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XHJcblxyXG4gICAgLy8gXHU1OTgyXHU2NzlDXHU2Q0ExXHU2NzA5XHU2NTcwXHU2MzZFXHJcbiAgICBpZiAoIWRhdGEuc3ViamVjdHMgfHwgZGF0YS5zdWJqZWN0cy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICBjb25zdCBlbXB0eUVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBlbXB0eUVsLmNsYXNzTmFtZSA9IFwiY29sLXNwYW4tZnVsbCB0ZXh0LWNlbnRlciBweS04XCI7XHJcbiAgICAgICAgZW1wdHlFbC5pbm5lckhUTUwgPSBgXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0ZXh0LXBpbmstNTAwXCI+XHUyNzRDIFx1NjY4Mlx1NjVFMFx1NjU3MFx1NjM2RVx1RkYwQ1x1OEJGN1x1NUMxRFx1OEJENVx1NTE3Nlx1NEVENlx1NTIwNlx1N0M3Qlx1NjIxNlx1NTIzN1x1NjVCMDwvZGl2PlxyXG4gICAgICAgIGA7XHJcbiAgICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQoZW1wdHlFbCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIFx1NUZBQVx1NzNBRlx1NTIxQlx1NUVGQVx1NkJDRlx1NEUyQVx1NUY3MVx1ODlDNlx1NTM2MVx1NzI0N1xyXG4gICAgICAgIGRhdGEuc3ViamVjdHMuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY2FyZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgICAgIGNhcmQuY2xhc3NOYW1lID0gXCJiZy1bIzExMV0gaG92ZXI6YmctWyMyMjJdIHRyYW5zaXRpb24tYWxsIGR1cmF0aW9uLTMwMCByb3VuZGVkLWxnIG92ZXJmbG93LWhpZGRlbiBmbGV4IGZsZXgtY29sIHRyYW5zZm9ybSBob3ZlcjpzY2FsZS0xMDUgc2hhZG93LW1kIGhvdmVyOnNoYWRvdy1sZ1wiO1xyXG5cclxuICAgICAgICAgICAgLy8gXHU3NTFGXHU2MjEwXHU1MzYxXHU3MjQ3XHU1MTg1XHU1QkI5XHVGRjBDXHU3ODZFXHU0RkREXHU1Qjg5XHU1MTY4XHU2NjNFXHU3OTNBXHVGRjA4XHU5NjMyXHU2QjYyWFNTXHVGRjA5XHJcbiAgICAgICAgICAgIGNvbnN0IHNhZmVUaXRsZSA9IGl0ZW0udGl0bGVcclxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKC88L2csICcmbHQ7JylcclxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKC8+L2csICcmZ3Q7JylcclxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXFwiL2csICcmcXVvdDsnKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHNhZmVSYXRlID0gKGl0ZW0ucmF0ZSB8fCBcIlx1NjY4Mlx1NjVFMFwiKVxyXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoLzwvZywgJyZsdDsnKVxyXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoLz4vZywgJyZndDsnKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFx1NUMwMVx1OTc2Mlx1RkYxQVx1NEYxOFx1NTE0OFx1NzUyOFx1ODlDNlx1OTg5MVx1NkU5MFx1NUMwMVx1OTc2Mlx1RkYxQlx1NkUzMlx1NjdEM1x1NjVGNlx1NTE0OFx1NzUyOFx1NTM2MFx1NEY0RFx1NTZGRVx1RkYwQ1x1OTY4Rlx1NTQwRVx1NUYwMlx1NkI2NVx1NjZGRlx1NjM2MlxyXG4gICAgICAgICAgICBjb25zdCBjYXJkSWQgPSBgZGJfJHtkb3ViYW5Nb3ZpZVR2Q3VycmVudFN3aXRjaH1fJHtlbmNvZGVVUklDb21wb25lbnQoaXRlbS50aXRsZSB8fCAnJyl9XyR7aXRlbS5pZCB8fCAnJ31gO1xyXG4gICAgICAgICAgICBjb25zdCBwbGFjZWhvbGRlckNvdmVyID0gJ2ltYWdlL25vbWVkaWEucG5nJztcclxuXHJcbiAgICAgICAgICAgIGNhcmQuc2V0QXR0cmlidXRlKCdkYXRhLWRvdWJhbi1jYXJkLWlkJywgY2FyZElkKTtcclxuXHJcbiAgICAgICAgICAgIGNhcmQuaW5uZXJIVE1MID0gYFxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInJlbGF0aXZlIHctZnVsbCBhc3BlY3QtWzIvM10gb3ZlcmZsb3ctaGlkZGVuIGN1cnNvci1wb2ludGVyXCIgb25jbGljaz1cImZpbGxBbmRTZWFyY2hXaXRoRG91YmFuKCcke3NhZmVUaXRsZX0nKVwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiJHtwbGFjZWhvbGRlckNvdmVyfVwiIGFsdD1cIiR7c2FmZVRpdGxlfVwiIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cInctZnVsbCBoLWZ1bGwgb2JqZWN0LWNvbnRhaW4gYmctYmxhY2sgdHJhbnNpdGlvbi10cmFuc2Zvcm0gZHVyYXRpb24tNTAwIGhvdmVyOnNjYWxlLTExMFwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtcm9sZT1cImRvdWJhbi1jb3ZlclwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uZXJyb3I9XCJ0aGlzLm9uZXJyb3I9bnVsbDsgdGhpcy5zcmM9J2ltYWdlL25vbWVkaWEucG5nJzsgdGhpcy5jbGFzc0xpc3QuYWRkKCdvYmplY3QtY29udGFpbicpO1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRpbmc9XCJsYXp5XCIgcmVmZXJyZXJwb2xpY3k9XCJuby1yZWZlcnJlclwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJhYnNvbHV0ZSBpbnNldC0wIGJnLWdyYWRpZW50LXRvLXQgZnJvbS1ibGFjayB0by10cmFuc3BhcmVudCBvcGFjaXR5LTYwXCI+PC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImFic29sdXRlIGJvdHRvbS0yIGxlZnQtMiBiZy1ibGFjay83MCB0ZXh0LXdoaXRlIHRleHQteHMgcHgtMiBweS0xIHJvdW5kZWQtc21cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJ0ZXh0LXllbGxvdy00MDBcIj5cdTI2MDU8L3NwYW4+ICR7c2FmZVJhdGV9XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImFic29sdXRlIGJvdHRvbS0yIHJpZ2h0LTIgYmctYmxhY2svNzAgdGV4dC13aGl0ZSB0ZXh0LXhzIHB4LTIgcHktMSByb3VuZGVkLXNtIGhvdmVyOmJnLVsjMzMzXSB0cmFuc2l0aW9uLWNvbG9yc1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiJHtpdGVtLnVybH1cIiB0YXJnZXQ9XCJfYmxhbmtcIiByZWw9XCJub29wZW5lciBub3JlZmVycmVyXCIgdGl0bGU9XCJcdTU3MjhcdThDNDZcdTc0RTNcdTY3RTVcdTc3MEJcIiBvbmNsaWNrPVwiZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcdUQ4M0RcdUREMTdcclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicC0yIHRleHQtY2VudGVyIGJnLVsjMTExXVwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz1cImZpbGxBbmRTZWFyY2hXaXRoRG91YmFuKCcke3NhZmVUaXRsZX0nKVwiIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJ0ZXh0LXNtIGZvbnQtbWVkaXVtIHRleHQtd2hpdGUgdHJ1bmNhdGUgdy1mdWxsIGhvdmVyOnRleHQtcGluay00MDAgdHJhbnNpdGlvblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT1cIiR7c2FmZVRpdGxlfVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAke3NhZmVUaXRsZX1cclxuICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICBgO1xyXG5cclxuICAgICAgICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQoY2FyZCk7XHJcblxyXG4gICAgICAgICAgICAvLyBcdTVGMDJcdTZCNjVcdTYyQzlcdTUzRDZcdTg5QzZcdTk4OTFcdTZFOTBcdTVDMDFcdTk3NjJcdTVFNzZcdTY2RkZcdTYzNjJcdUZGMDhcdTkwMDlcdTdCMkNcdTRFMDBcdTRFMkFcdTdFRDNcdTY3OUNcdUZGMDlcclxuICAgICAgICAgICAgX2RvdWJhblNlYXJjaEZpcnN0Q292ZXJGcm9tVmlkZW9Tb3VyY2VzKGl0ZW0udGl0bGUpXHJcbiAgICAgICAgICAgICAgICAudGhlbihjb3ZlclVybCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvdmVyVXJsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9kb3ViYW5VcGRhdGVDb3ZlckltZ0J5Q2FyZElkKGNhcmRJZCwgY292ZXJVcmwpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuY2F0Y2goKCkgPT4ge30pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1NkUwNVx1N0E3QVx1NUU3Nlx1NkRGQlx1NTJBMFx1NjI0MFx1NjcwOVx1NjVCMFx1NTE0M1x1N0QyMFxyXG4gICAgY29udGFpbmVyLmlubmVySFRNTCA9IFwiXCI7XHJcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoZnJhZ21lbnQpO1xyXG59XHJcblxyXG4vLyBcdTkxQ0RcdTdGNkVcdTUyMzBcdTk5OTZcdTk4NzVcclxuZnVuY3Rpb24gcmVzZXRUb0hvbWUoKSB7XHJcbiAgICByZXNldFNlYXJjaEFyZWEoKTtcclxuICAgIHVwZGF0ZURvdWJhblZpc2liaWxpdHkoKTtcclxufVxyXG5cclxuLy8gXHU1MkEwXHU4RjdEXHU4QzQ2XHU3NEUzXHU5OTk2XHU5ODc1XHU1MTg1XHU1QkI5XHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBpbml0RG91YmFuKTtcclxuXHJcbi8vIFx1NjYzRVx1NzkzQVx1NjgwN1x1N0I3RVx1N0JBMVx1NzQwNlx1NkEyMVx1NjAwMVx1Njg0NlxyXG5mdW5jdGlvbiBzaG93VGFnTWFuYWdlTW9kYWwoKSB7XHJcbiAgICAvLyBcdTc4NkVcdTRGRERcdTZBMjFcdTYwMDFcdTY4NDZcdTU3MjhcdTk4NzVcdTk3NjJcdTRFMEFcdTUzRUFcdTY3MDlcdTRFMDBcdTRFMkFcdTVCOUVcdTRGOEJcclxuICAgIGxldCBtb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0YWdNYW5hZ2VNb2RhbCcpO1xyXG4gICAgaWYgKG1vZGFsKSB7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChtb2RhbCk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIFx1NTIxQlx1NUVGQVx1NkEyMVx1NjAwMVx1Njg0Nlx1NTE0M1x1N0QyMFxyXG4gICAgbW9kYWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIG1vZGFsLmlkID0gJ3RhZ01hbmFnZU1vZGFsJztcclxuICAgIG1vZGFsLmNsYXNzTmFtZSA9ICdmaXhlZCBpbnNldC0wIGJnLWJsYWNrIGJnLW9wYWNpdHktNzUgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgei00MCc7XHJcbiAgICBcclxuICAgIC8vIFx1NUY1M1x1NTI0RFx1NEY3Rlx1NzUyOFx1NzY4NFx1NjgwN1x1N0I3RVx1N0M3Qlx1NTc4Qlx1NTQ4Q1x1OUVEOFx1OEJBNFx1NjgwN1x1N0I3RVxyXG4gICAgY29uc3QgaXNNb3ZpZSA9IGRvdWJhbk1vdmllVHZDdXJyZW50U3dpdGNoID09PSAnbW92aWUnO1xyXG4gICAgY29uc3QgY3VycmVudFRhZ3MgPSBpc01vdmllID8gbW92aWVUYWdzIDogdHZUYWdzO1xyXG4gICAgY29uc3QgZGVmYXVsdFRhZ3MgPSBpc01vdmllID8gZGVmYXVsdE1vdmllVGFncyA6IGRlZmF1bHRUdlRhZ3M7XHJcbiAgICBcclxuICAgIC8vIFx1NkEyMVx1NjAwMVx1Njg0Nlx1NTE4NVx1NUJCOVxyXG4gICAgbW9kYWwuaW5uZXJIVE1MID0gYFxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJiZy1bIzE5MTkxOV0gcm91bmRlZC1sZyBwLTYgbWF4LXctbWQgdy1mdWxsIG1heC1oLVs5MHZoXSBvdmVyZmxvdy15LWF1dG8gcmVsYXRpdmVcIj5cclxuICAgICAgICAgICAgPGJ1dHRvbiBpZD1cImNsb3NlVGFnTW9kYWxcIiBjbGFzcz1cImFic29sdXRlIHRvcC00IHJpZ2h0LTQgdGV4dC1ncmF5LTQwMCBob3Zlcjp0ZXh0LXdoaXRlIHRleHQteGxcIj4mdGltZXM7PC9idXR0b24+XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICA8aDMgY2xhc3M9XCJ0ZXh0LXhsIGZvbnQtYm9sZCB0ZXh0LXdoaXRlIG1iLTRcIj5cdTY4MDdcdTdCN0VcdTdCQTFcdTc0MDYgKCR7aXNNb3ZpZSA/ICdcdTc1MzVcdTVGNzEnIDogJ1x1NzUzNVx1ODlDNlx1NTI2Nyd9KTwvaDM+XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwibWItNFwiPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlciBtYi0yXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPVwidGV4dC1sZyBmb250LW1lZGl1bSB0ZXh0LWdyYXktMzAwXCI+XHU2ODA3XHU3QjdFXHU1MjE3XHU4ODY4PC9oND5cclxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPVwicmVzZXRUYWdzQnRuXCIgY2xhc3M9XCJ0ZXh0LXhzIHB4LTIgcHktMSBiZy1ncmF5LTcwMCBob3ZlcjpiZy1ncmF5LTYwMCB0ZXh0LXdoaXRlIHJvdW5kZWRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgXHU2MDYyXHU1OTBEXHU5RUQ4XHU4QkE0XHU2ODA3XHU3QjdFXHJcbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJncmlkIGdyaWQtY29scy0yIHNtOmdyaWQtY29scy0zIGdhcC0yIG1iLTRcIiBpZD1cInRhZ3NHcmlkXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgJHtjdXJyZW50VGFncy5sZW5ndGggPyBjdXJyZW50VGFncy5tYXAodGFnID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gXCJcdTcwRURcdTk1RThcIlx1NjgwN1x1N0I3RVx1NEUwRFx1ODBGRFx1NTIyMFx1OTY2NFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjYW5EZWxldGUgPSB0YWcgIT09ICdcdTcwRURcdTk1RTgnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImJnLVsjMWExYTFhXSB0ZXh0LWdyYXktMzAwIHB5LTEuNSBweC0zIHJvdW5kZWQgdGV4dC1zbSBmb250LW1lZGl1bSBmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1jZW50ZXIgZ3JvdXBcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj4ke3RhZ308L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtjYW5EZWxldGUgPyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYDxidXR0b24gY2xhc3M9XCJkZWxldGUtdGFnLWJ0biB0ZXh0LWdyYXktNTAwIGhvdmVyOnRleHQtcmVkLTUwMCBvcGFjaXR5LTAgZ3JvdXAtaG92ZXI6b3BhY2l0eS0xMDAgdHJhbnNpdGlvbi1vcGFjaXR5XCIgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLXRhZz1cIiR7dGFnfVwiPlx1MjcxNTwvYnV0dG9uPmAgOiBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYDxzcGFuIGNsYXNzPVwidGV4dC1ncmF5LTUwMCB0ZXh0LXhzIGl0YWxpYyBvcGFjaXR5LTAgZ3JvdXAtaG92ZXI6b3BhY2l0eS0xMDBcIj5cdTVGQzVcdTk3MDA8L3NwYW4+YFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBgO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pLmpvaW4oJycpIDogXHJcbiAgICAgICAgICAgICAgICAgICAgYDxkaXYgY2xhc3M9XCJjb2wtc3Bhbi1mdWxsIHRleHQtY2VudGVyIHB5LTQgdGV4dC1ncmF5LTUwMFwiPlx1NjVFMFx1NjgwN1x1N0I3RVx1RkYwQ1x1OEJGN1x1NkRGQlx1NTJBMFx1NjIxNlx1NjA2Mlx1NTkwRFx1OUVEOFx1OEJBNDwvZGl2PmB9XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYm9yZGVyLXQgYm9yZGVyLWdyYXktNzAwIHB0LTRcIj5cclxuICAgICAgICAgICAgICAgIDxoNCBjbGFzcz1cInRleHQtbGcgZm9udC1tZWRpdW0gdGV4dC1ncmF5LTMwMCBtYi0zXCI+XHU2REZCXHU1MkEwXHU2NUIwXHU2ODA3XHU3QjdFPC9oND5cclxuICAgICAgICAgICAgICAgIDxmb3JtIGlkPVwiYWRkVGFnRm9ybVwiIGNsYXNzPVwiZmxleCBpdGVtcy1jZW50ZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBpZD1cIm5ld1RhZ0lucHV0XCIgcGxhY2Vob2xkZXI9XCJcdThGOTNcdTUxNjVcdTY4MDdcdTdCN0VcdTU0MERcdTc5RjAuLi5cIiBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJmbGV4LTEgYmctWyMyMjJdIHRleHQtd2hpdGUgYm9yZGVyIGJvcmRlci1ncmF5LTcwMCByb3VuZGVkIHB4LTMgcHktMiBmb2N1czpvdXRsaW5lLW5vbmUgZm9jdXM6Ym9yZGVyLXBpbmstNTAwXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwic3VibWl0XCIgY2xhc3M9XCJtbC0yIGJnLXBpbmstNjAwIGhvdmVyOmJnLXBpbmstNzAwIHRleHQtd2hpdGUgcHgtNCBweS0yIHJvdW5kZWRcIj5cdTZERkJcdTUyQTA8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgIDwvZm9ybT5cclxuICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwidGV4dC14cyB0ZXh0LWdyYXktNTAwIG10LTJcIj5cdTYzRDBcdTc5M0FcdUZGMUFcdTY4MDdcdTdCN0VcdTU0MERcdTc5RjBcdTRFMERcdTgwRkRcdTRFM0FcdTdBN0FcdUZGMENcdTRFMERcdTgwRkRcdTkxQ0RcdTU5MERcdUZGMENcdTRFMERcdTgwRkRcdTUzMDVcdTU0MkJcdTcyNzlcdTZCOEFcdTVCNTdcdTdCMjY8L3A+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgYDtcclxuICAgIFxyXG4gICAgLy8gXHU2REZCXHU1MkEwXHU2QTIxXHU2MDAxXHU2ODQ2XHU1MjMwXHU5ODc1XHU5NzYyXHJcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG1vZGFsKTtcclxuICAgIFxyXG4gICAgLy8gXHU3MTI2XHU3MEI5XHU2NTNFXHU1NzI4XHU4RjkzXHU1MTY1XHU2ODQ2XHU0RTBBXHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmV3VGFnSW5wdXQnKS5mb2N1cygpO1xyXG4gICAgfSwgMTAwKTtcclxuICAgIFxyXG4gICAgLy8gXHU2REZCXHU1MkEwXHU0RThCXHU0RUY2XHU3NkQxXHU1NDJDXHU1NjY4IC0gXHU1MTczXHU5NUVEXHU2MzA5XHU5NEFFXHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2xvc2VUYWdNb2RhbCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChtb2RhbCk7XHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgLy8gXHU2REZCXHU1MkEwXHU0RThCXHU0RUY2XHU3NkQxXHU1NDJDXHU1NjY4IC0gXHU3MEI5XHU1MUZCXHU2QTIxXHU2MDAxXHU2ODQ2XHU1OTE2XHU5MEU4XHU1MTczXHU5NUVEXHJcbiAgICBtb2RhbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICBpZiAoZS50YXJnZXQgPT09IG1vZGFsKSB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobW9kYWwpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICAvLyBcdTZERkJcdTUyQTBcdTRFOEJcdTRFRjZcdTc2RDFcdTU0MkNcdTU2NjggLSBcdTYwNjJcdTU5MERcdTlFRDhcdThCQTRcdTY4MDdcdTdCN0VcdTYzMDlcdTk0QUVcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXNldFRhZ3NCdG4nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJlc2V0VGFnc1RvRGVmYXVsdCgpO1xyXG4gICAgICAgIHNob3dUYWdNYW5hZ2VNb2RhbCgpOyAvLyBcdTkxQ0RcdTY1QjBcdTUyQTBcdThGN0RcdTZBMjFcdTYwMDFcdTY4NDZcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICAvLyBcdTZERkJcdTUyQTBcdTRFOEJcdTRFRjZcdTc2RDFcdTU0MkNcdTU2NjggLSBcdTUyMjBcdTk2NjRcdTY4MDdcdTdCN0VcdTYzMDlcdTk0QUVcclxuICAgIGNvbnN0IGRlbGV0ZUJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZGVsZXRlLXRhZy1idG4nKTtcclxuICAgIGRlbGV0ZUJ1dHRvbnMuZm9yRWFjaChidG4gPT4ge1xyXG4gICAgICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBjb25zdCB0YWdUb0RlbGV0ZSA9IHRoaXMuZ2V0QXR0cmlidXRlKCdkYXRhLXRhZycpO1xyXG4gICAgICAgICAgICBkZWxldGVUYWcodGFnVG9EZWxldGUpO1xyXG4gICAgICAgICAgICBzaG93VGFnTWFuYWdlTW9kYWwoKTsgLy8gXHU5MUNEXHU2NUIwXHU1MkEwXHU4RjdEXHU2QTIxXHU2MDAxXHU2ODQ2XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgLy8gXHU2REZCXHU1MkEwXHU0RThCXHU0RUY2XHU3NkQxXHU1NDJDXHU1NjY4IC0gXHU4ODY4XHU1MzU1XHU2M0QwXHU0RUE0XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRkVGFnRm9ybScpLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmV3VGFnSW5wdXQnKTtcclxuICAgICAgICBjb25zdCBuZXdUYWcgPSBpbnB1dC52YWx1ZS50cmltKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKG5ld1RhZykge1xyXG4gICAgICAgICAgICBhZGRUYWcobmV3VGFnKTtcclxuICAgICAgICAgICAgaW5wdXQudmFsdWUgPSAnJztcclxuICAgICAgICAgICAgc2hvd1RhZ01hbmFnZU1vZGFsKCk7IC8vIFx1OTFDRFx1NjVCMFx1NTJBMFx1OEY3RFx1NkEyMVx1NjAwMVx1Njg0NlxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcblxyXG4vLyBcdTZERkJcdTUyQTBcdTY4MDdcdTdCN0VcclxuZnVuY3Rpb24gYWRkVGFnKHRhZykge1xyXG4gICAgLy8gXHU1Qjg5XHU1MTY4XHU1OTA0XHU3NDA2XHU2ODA3XHU3QjdFXHU1NDBEXHVGRjBDXHU5NjMyXHU2QjYyWFNTXHJcbiAgICBjb25zdCBzYWZlVGFnID0gdGFnXHJcbiAgICAgICAgLnJlcGxhY2UoLzwvZywgJyZsdDsnKVxyXG4gICAgICAgIC5yZXBsYWNlKC8+L2csICcmZ3Q7JylcclxuICAgICAgICAucmVwbGFjZSgvXCIvZywgJyZxdW90OycpO1xyXG4gICAgXHJcbiAgICAvLyBcdTc4NkVcdTVCOUFcdTVGNTNcdTUyNERcdTRGN0ZcdTc1MjhcdTc2ODRcdTY2MkZcdTc1MzVcdTVGNzFcdThGRDhcdTY2MkZcdTc1MzVcdTg5QzZcdTUyNjdcdTY4MDdcdTdCN0VcclxuICAgIGNvbnN0IGlzTW92aWUgPSBkb3ViYW5Nb3ZpZVR2Q3VycmVudFN3aXRjaCA9PT0gJ21vdmllJztcclxuICAgIGNvbnN0IGN1cnJlbnRUYWdzID0gaXNNb3ZpZSA/IG1vdmllVGFncyA6IHR2VGFncztcclxuICAgIFxyXG4gICAgLy8gXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU1REYyXHU1QjU4XHU1NzI4XHVGRjA4XHU1RkZEXHU3NTY1XHU1OTI3XHU1QzBGXHU1MTk5XHVGRjA5XHJcbiAgICBjb25zdCBleGlzdHMgPSBjdXJyZW50VGFncy5zb21lKFxyXG4gICAgICAgIGV4aXN0aW5nVGFnID0+IGV4aXN0aW5nVGFnLnRvTG93ZXJDYXNlKCkgPT09IHNhZmVUYWcudG9Mb3dlckNhc2UoKVxyXG4gICAgKTtcclxuICAgIFxyXG4gICAgaWYgKGV4aXN0cykge1xyXG4gICAgICAgIHNob3dUb2FzdCgnXHU2ODA3XHU3QjdFXHU1REYyXHU1QjU4XHU1NzI4JywgJ3dhcm5pbmcnKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIFx1NkRGQlx1NTJBMFx1NTIzMFx1NUJGOVx1NUU5NFx1NzY4NFx1NjgwN1x1N0I3RVx1NjU3MFx1N0VDNFxyXG4gICAgaWYgKGlzTW92aWUpIHtcclxuICAgICAgICBtb3ZpZVRhZ3MucHVzaChzYWZlVGFnKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdHZUYWdzLnB1c2goc2FmZVRhZyk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIFx1NEZERFx1NUI1OFx1NTIzMFx1NjcyQ1x1NTczMFx1NUI1OFx1NTBBOFxyXG4gICAgc2F2ZVVzZXJUYWdzKCk7XHJcbiAgICBcclxuICAgIC8vIFx1OTFDRFx1NjVCMFx1NkUzMlx1NjdEM1x1NjgwN1x1N0I3RVxyXG4gICAgcmVuZGVyRG91YmFuVGFncygpO1xyXG4gICAgXHJcbiAgICBzaG93VG9hc3QoJ1x1NjgwN1x1N0I3RVx1NkRGQlx1NTJBMFx1NjIxMFx1NTI5RicsICdzdWNjZXNzJyk7XHJcbn1cclxuXHJcbi8vIFx1NTIyMFx1OTY2NFx1NjgwN1x1N0I3RVxyXG5mdW5jdGlvbiBkZWxldGVUYWcodGFnKSB7XHJcbiAgICAvLyBcdTcwRURcdTk1RThcdTY4MDdcdTdCN0VcdTRFMERcdTgwRkRcdTUyMjBcdTk2NjRcclxuICAgIGlmICh0YWcgPT09ICdcdTcwRURcdTk1RTgnKSB7XHJcbiAgICAgICAgc2hvd1RvYXN0KCdcdTcwRURcdTk1RThcdTY4MDdcdTdCN0VcdTRFMERcdTgwRkRcdTUyMjBcdTk2NjQnLCAnd2FybmluZycpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gXHU3ODZFXHU1QjlBXHU1RjUzXHU1MjREXHU0RjdGXHU3NTI4XHU3Njg0XHU2NjJGXHU3NTM1XHU1RjcxXHU4RkQ4XHU2NjJGXHU3NTM1XHU4OUM2XHU1MjY3XHU2ODA3XHU3QjdFXHJcbiAgICBjb25zdCBpc01vdmllID0gZG91YmFuTW92aWVUdkN1cnJlbnRTd2l0Y2ggPT09ICdtb3ZpZSc7XHJcbiAgICBjb25zdCBjdXJyZW50VGFncyA9IGlzTW92aWUgPyBtb3ZpZVRhZ3MgOiB0dlRhZ3M7XHJcbiAgICBcclxuICAgIC8vIFx1NUJGQlx1NjI3RVx1NjgwN1x1N0I3RVx1N0QyMlx1NUYxNVxyXG4gICAgY29uc3QgaW5kZXggPSBjdXJyZW50VGFncy5pbmRleE9mKHRhZyk7XHJcbiAgICBcclxuICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NjI3RVx1NTIzMFx1NjgwN1x1N0I3RVx1RkYwQ1x1NTIxOVx1NTIyMFx1OTY2NFxyXG4gICAgaWYgKGluZGV4ICE9PSAtMSkge1xyXG4gICAgICAgIGN1cnJlbnRUYWdzLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU0RkREXHU1QjU4XHU1MjMwXHU2NzJDXHU1NzMwXHU1QjU4XHU1MEE4XHJcbiAgICAgICAgc2F2ZVVzZXJUYWdzKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU1RjUzXHU1MjREXHU5MDA5XHU0RTJEXHU3Njg0XHU2NjJGXHU4OEFCXHU1MjIwXHU5NjY0XHU3Njg0XHU2ODA3XHU3QjdFXHVGRjBDXHU1MjE5XHU5MUNEXHU3RjZFXHU0RTNBXCJcdTcwRURcdTk1RThcIlxyXG4gICAgICAgIGlmIChkb3ViYW5DdXJyZW50VGFnID09PSB0YWcpIHtcclxuICAgICAgICAgICAgZG91YmFuQ3VycmVudFRhZyA9ICdcdTcwRURcdTk1RTgnO1xyXG4gICAgICAgICAgICBkb3ViYW5QYWdlU3RhcnQgPSAwO1xyXG4gICAgICAgICAgICByZW5kZXJSZWNvbW1lbmQoZG91YmFuQ3VycmVudFRhZywgZG91YmFuUGFnZVNpemUsIGRvdWJhblBhZ2VTdGFydCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1OTFDRFx1NjVCMFx1NkUzMlx1NjdEM1x1NjgwN1x1N0I3RVxyXG4gICAgICAgIHJlbmRlckRvdWJhblRhZ3MoKTtcclxuICAgICAgICBcclxuICAgICAgICBzaG93VG9hc3QoJ1x1NjgwN1x1N0I3RVx1NTIyMFx1OTY2NFx1NjIxMFx1NTI5RicsICdzdWNjZXNzJyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIFx1OTFDRFx1N0Y2RVx1NEUzQVx1OUVEOFx1OEJBNFx1NjgwN1x1N0I3RVxyXG5mdW5jdGlvbiByZXNldFRhZ3NUb0RlZmF1bHQoKSB7XHJcbiAgICAvLyBcdTc4NkVcdTVCOUFcdTVGNTNcdTUyNERcdTRGN0ZcdTc1MjhcdTc2ODRcdTY2MkZcdTc1MzVcdTVGNzFcdThGRDhcdTY2MkZcdTc1MzVcdTg5QzZcdTUyNjdcclxuICAgIGNvbnN0IGlzTW92aWUgPSBkb3ViYW5Nb3ZpZVR2Q3VycmVudFN3aXRjaCA9PT0gJ21vdmllJztcclxuICAgIFxyXG4gICAgLy8gXHU5MUNEXHU3RjZFXHU0RTNBXHU5RUQ4XHU4QkE0XHU2ODA3XHU3QjdFXHJcbiAgICBpZiAoaXNNb3ZpZSkge1xyXG4gICAgICAgIG1vdmllVGFncyA9IFsuLi5kZWZhdWx0TW92aWVUYWdzXTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdHZUYWdzID0gWy4uLmRlZmF1bHRUdlRhZ3NdO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBcdThCQkVcdTdGNkVcdTVGNTNcdTUyNERcdTY4MDdcdTdCN0VcdTRFM0FcdTcwRURcdTk1RThcclxuICAgIGRvdWJhbkN1cnJlbnRUYWcgPSAnXHU3MEVEXHU5NUU4JztcclxuICAgIGRvdWJhblBhZ2VTdGFydCA9IDA7XHJcbiAgICBcclxuICAgIC8vIFx1NEZERFx1NUI1OFx1NTIzMFx1NjcyQ1x1NTczMFx1NUI1OFx1NTBBOFxyXG4gICAgc2F2ZVVzZXJUYWdzKCk7XHJcbiAgICBcclxuICAgIC8vIFx1OTFDRFx1NjVCMFx1NkUzMlx1NjdEM1x1NjgwN1x1N0I3RVx1NTQ4Q1x1NTE4NVx1NUJCOVxyXG4gICAgcmVuZGVyRG91YmFuVGFncygpO1xyXG4gICAgcmVuZGVyUmVjb21tZW5kKGRvdWJhbkN1cnJlbnRUYWcsIGRvdWJhblBhZ2VTaXplLCBkb3ViYW5QYWdlU3RhcnQpO1xyXG4gICAgXHJcbiAgICBzaG93VG9hc3QoJ1x1NURGMlx1NjA2Mlx1NTkwRFx1OUVEOFx1OEJBNFx1NjgwN1x1N0I3RScsICdzdWNjZXNzJyk7XHJcbn1cclxuIiwgIi8vIFx1NUJDNlx1NzgwMVx1NEZERFx1NjJBNFx1NTI5Rlx1ODBGRFxyXG5cclxuLyoqXHJcbiAqIFx1NjhDMFx1NjdFNVx1NjYyRlx1NTQyNlx1OEJCRVx1N0Y2RVx1NEU4Nlx1NUJDNlx1NzgwMVx1NEZERFx1NjJBNFxyXG4gKiBcdTkwMUFcdThGQzdcdThCRkJcdTUzRDZcdTk4NzVcdTk3NjJcdTRFMEFcdTVENENcdTUxNjVcdTc2ODRcdTczQUZcdTU4ODNcdTUzRDhcdTkxQ0ZcdTY3NjVcdTY4QzBcdTY3RTVcclxuICovXHJcbmZ1bmN0aW9uIGlzUGFzc3dvcmRQcm90ZWN0ZWQoKSB7XHJcbiAgICAvLyBcdTUzRUFcdTY4QzBcdTY3RTVcdTY2NkVcdTkwMUFcdTVCQzZcdTc4MDFcclxuICAgIGNvbnN0IHB3ZCA9IHdpbmRvdy5fX0VOVl9fICYmIHdpbmRvdy5fX0VOVl9fLlBBU1NXT1JEO1xyXG4gICAgXHJcbiAgICAvLyBcdTY4QzBcdTY3RTVcdTY2NkVcdTkwMUFcdTVCQzZcdTc4MDFcdTY2MkZcdTU0MjZcdTY3MDlcdTY1NDhcclxuICAgIHJldHVybiB0eXBlb2YgcHdkID09PSAnc3RyaW5nJyAmJiBwd2QubGVuZ3RoID09PSA2NCAmJiAhL14wKyQvLnRlc3QocHdkKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFx1NjhDMFx1NjdFNVx1NjYyRlx1NTQyNlx1NUYzQVx1NTIzNlx1ODk4MVx1NkM0Mlx1OEJCRVx1N0Y2RVx1NUJDNlx1NzgwMVxyXG4gKiBcdTU5ODJcdTY3OUNcdTZDQTFcdTY3MDlcdThCQkVcdTdGNkVcdTY3MDlcdTY1NDhcdTc2ODQgUEFTU1dPUkRcdUZGMENcdTUyMTlcdThCQTRcdTRFM0FcdTk3MDBcdTg5ODFcdTVGM0FcdTUyMzZcdThCQkVcdTdGNkVcdTVCQzZcdTc4MDFcclxuICogXHU0RTNBXHU0RTg2XHU1Qjg5XHU1MTY4XHU4MDAzXHU4NjUxXHVGRjBDXHU2MjQwXHU2NzA5XHU5MEU4XHU3RjcyXHU5MEZEXHU1RkM1XHU5ODdCXHU4QkJFXHU3RjZFXHU1QkM2XHU3ODAxXHJcbiAqL1xyXG5mdW5jdGlvbiBpc1Bhc3N3b3JkUmVxdWlyZWQoKSB7XHJcbiAgICByZXR1cm4gIWlzUGFzc3dvcmRQcm90ZWN0ZWQoKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFx1NUYzQVx1NTIzNlx1NUJDNlx1NzgwMVx1NEZERFx1NjJBNFx1NjhDMFx1NjdFNSAtIFx1OTYzMlx1NkI2Mlx1N0VENVx1OEZDN1xyXG4gKiBcdTU3MjhcdTUxNzNcdTk1MkVcdTY0Q0RcdTRGNUNcdTUyNERcdTkwRkRcdTVFOTRcdThCRTVcdThDMDNcdTc1MjhcdTZCNjRcdTUxRkRcdTY1NzBcclxuICovXHJcbmZ1bmN0aW9uIGVuc3VyZVBhc3N3b3JkUHJvdGVjdGlvbigpIHtcclxuICAgIGlmIChpc1Bhc3N3b3JkUmVxdWlyZWQoKSkge1xyXG4gICAgICAgIHNob3dQYXNzd29yZE1vZGFsKCk7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdQYXNzd29yZCBwcm90ZWN0aW9uIGlzIHJlcXVpcmVkJyk7XHJcbiAgICB9XHJcbiAgICBpZiAoaXNQYXNzd29yZFByb3RlY3RlZCgpICYmICFpc1Bhc3N3b3JkVmVyaWZpZWQoKSkge1xyXG4gICAgICAgIHNob3dQYXNzd29yZE1vZGFsKCk7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdQYXNzd29yZCB2ZXJpZmljYXRpb24gcmVxdWlyZWQnKTtcclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG59XHJcblxyXG53aW5kb3cuaXNQYXNzd29yZFByb3RlY3RlZCA9IGlzUGFzc3dvcmRQcm90ZWN0ZWQ7XHJcbndpbmRvdy5pc1Bhc3N3b3JkUmVxdWlyZWQgPSBpc1Bhc3N3b3JkUmVxdWlyZWQ7XHJcblxyXG4vLyBcdTUzRUZcdTkwMDlcdUZGMUFcdTYyNTNcdTVGMDBcdTc1MzVcdTg5QzZcdTdBRUZcdThDMDNcdThCRDVcclxuY29uc3QgUEFTU1dPUkRfREVCVUcgPSBmYWxzZTtcclxuZnVuY3Rpb24gcHdkTG9nKC4uLmFyZ3MpIHtcclxuICAgIGlmIChQQVNTV09SRF9ERUJVRyAmJiB0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcgJiYgY29uc29sZS5sb2cpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnW3Bhc3N3b3JkXScsIC4uLmFyZ3MpO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogXHU5QThDXHU4QkMxXHU3NTI4XHU2MjM3XHU4RjkzXHU1MTY1XHU3Njg0XHU1QkM2XHU3ODAxXHU2NjJGXHU1NDI2XHU2QjYzXHU3ODZFXHVGRjA4XHU1RjAyXHU2QjY1XHVGRjBDXHU0RjdGXHU3NTI4U0hBLTI1Nlx1NTRDOFx1NUUwQ1x1RkYwOVxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gdmVyaWZ5UGFzc3dvcmQocGFzc3dvcmQpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgY29ycmVjdEhhc2ggPSB3aW5kb3cuX19FTlZfXz8uUEFTU1dPUkQ7XHJcbiAgICAgICAgcHdkTG9nKCdlbnYgcGFzc3dvcmQgaGFzaCBwcmVzZW50OicsICEhY29ycmVjdEhhc2gsICdsZW46JywgY29ycmVjdEhhc2ggPyBjb3JyZWN0SGFzaC5sZW5ndGggOiAwKTtcclxuICAgICAgICBpZiAoIWNvcnJlY3RIYXNoKSByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgIGNvbnN0IGlucHV0SGFzaCA9IGF3YWl0IHNoYTI1NihwYXNzd29yZCk7XHJcbiAgICAgICAgcHdkTG9nKCdpbnB1dCBoYXNoOicsIGlucHV0SGFzaCk7XHJcbiAgICAgICAgY29uc3QgaXNWYWxpZCA9IGlucHV0SGFzaCA9PT0gY29ycmVjdEhhc2g7XHJcblxyXG4gICAgICAgIGlmIChpc1ZhbGlkKSB7XHJcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFBBU1NXT1JEX0NPTkZJRy5sb2NhbFN0b3JhZ2VLZXksIEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgICAgICAgIHZlcmlmaWVkOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxyXG4gICAgICAgICAgICAgICAgcGFzc3dvcmRIYXNoOiBjb3JyZWN0SGFzaFxyXG4gICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpc1ZhbGlkO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdcdTlBOENcdThCQzFcdTVCQzZcdTc4MDFcdTY1RjZcdTUxRkFcdTk1MTk6JywgZXJyb3IpO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxufVxyXG5cclxuLy8gXHU5QThDXHU4QkMxXHU3MkI2XHU2MDAxXHU2OEMwXHU2N0U1XHJcbmZ1bmN0aW9uIGlzUGFzc3dvcmRWZXJpZmllZCgpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgaWYgKCFpc1Bhc3N3b3JkUHJvdGVjdGVkKCkpIHJldHVybiB0cnVlO1xyXG5cclxuICAgICAgICBjb25zdCBzdG9yZWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShQQVNTV09SRF9DT05GSUcubG9jYWxTdG9yYWdlS2V5KTtcclxuICAgICAgICBpZiAoIXN0b3JlZCkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICBjb25zdCB7IHRpbWVzdGFtcCwgcGFzc3dvcmRIYXNoIH0gPSBKU09OLnBhcnNlKHN0b3JlZCk7XHJcbiAgICAgICAgY29uc3QgY3VycmVudEhhc2ggPSB3aW5kb3cuX19FTlZfXz8uUEFTU1dPUkQ7XHJcblxyXG4gICAgICAgIHJldHVybiB0aW1lc3RhbXAgJiYgcGFzc3dvcmRIYXNoID09PSBjdXJyZW50SGFzaCAmJlxyXG4gICAgICAgICAgICBEYXRlLm5vdygpIC0gdGltZXN0YW1wIDwgUEFTU1dPUkRfQ09ORklHLnZlcmlmaWNhdGlvblRUTDtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignXHU2OEMwXHU2N0U1XHU1QkM2XHU3ODAxXHU5QThDXHU4QkMxXHU3MkI2XHU2MDAxXHU2NUY2XHU1MUZBXHU5NTE5OicsIGVycm9yKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIFx1NjZGNFx1NjVCMFx1NTE2OFx1NUM0MFx1NUJGQ1x1NTFGQVxyXG53aW5kb3cuaXNQYXNzd29yZFByb3RlY3RlZCA9IGlzUGFzc3dvcmRQcm90ZWN0ZWQ7XHJcbndpbmRvdy5pc1Bhc3N3b3JkUmVxdWlyZWQgPSBpc1Bhc3N3b3JkUmVxdWlyZWQ7XHJcbndpbmRvdy5pc1Bhc3N3b3JkVmVyaWZpZWQgPSBpc1Bhc3N3b3JkVmVyaWZpZWQ7XHJcbndpbmRvdy52ZXJpZnlQYXNzd29yZCA9IHZlcmlmeVBhc3N3b3JkO1xyXG53aW5kb3cuZW5zdXJlUGFzc3dvcmRQcm90ZWN0aW9uID0gZW5zdXJlUGFzc3dvcmRQcm90ZWN0aW9uO1xyXG53aW5kb3cuc2hvd1Bhc3N3b3JkTW9kYWwgPSBzaG93UGFzc3dvcmRNb2RhbDtcclxud2luZG93LmhpZGVQYXNzd29yZE1vZGFsID0gaGlkZVBhc3N3b3JkTW9kYWw7XHJcblxyXG4vLyBTSEEtMjU2XHU1QjlFXHU3M0IwXHVGRjFBXHU0RjE4XHU1MTQ4XHU0RjdGXHU3NTI4IGxpYnMvc2hhMjU2Lm1pbi5qc1x1RkYwOHdpbmRvdy5fanNTaGEyNTZcdUZGMDlcdUZGMENcdTkwN0ZcdTUxNERcdTc1MzVcdTg5QzZcdTdBRUYgV2ViQ3J5cHRvL1RleHRFbmNvZGVyIFx1NTE3Q1x1NUJCOVx1NjAyN1x1OTVFRVx1OTg5OFxyXG5hc3luYyBmdW5jdGlvbiBzaGEyNTYobWVzc2FnZSkge1xyXG4gICAgLy8gMSkgXHU0RjE4XHU1MTQ4XHU4RDcwXHU1MzlGXHU1OUNCIGpzLXNoYTI1Nlx1RkYwOFx1NTQwQ1x1NkI2NVx1NUI5RVx1NzNCMFx1RkYwQ1x1NTE3Q1x1NUJCOVx1NjAyN1x1NjcwMFx1NTk3RFx1RkYwOVxyXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cuX2pzU2hhMjU2ID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgcHdkTG9nKCdzaGEyNTYgdmlhIHdpbmRvdy5fanNTaGEyNTYnKTtcclxuICAgICAgICByZXR1cm4gd2luZG93Ll9qc1NoYTI1NihtZXNzYWdlKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyAyKSBcdTUxNzZcdTZCMjFcdTVDMURcdThCRDUgV2ViIENyeXB0byBBUElcclxuICAgIGlmICh3aW5kb3cuY3J5cHRvICYmIGNyeXB0by5zdWJ0bGUgJiYgY3J5cHRvLnN1YnRsZS5kaWdlc3QpIHtcclxuICAgICAgICAvLyBUZXh0RW5jb2RlciBcdTU3MjhcdTkwRThcdTUyMDZcdTc1MzVcdTg5QzZcdTdBRUZcdTUzRUZcdTgwRkRcdTRFMERcdTVCNThcdTU3MjhcclxuICAgICAgICBsZXQgbXNnQnVmZmVyO1xyXG4gICAgICAgIGlmICh0eXBlb2YgVGV4dEVuY29kZXIgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgIG1zZ0J1ZmZlciA9IG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShtZXNzYWdlKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBcdTdCODBcdTY2MTMgVVRGLTggXHU3RjE2XHU3ODAxXHU5NjREXHU3RUE3XHVGRjA4XHU4OTg2XHU3NkQ2XHU1RTM4XHU3NTI4IEFTQ0lJL1x1NEUyRFx1NjU4N1x1NTczQVx1NjY2Rlx1RkYwOVxyXG4gICAgICAgICAgICBjb25zdCB1dGY4ID0gdW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KG1lc3NhZ2UpKTtcclxuICAgICAgICAgICAgY29uc3QgYXJyID0gbmV3IFVpbnQ4QXJyYXkodXRmOC5sZW5ndGgpO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHV0ZjgubGVuZ3RoOyBpKyspIGFycltpXSA9IHV0ZjguY2hhckNvZGVBdChpKTtcclxuICAgICAgICAgICAgbXNnQnVmZmVyID0gYXJyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgaGFzaEJ1ZmZlciA9IGF3YWl0IGNyeXB0by5zdWJ0bGUuZGlnZXN0KCdTSEEtMjU2JywgbXNnQnVmZmVyKTtcclxuICAgICAgICBjb25zdCBoYXNoQXJyYXkgPSBBcnJheS5mcm9tKG5ldyBVaW50OEFycmF5KGhhc2hCdWZmZXIpKTtcclxuICAgICAgICBwd2RMb2coJ3NoYTI1NiB2aWEgY3J5cHRvLnN1YnRsZScpO1xyXG4gICAgICAgIHJldHVybiBoYXNoQXJyYXkubWFwKGIgPT4gYi50b1N0cmluZygxNikucGFkU3RhcnQoMiwgJzAnKSkuam9pbignJyk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhyb3cgbmV3IEVycm9yKCdObyBTSEEtMjU2IGltcGxlbWVudGF0aW9uIGF2YWlsYWJsZS4nKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFx1NjYzRVx1NzkzQVx1NUJDNlx1NzgwMVx1OUE4Q1x1OEJDMVx1NUYzOVx1N0E5N1xyXG4gKi9cclxuZnVuY3Rpb24gc2hvd1Bhc3N3b3JkTW9kYWwoKSB7XHJcbiAgICBjb25zdCBwYXNzd29yZE1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Bhc3N3b3JkTW9kYWwnKTtcclxuICAgIGlmIChwYXNzd29yZE1vZGFsKSB7XHJcbiAgICAgICAgLy8gXHU5NjMyXHU2QjYyXHU1MUZBXHU3M0IwXHU4QzQ2XHU3NEUzXHU1MzNBXHU1N0RGXHU2RURBXHU1MkE4XHU2NzYxXHVGRjA4XHU5MEU4XHU1MjA2XHU5ODc1XHU5NzYyXHU1M0VGXHU4MEZEXHU2Q0ExXHU2NzA5XHU4QkU1XHU1MTQzXHU3RDIwXHVGRjA5XHJcbiAgICAgICAgY29uc3QgZG91YmFuQXJlYSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkb3ViYW5BcmVhJyk7XHJcbiAgICAgICAgaWYgKGRvdWJhbkFyZWEpIGRvdWJhbkFyZWEuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XHJcblxyXG4gICAgICAgIGNvbnN0IGNhbmNlbEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYXNzd29yZENhbmNlbEJ0bicpO1xyXG4gICAgICAgIGlmIChjYW5jZWxCdG4pIGNhbmNlbEJ0bi5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcclxuXHJcbiAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU5NzAwXHU4OTgxXHU1RjNBXHU1MjM2XHU4QkJFXHU3RjZFXHU1QkM2XHU3ODAxXHJcbiAgICAgICAgaWYgKGlzUGFzc3dvcmRSZXF1aXJlZCgpKSB7XHJcbiAgICAgICAgICAgIC8vIFx1NEZFRVx1NjUzOVx1NUYzOVx1N0E5N1x1NTE4NVx1NUJCOVx1NjNEMFx1NzkzQVx1NzUyOFx1NjIzN1x1OTcwMFx1ODk4MVx1NTE0OFx1OEJCRVx1N0Y2RVx1NUJDNlx1NzgwMVxyXG4gICAgICAgICAgICBjb25zdCB0aXRsZSA9IHBhc3N3b3JkTW9kYWwucXVlcnlTZWxlY3RvcignaDInKTtcclxuICAgICAgICAgICAgY29uc3QgZGVzY3JpcHRpb24gPSBwYXNzd29yZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoJ3AnKTtcclxuICAgICAgICAgICAgaWYgKHRpdGxlKSB0aXRsZS50ZXh0Q29udGVudCA9ICdcdTk3MDBcdTg5ODFcdThCQkVcdTdGNkVcdTVCQzZcdTc4MDEnO1xyXG4gICAgICAgICAgICBpZiAoZGVzY3JpcHRpb24pIGRlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gJ1x1OEJGN1x1NTE0OFx1NTcyOFx1OTBFOFx1N0Y3Mlx1NUU3M1x1NTNGMFx1OEJCRVx1N0Y2RSBQQVNTV09SRCBcdTczQUZcdTU4ODNcdTUzRDhcdTkxQ0ZcdTY3NjVcdTRGRERcdTYyQTRcdTYwQThcdTc2ODRcdTVCOUVcdTRGOEInO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU5NjkwXHU4NUNGXHU1QkM2XHU3ODAxXHU4RjkzXHU1MTY1XHU2ODQ2XHU1NDhDXHU2M0QwXHU0RUE0XHU2MzA5XHU5NEFFXHVGRjBDXHU1M0VBXHU2NjNFXHU3OTNBXHU2M0QwXHU3OTNBXHU0RkUxXHU2MDZGXHJcbiAgICAgICAgICAgIGNvbnN0IGZvcm0gPSBwYXNzd29yZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoJ2Zvcm0nKTtcclxuICAgICAgICAgICAgY29uc3QgZXJyb3JNc2cgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFzc3dvcmRFcnJvcicpO1xyXG4gICAgICAgICAgICBpZiAoZm9ybSkgZm9ybS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgICAgICBpZiAoZXJyb3JNc2cpIHtcclxuICAgICAgICAgICAgICAgIGVycm9yTXNnLnRleHRDb250ZW50ID0gJ1x1NEUzQVx1Nzg2RVx1NEZERFx1NUI4OVx1NTE2OFx1RkYwQ1x1NUZDNVx1OTg3Qlx1OEJCRVx1N0Y2RSBQQVNTV09SRCBcdTczQUZcdTU4ODNcdTUzRDhcdTkxQ0ZcdTYyNERcdTgwRkRcdTRGN0ZcdTc1MjhcdTY3MkNcdTY3MERcdTUyQTFcdUZGMENcdThCRjdcdTgwNTRcdTdDRkJcdTdCQTFcdTc0MDZcdTU0NThcdThGREJcdTg4NENcdTkxNERcdTdGNkUnO1xyXG4gICAgICAgICAgICAgICAgZXJyb3JNc2cuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XHJcbiAgICAgICAgICAgICAgICBlcnJvck1zZy5jbGFzc05hbWUgPSAndGV4dC1yZWQtNTAwIG10LTIgZm9udC1tZWRpdW0nOyAvLyBcdTY1MzlcdTRFM0FcdTY2RjRcdTkxOTJcdTc2RUVcdTc2ODRcdTdFQTJcdTgyNzJcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFx1NkI2M1x1NUUzOFx1NzY4NFx1NUJDNlx1NzgwMVx1OUE4Q1x1OEJDMVx1NkEyMVx1NUYwRlxyXG4gICAgICAgICAgICBjb25zdCB0aXRsZSA9IHBhc3N3b3JkTW9kYWwucXVlcnlTZWxlY3RvcignaDInKTtcclxuICAgICAgICAgICAgY29uc3QgZGVzY3JpcHRpb24gPSBwYXNzd29yZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoJ3AnKTtcclxuICAgICAgICAgICAgaWYgKHRpdGxlKSB0aXRsZS50ZXh0Q29udGVudCA9ICdcdThCQkZcdTk1RUVcdTlBOENcdThCQzEnO1xyXG4gICAgICAgICAgICBpZiAoZGVzY3JpcHRpb24pIGRlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gJ1x1OEJGN1x1OEY5M1x1NTE2NVx1NUJDNlx1NzgwMVx1N0VFN1x1N0VFRFx1OEJCRlx1OTVFRSc7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zdCBmb3JtID0gcGFzc3dvcmRNb2RhbC5xdWVyeVNlbGVjdG9yKCdmb3JtJyk7XHJcbiAgICAgICAgICAgIGlmIChmb3JtKSBmb3JtLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gXHU1MTdDXHU1QkI5IGluZGV4Lmh0bWwgXHU1M0VGXHU4MEZEXHU4OEFCXHU1MTg1XHU4MDU0XHU4MTFBXHU2NzJDIHJlbW92ZUF0dHJpYnV0ZSgnY2xhc3MnKSBcdTc2ODRcdTYwQzVcdTUxQjVcdUZGMUFcdTU5Q0JcdTdFQzhcdTRFRTUgc3R5bGUgXHU0RTNBXHU1MUM2XHJcbiAgICAgICAgcGFzc3dvcmRNb2RhbC5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xyXG4gICAgICAgIHBhc3N3b3JkTW9kYWwuc3R5bGUudmlzaWJpbGl0eSA9ICd2aXNpYmxlJztcclxuICAgICAgICBwYXNzd29yZE1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xyXG4gICAgICAgIHBhc3N3b3JkTW9kYWwuc2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicsICdmYWxzZScpO1xyXG5cclxuICAgICAgICAvLyBcdTUzRUFcdTY3MDlcdTU3MjhcdTk3NUVcdTVGM0FcdTUyMzZcdThCQkVcdTdGNkVcdTVCQzZcdTc4MDFcdTZBMjFcdTVGMEZcdTRFMEJcdTYyNERcdTgwNUFcdTcxMjZcdThGOTNcdTUxNjVcdTY4NDZcclxuICAgICAgICBpZiAoIWlzUGFzc3dvcmRSZXF1aXJlZCgpKSB7XHJcbiAgICAgICAgICAgIC8vIFx1Nzg2RVx1NEZERFx1OEY5M1x1NTE2NVx1Njg0Nlx1ODNCN1x1NTNENlx1NzEyNlx1NzBCOVxyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBhc3N3b3JkSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFzc3dvcmRJbnB1dCcpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHBhc3N3b3JkSW5wdXQpIHtcclxuICAgICAgICAgICAgICAgICAgICBwYXNzd29yZElucHV0LmZvY3VzKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIDEwMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogXHU5NjkwXHU4NUNGXHU1QkM2XHU3ODAxXHU5QThDXHU4QkMxXHU1RjM5XHU3QTk3XHJcbiAqL1xyXG5mdW5jdGlvbiBoaWRlUGFzc3dvcmRNb2RhbCgpIHtcclxuICAgIGNvbnN0IHBhc3N3b3JkTW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFzc3dvcmRNb2RhbCcpO1xyXG4gICAgaWYgKHBhc3N3b3JkTW9kYWwpIHtcclxuICAgICAgICAvLyBcdTk2OTBcdTg1Q0ZcdTVCQzZcdTc4MDFcdTk1MTlcdThCRUZcdTYzRDBcdTc5M0FcclxuICAgICAgICBoaWRlUGFzc3dvcmRFcnJvcigpO1xyXG5cclxuICAgICAgICAvLyBcdTZFMDVcdTdBN0FcdTVCQzZcdTc4MDFcdThGOTNcdTUxNjVcdTY4NDZcclxuICAgICAgICBjb25zdCBwYXNzd29yZElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Bhc3N3b3JkSW5wdXQnKTtcclxuICAgICAgICBpZiAocGFzc3dvcmRJbnB1dCkgcGFzc3dvcmRJbnB1dC52YWx1ZSA9ICcnO1xyXG5cclxuICAgICAgICAvLyBpbmRleC5odG1sIFx1OTFDQ1x1NTNFRlx1ODBGRFx1NjI4QSBjbGFzcyBcdTUxNjhcdTc5RkJcdTk2NjRcdTRFODZcdUZGMDhyZW1vdmVBdHRyaWJ1dGUoJ2NsYXNzJylcdUZGMDlcdUZGMENcdTZCNjRcdTU5MDRcdTVGM0FcdTUyMzZcdTUxOTlcdTU2REUgaGlkZGVuXHJcbiAgICAgICAgcGFzc3dvcmRNb2RhbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgIHBhc3N3b3JkTW9kYWwuc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xyXG4gICAgICAgIHBhc3N3b3JkTW9kYWwuc2V0QXR0cmlidXRlKCdjbGFzcycsICdoaWRkZW4nKTtcclxuICAgICAgICBwYXNzd29yZE1vZGFsLnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCAndHJ1ZScpO1xyXG5cclxuICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTU0MkZcdTc1MjhcdThDNDZcdTc0RTNcdTUzM0FcdTU3REZcdTUyMTlcdTY2M0VcdTc5M0FcdThDNDZcdTc0RTNcdTUzM0FcdTU3REZcclxuICAgICAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2RvdWJhbkVuYWJsZWQnKSA9PT0gJ3RydWUnKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRvdWJhbkFyZWEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZG91YmFuQXJlYScpO1xyXG4gICAgICAgICAgICBpZiAoZG91YmFuQXJlYSkgZG91YmFuQXJlYS5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBpbml0RG91YmFuID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICBpbml0RG91YmFuKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBcdTY2M0VcdTc5M0FcdTVCQzZcdTc4MDFcdTk1MTlcdThCRUZcdTRGRTFcdTYwNkZcclxuICovXHJcbmZ1bmN0aW9uIHNob3dQYXNzd29yZEVycm9yKCkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Bhc3N3b3JkRXJyb3InKTtcclxuICAgIGlmIChlcnJvckVsZW1lbnQpIHtcclxuICAgICAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XHJcbiAgICAgICAgLy8gaW5kZXguaHRtbCBcdTkxQ0NcdTc1MjhcdTc2ODRcdTY2MkYgZGlzcGxheTpub25lXHJcbiAgICAgICAgZXJyb3JFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogXHU5NjkwXHU4NUNGXHU1QkM2XHU3ODAxXHU5NTE5XHU4QkVGXHU0RkUxXHU2MDZGXHJcbiAqL1xyXG5mdW5jdGlvbiBoaWRlUGFzc3dvcmRFcnJvcigpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYXNzd29yZEVycm9yJyk7XHJcbiAgICBpZiAoZXJyb3JFbGVtZW50KSB7XHJcbiAgICAgICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xyXG4gICAgICAgIC8vIGluZGV4Lmh0bWwgXHU5MUNDXHU3NTI4XHU3Njg0XHU2NjJGIGRpc3BsYXk6bm9uZVxyXG4gICAgICAgIGVycm9yRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogXHU1OTA0XHU3NDA2XHU1QkM2XHU3ODAxXHU2M0QwXHU0RUE0XHU0RThCXHU0RUY2XHVGRjA4XHU1RjAyXHU2QjY1XHVGRjA5XHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBoYW5kbGVQYXNzd29yZFN1Ym1pdChldmVudCkge1xyXG4gICAgLy8gXHU1MTdDXHU1QkI5XHU1MTg1XHU4MDU0IG9uc3VibWl0IFx1NTQ4QyBhZGRFdmVudExpc3RlbmVyXHJcbiAgICBpZiAoZXZlbnQgJiYgdHlwZW9mIGV2ZW50LnByZXZlbnREZWZhdWx0ID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBwYXNzd29yZElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Bhc3N3b3JkSW5wdXQnKTtcclxuICAgIGNvbnN0IHBhc3N3b3JkID0gcGFzc3dvcmRJbnB1dCA/IHBhc3N3b3JkSW5wdXQudmFsdWUudHJpbSgpIDogJyc7XHJcblxyXG4gICAgLy8gXHU2ODIxXHU5QThDXHU2MjEwXHU1MjlGXHU2NUY2XHU3ODZFXHU0RkREXHU3QUNCXHU1MzczXHU1MTczXHU5NUVEXHU1RjM5XHU3QTk3XHVGRjA4XHU1NEVBXHU2MDE1XHU0RThCXHU0RUY2XHU2RDNFXHU1M0QxL1x1NTQwRVx1N0VFRFx1OTAzQlx1OEY5MVx1NTkzMVx1OEQyNVx1RkYwOVxyXG4gICAgY29uc3Qgb2sgPSBhd2FpdCB2ZXJpZnlQYXNzd29yZChwYXNzd29yZCk7XHJcbiAgICBpZiAob2spIHtcclxuICAgICAgICBoaWRlUGFzc3dvcmRNb2RhbCgpO1xyXG5cclxuICAgICAgICAvLyBcdTg5RTZcdTUzRDFcdTVCQzZcdTc4MDFcdTlBOENcdThCQzFcdTYyMTBcdTUyOUZcdTRFOEJcdTRFRjZcdUZGMDhcdTkwRThcdTUyMDZcdTc1MzVcdTg5QzZcdTZENEZcdTg5QzhcdTU2NjhcdTRFMERcdTY1MkZcdTYzMDEgQ3VzdG9tRXZlbnRcdUZGMDlcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHdpbmRvdy5DdXN0b21FdmVudCA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ3Bhc3N3b3JkVmVyaWZpZWQnKSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBldnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnRXZlbnQnKTtcclxuICAgICAgICAgICAgICAgIGV2dC5pbml0RXZlbnQoJ3Bhc3N3b3JkVmVyaWZpZWQnLCB0cnVlLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQoZXZ0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgLy8gXHU1RkZEXHU3NTY1XHU0RThCXHU0RUY2XHU2RDNFXHU1M0QxXHU1OTMxXHU4RDI1XHVGRjBDXHU5MDdGXHU1MTREXHU1RjcxXHU1NENEXHU0RTNCXHU2RDQxXHU3QTBCXHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignZGlzcGF0Y2ggcGFzc3dvcmRWZXJpZmllZCBldmVudCBmYWlsZWQ6JywgZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBzaG93UGFzc3dvcmRFcnJvcigpO1xyXG4gICAgICAgIGlmIChwYXNzd29yZElucHV0KSB7XHJcbiAgICAgICAgICAgIHBhc3N3b3JkSW5wdXQudmFsdWUgPSAnJztcclxuICAgICAgICAgICAgcGFzc3dvcmRJbnB1dC5mb2N1cygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuLy8gXHU2NjNFXHU1RjBGXHU2NkI0XHU5NzMyXHU1MjMwXHU1MTY4XHU1QzQwXHVGRjBDXHU3ODZFXHU0RkREXHU1MTg1XHU4MDU0IG9uc3VibWl0PVwiaGFuZGxlUGFzc3dvcmRTdWJtaXQoKVwiIFx1NTcyOFx1ODAwMVx1NjVFN1x1NkQ0Rlx1ODlDOFx1NTY2OFx1NTNFRlx1NzUyOFxyXG53aW5kb3cuaGFuZGxlUGFzc3dvcmRTdWJtaXQgPSBoYW5kbGVQYXNzd29yZFN1Ym1pdDtcclxuXHJcbi8qKlxyXG4gKiBcdTUyMURcdTU5Q0JcdTUzMTZcdTVCQzZcdTc4MDFcdTlBOENcdThCQzFcdTdDRkJcdTdFREZcclxuICovXHJcbmZ1bmN0aW9uIGluaXRQYXNzd29yZFByb3RlY3Rpb24oKSB7XHJcbiAgICAvLyBcdTU5ODJcdTY3OUNcdThCQkVcdTdGNkVcdTRFODZcdTVCQzZcdTc4MDFcdTRGNDZcdTc1MjhcdTYyMzdcdTVERjJcdTlBOENcdThCQzFcdUZGMENcdTc4NkVcdTRGRERcdTVGMzlcdTdBOTdcdTg4QUJcdTUxNzNcdTk1RURcdUZGMDhcdTUxN0NcdTVCQjlcdTUxODVcdTgwNTRcdTgxMUFcdTY3MkNcdTVERjJcdTY2M0VcdTc5M0FcdTc2ODRcdTYwQzVcdTUxQjVcdUZGMDlcclxuICAgIGlmIChpc1Bhc3N3b3JkUHJvdGVjdGVkKCkgJiYgaXNQYXNzd29yZFZlcmlmaWVkKCkpIHtcclxuICAgICAgICBoaWRlUGFzc3dvcmRNb2RhbCgpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIC8vIFx1NTk4Mlx1Njc5Q1x1OTcwMFx1ODk4MVx1NUYzQVx1NTIzNlx1OEJCRVx1N0Y2RVx1NUJDNlx1NzgwMVx1RkYwQ1x1NjYzRVx1NzkzQVx1OEI2Nlx1NTQ0QVx1NUYzOVx1N0E5N1xyXG4gICAgaWYgKGlzUGFzc3dvcmRSZXF1aXJlZCgpKSB7XHJcbiAgICAgICAgc2hvd1Bhc3N3b3JkTW9kYWwoKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICAvLyBcdTU5ODJcdTY3OUNcdThCQkVcdTdGNkVcdTRFODZcdTVCQzZcdTc4MDFcdTRGNDZcdTc1MjhcdTYyMzdcdTY3MkFcdTlBOENcdThCQzFcdUZGMENcdTY2M0VcdTc5M0FcdTVCQzZcdTc4MDFcdThGOTNcdTUxNjVcdTY4NDZcclxuICAgIGlmIChpc1Bhc3N3b3JkUHJvdGVjdGVkKCkgJiYgIWlzUGFzc3dvcmRWZXJpZmllZCgpKSB7XHJcbiAgICAgICAgc2hvd1Bhc3N3b3JkTW9kYWwoKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIFx1NTcyOFx1OTg3NVx1OTc2Mlx1NTJBMFx1OEY3RFx1NUI4Q1x1NjIxMFx1NTQwRVx1NTIxRFx1NTlDQlx1NTMxNlx1NUJDNlx1NzgwMVx1NEZERFx1NjJBNFxyXG4vLyBcdTU0MENcdTY1RjZcdTdFRDFcdTVCOUFcdTg4NjhcdTUzNTUgc3VibWl0IFx1NEU4Qlx1NEVGNlx1RkYwQ1x1OTA3Rlx1NTE0RFx1OTBFOFx1NTIwNlx1NzUzNVx1ODlDNlx1N0FFRlx1NUJGOVx1NTE4NVx1ODA1NFx1NEU4Qlx1NEVGNi9cdTVGMDJcdTZCNjVcdTU5MDRcdTc0MDZcdTUxN0NcdTVCQjlcdTYwMjdcdTk1RUVcdTk4OThcclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHtcclxuICAgIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGFzc3dvcmRGb3JtJyk7XHJcbiAgICBpZiAoZm9ybSAmJiAhZm9ybS5fX3Bhc3N3b3JkQm91bmQpIHtcclxuICAgICAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGhhbmRsZVBhc3N3b3JkU3VibWl0KTtcclxuICAgICAgICBmb3JtLl9fcGFzc3dvcmRCb3VuZCA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdFBhc3N3b3JkUHJvdGVjdGlvbigpO1xyXG59KTsiLCAiLy8gXHU1MTY4XHU1QzQwXHU1M0Q4XHU5MUNGXHJcbmxldCBzZWxlY3RlZEFQSXMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdzZWxlY3RlZEFQSXMnKSB8fCAnW1wibWFvdGFpXCJdJyk7IC8vIFx1OUVEOFx1OEJBNFx1OTAwOVx1NEUyRFx1OEQ0NFx1NkU5MFxyXG5sZXQgY3VzdG9tQVBJcyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2N1c3RvbUFQSXMnKSB8fCAnW10nKTsgLy8gXHU1QjU4XHU1MEE4XHU4MUVBXHU1QjlBXHU0RTQ5QVBJXHU1MjE3XHU4ODY4XHJcblxyXG4vLyBcdTZERkJcdTUyQTBcdTVGNTNcdTUyNERcdTY0QURcdTY1M0VcdTc2ODRcdTk2QzZcdTY1NzBcdTdEMjJcdTVGMTVcclxubGV0IGN1cnJlbnRFcGlzb2RlSW5kZXggPSAwO1xyXG4vLyBcdTZERkJcdTUyQTBcdTVGNTNcdTUyNERcdTg5QzZcdTk4OTFcdTc2ODRcdTYyNDBcdTY3MDlcdTk2QzZcdTY1NzBcclxubGV0IGN1cnJlbnRFcGlzb2RlcyA9IFtdO1xyXG4vLyBcdTZERkJcdTUyQTBcdTVGNTNcdTUyNERcdTg5QzZcdTk4OTFcdTc2ODRcdTY4MDdcdTk4OThcclxubGV0IGN1cnJlbnRWaWRlb1RpdGxlID0gJyc7XHJcbi8vIFx1NTE2OFx1NUM0MFx1NTNEOFx1OTFDRlx1NzUyOFx1NEU4RVx1NTAxMlx1NUU4Rlx1NzJCNlx1NjAwMVxyXG5sZXQgZXBpc29kZXNSZXZlcnNlZCA9IGZhbHNlO1xyXG5cclxuLy8gXHU5ODc1XHU5NzYyXHU1MjFEXHU1OUNCXHU1MzE2XHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAvLyBcdTUyMURcdTU5Q0JcdTUzMTZBUElcdTU5MERcdTkwMDlcdTY4NDZcclxuICAgIGluaXRBUElDaGVja2JveGVzKCk7XHJcblxyXG4gICAgLy8gXHU1MjFEXHU1OUNCXHU1MzE2XHU4MUVBXHU1QjlBXHU0RTQ5QVBJXHU1MjE3XHU4ODY4XHJcbiAgICByZW5kZXJDdXN0b21BUElzTGlzdCgpO1xyXG5cclxuICAgIC8vIFx1NTIxRFx1NTlDQlx1NTMxNlx1NjYzRVx1NzkzQVx1OTAwOVx1NEUyRFx1NzY4NEFQSVx1NjU3MFx1OTFDRlxyXG4gICAgdXBkYXRlU2VsZWN0ZWRBcGlDb3VudCgpO1xyXG5cclxuICAgIC8vIFx1NkUzMlx1NjdEM1x1NjQxQ1x1N0QyMlx1NTM4Nlx1NTNGMlxyXG4gICAgcmVuZGVyU2VhcmNoSGlzdG9yeSgpO1xyXG5cclxuICAgIC8vIFx1OEJCRVx1N0Y2RVx1OUVEOFx1OEJBNEFQSVx1OTAwOVx1NjJFOVx1RkYwOFx1NTk4Mlx1Njc5Q1x1NjYyRlx1N0IyQ1x1NEUwMFx1NkIyMVx1NTJBMFx1OEY3RFx1RkYwOVxyXG4gICAgaWYgKCFsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnaGFzSW5pdGlhbGl6ZWREZWZhdWx0cycpKSB7XHJcbiAgICAgICAgLy8gXHU5RUQ4XHU4QkE0XHU5MDA5XHU0RTJEXHU4RDQ0XHU2RTkwXHJcbiAgICAgICAgc2VsZWN0ZWRBUElzID0gW1wibWFvdGFpXCJdO1xyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdzZWxlY3RlZEFQSXMnLCBKU09OLnN0cmluZ2lmeShzZWxlY3RlZEFQSXMpKTtcclxuXHJcbiAgICAgICAgLy8gXHU5RUQ4XHU4QkE0XHU5MDA5XHU0RTJEXHU4RkM3XHU2RUU0XHU1RjAwXHU1MTczXHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3llbGxvd0ZpbHRlckVuYWJsZWQnLCAndHJ1ZScpO1xyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFBMQVlFUl9DT05GSUcuYWRGaWx0ZXJpbmdTdG9yYWdlLCAndHJ1ZScpO1xyXG5cclxuICAgICAgICAvLyBcdTlFRDhcdThCQTRcdTU0MkZcdTc1MjhcdThDNDZcdTc0RTNcdTUyOUZcdTgwRkRcclxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZG91YmFuRW5hYmxlZCcsICd0cnVlJyk7XHJcblxyXG4gICAgICAgIC8vIFx1NjgwN1x1OEJCMFx1NURGMlx1NTIxRFx1NTlDQlx1NTMxNlx1OUVEOFx1OEJBNFx1NTAzQ1xyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdoYXNJbml0aWFsaXplZERlZmF1bHRzJywgJ3RydWUnKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdThCQkVcdTdGNkVcdTlFQzRcdTgyNzJcdTUxODVcdTVCQjlcdThGQzdcdTZFRTRcdTU2NjhcdTVGMDBcdTUxNzNcdTUyMURcdTU5Q0JcdTcyQjZcdTYwMDFcclxuICAgIGNvbnN0IHllbGxvd0ZpbHRlclRvZ2dsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd5ZWxsb3dGaWx0ZXJUb2dnbGUnKTtcclxuICAgIGlmICh5ZWxsb3dGaWx0ZXJUb2dnbGUpIHtcclxuICAgICAgICB5ZWxsb3dGaWx0ZXJUb2dnbGUuY2hlY2tlZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd5ZWxsb3dGaWx0ZXJFbmFibGVkJykgPT09ICd0cnVlJztcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdThCQkVcdTdGNkVcdTVFN0ZcdTU0NEFcdThGQzdcdTZFRTRcdTVGMDBcdTUxNzNcdTUyMURcdTU5Q0JcdTcyQjZcdTYwMDFcclxuICAgIGNvbnN0IGFkRmlsdGVyVG9nZ2xlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkRmlsdGVyVG9nZ2xlJyk7XHJcbiAgICBpZiAoYWRGaWx0ZXJUb2dnbGUpIHtcclxuICAgICAgICBhZEZpbHRlclRvZ2dsZS5jaGVja2VkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oUExBWUVSX0NPTkZJRy5hZEZpbHRlcmluZ1N0b3JhZ2UpICE9PSAnZmFsc2UnOyAvLyBcdTlFRDhcdThCQTRcdTRFM0F0cnVlXHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHU4QkJFXHU3RjZFXHU0RThCXHU0RUY2XHU3NkQxXHU1NDJDXHU1NjY4XHJcbiAgICBzZXR1cEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgLy8gXHU1MjFEXHU1OUNCXHU2OEMwXHU2N0U1XHU2MjEwXHU0RUJBQVBJXHU5MDA5XHU0RTJEXHU3MkI2XHU2MDAxXHJcbiAgICBzZXRUaW1lb3V0KGNoZWNrQWR1bHRBUElzU2VsZWN0ZWQsIDEwMCk7XHJcbn0pO1xyXG5cclxuLy8gXHU1MjFEXHU1OUNCXHU1MzE2QVBJXHU1OTBEXHU5MDA5XHU2ODQ2XHJcbmZ1bmN0aW9uIGluaXRBUElDaGVja2JveGVzKCkge1xyXG4gICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FwaUNoZWNrYm94ZXMnKTtcclxuICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcclxuXHJcbiAgICAvLyBcdTZERkJcdTUyQTBcdTY2NkVcdTkwMUFBUElcdTdFQzRcdTY4MDdcdTk4OThcclxuICAgIGNvbnN0IG5vcm1hbGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgbm9ybWFsZGl2LmlkID0gJ25vcm1hbGRpdic7XHJcbiAgICBub3JtYWxkaXYuY2xhc3NOYW1lID0gJ2dyaWQgZ3JpZC1jb2xzLTIgZ2FwLTInO1xyXG4gICAgY29uc3Qgbm9ybWFsVGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIG5vcm1hbFRpdGxlLmNsYXNzTmFtZSA9ICdhcGktZ3JvdXAtdGl0bGUnO1xyXG4gICAgbm9ybWFsVGl0bGUudGV4dENvbnRlbnQgPSAnXHU2NjZFXHU5MDFBXHU4RDQ0XHU2RTkwJztcclxuICAgIG5vcm1hbGRpdi5hcHBlbmRDaGlsZChub3JtYWxUaXRsZSk7XHJcblxyXG4gICAgLy8gXHU1MjFCXHU1RUZBXHU2NjZFXHU5MDFBQVBJXHU2RTkwXHU3Njg0XHU1OTBEXHU5MDA5XHU2ODQ2XHJcbiAgICBPYmplY3Qua2V5cyhBUElfU0lURVMpLmZvckVhY2goYXBpS2V5ID0+IHtcclxuICAgICAgICBjb25zdCBhcGkgPSBBUElfU0lURVNbYXBpS2V5XTtcclxuICAgICAgICBpZiAoYXBpLmFkdWx0KSByZXR1cm47IC8vIFx1OERGM1x1OEZDN1x1NjIxMFx1NEVCQVx1NTE4NVx1NUJCOUFQSVx1RkYwQ1x1N0EwRFx1NTQwRVx1NkRGQlx1NTJBMFxyXG5cclxuICAgICAgICBjb25zdCBjaGVja2VkID0gc2VsZWN0ZWRBUElzLmluY2x1ZGVzKGFwaUtleSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGNoZWNrYm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgY2hlY2tib3guY2xhc3NOYW1lID0gJ2ZsZXggaXRlbXMtY2VudGVyJztcclxuICAgICAgICBjaGVja2JveC5pbm5lckhUTUwgPSBgXHJcbiAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBpZD1cImFwaV8ke2FwaUtleX1cIiBcclxuICAgICAgICAgICAgICAgICAgIGNsYXNzPVwiZm9ybS1jaGVja2JveCBoLTMgdy0zIHRleHQtYmx1ZS02MDAgYmctWyMyMjJdIGJvcmRlciBib3JkZXItWyMzMzNdXCIgXHJcbiAgICAgICAgICAgICAgICAgICAke2NoZWNrZWQgPyAnY2hlY2tlZCcgOiAnJ30gXHJcbiAgICAgICAgICAgICAgICAgICBkYXRhLWFwaT1cIiR7YXBpS2V5fVwiPlxyXG4gICAgICAgICAgICA8bGFiZWwgZm9yPVwiYXBpXyR7YXBpS2V5fVwiIGNsYXNzPVwibWwtMSB0ZXh0LXhzIHRleHQtZ3JheS00MDAgdHJ1bmNhdGVcIj4ke2FwaS5uYW1lfTwvbGFiZWw+XHJcbiAgICAgICAgYDtcclxuICAgICAgICBub3JtYWxkaXYuYXBwZW5kQ2hpbGQoY2hlY2tib3gpO1xyXG5cclxuICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTRFOEJcdTRFRjZcdTc2RDFcdTU0MkNcdTU2NjhcclxuICAgICAgICBjaGVja2JveC5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdXBkYXRlU2VsZWN0ZWRBUElzKCk7XHJcbiAgICAgICAgICAgIGNoZWNrQWR1bHRBUElzU2VsZWN0ZWQoKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKG5vcm1hbGRpdik7XHJcblxyXG4gICAgLy8gXHU2REZCXHU1MkEwXHU2MjEwXHU0RUJBQVBJXHU1MjE3XHU4ODY4XHJcbiAgICBhZGRBZHVsdEFQSSgpO1xyXG5cclxuICAgIC8vIFx1NTIxRFx1NTlDQlx1NjhDMFx1NjdFNVx1NjIxMFx1NEVCQVx1NTE4NVx1NUJCOVx1NzJCNlx1NjAwMVxyXG4gICAgY2hlY2tBZHVsdEFQSXNTZWxlY3RlZCgpO1xyXG59XHJcblxyXG4vLyBcdTZERkJcdTUyQTBcdTYyMTBcdTRFQkFBUElcdTUyMTdcdTg4NjhcclxuZnVuY3Rpb24gYWRkQWR1bHRBUEkoKSB7XHJcbiAgICAvLyBcdTRFQzVcdTU3MjhcdTk2OTBcdTg1Q0ZcdThCQkVcdTdGNkVcdTRFM0FmYWxzZVx1NjVGNlx1NkRGQlx1NTJBMFx1NjIxMFx1NEVCQUFQSVx1N0VDNFxyXG4gICAgaWYgKCFISURFX0JVSUxUSU5fQURVTFRfQVBJUyAmJiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3llbGxvd0ZpbHRlckVuYWJsZWQnKSA9PT0gJ2ZhbHNlJykpIHtcclxuICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXBpQ2hlY2tib3hlcycpO1xyXG5cclxuICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTYyMTBcdTRFQkFBUElcdTdFQzRcdTY4MDdcdTk4OThcclxuICAgICAgICBjb25zdCBhZHVsdGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIGFkdWx0ZGl2LmlkID0gJ2FkdWx0ZGl2JztcclxuICAgICAgICBhZHVsdGRpdi5jbGFzc05hbWUgPSAnZ3JpZCBncmlkLWNvbHMtMiBnYXAtMic7XHJcbiAgICAgICAgY29uc3QgYWR1bHRUaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIGFkdWx0VGl0bGUuY2xhc3NOYW1lID0gJ2FwaS1ncm91cC10aXRsZSBhZHVsdCc7XHJcbiAgICAgICAgYWR1bHRUaXRsZS5pbm5lckhUTUwgPSBgXHU5RUM0XHU4MjcyXHU4RDQ0XHU2RTkwXHU5MUM3XHU5NkM2XHU3QUQ5IDxzcGFuIGNsYXNzPVwiYWR1bHQtd2FybmluZ1wiPlxyXG4gICAgICAgICAgICA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBmaWxsPVwibm9uZVwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIj5cclxuICAgICAgICAgICAgICAgIDxwYXRoIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiIHN0cm9rZS13aWR0aD1cIjJcIiBkPVwiTTEyIDl2Mm0wIDRoLjAxbS02LjkzOCA0aDEzLjg1NmMxLjU0IDAgMi41MDItMS42NjcgMS43MzItM0wxMy43MzIgNGMtLjc3LTEuMzMzLTIuNjk0LTEuMzMzLTMuNDY0IDBMMy4zNCAxNmMtLjc3IDEuMzMzLjE5MiAzIDEuNzMyIDN6XCIgLz5cclxuICAgICAgICAgICAgPC9zdmc+XHJcbiAgICAgICAgPC9zcGFuPmA7XHJcbiAgICAgICAgYWR1bHRkaXYuYXBwZW5kQ2hpbGQoYWR1bHRUaXRsZSk7XHJcblxyXG4gICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1NjIxMFx1NEVCQUFQSVx1NkU5MFx1NzY4NFx1NTkwRFx1OTAwOVx1Njg0NlxyXG4gICAgICAgIE9iamVjdC5rZXlzKEFQSV9TSVRFUykuZm9yRWFjaChhcGlLZXkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBhcGkgPSBBUElfU0lURVNbYXBpS2V5XTtcclxuICAgICAgICAgICAgaWYgKCFhcGkuYWR1bHQpIHJldHVybjsgLy8gXHU0RUM1XHU2REZCXHU1MkEwXHU2MjEwXHU0RUJBXHU1MTg1XHU1QkI5QVBJXHJcblxyXG4gICAgICAgICAgICBjb25zdCBjaGVja2VkID0gc2VsZWN0ZWRBUElzLmluY2x1ZGVzKGFwaUtleSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBjaGVja2JveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBjaGVja2JveC5jbGFzc05hbWUgPSAnZmxleCBpdGVtcy1jZW50ZXInO1xyXG4gICAgICAgICAgICBjaGVja2JveC5pbm5lckhUTUwgPSBgXHJcbiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgaWQ9XCJhcGlfJHthcGlLZXl9XCIgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJmb3JtLWNoZWNrYm94IGgtMyB3LTMgdGV4dC1ibHVlLTYwMCBiZy1bIzIyMl0gYm9yZGVyIGJvcmRlci1bIzMzM10gYXBpLWFkdWx0XCIgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgJHtjaGVja2VkID8gJ2NoZWNrZWQnIDogJyd9IFxyXG4gICAgICAgICAgICAgICAgICAgICAgIGRhdGEtYXBpPVwiJHthcGlLZXl9XCI+XHJcbiAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwiYXBpXyR7YXBpS2V5fVwiIGNsYXNzPVwibWwtMSB0ZXh0LXhzIHRleHQtcGluay00MDAgdHJ1bmNhdGVcIj4ke2FwaS5uYW1lfTwvbGFiZWw+XHJcbiAgICAgICAgICAgIGA7XHJcbiAgICAgICAgICAgIGFkdWx0ZGl2LmFwcGVuZENoaWxkKGNoZWNrYm94KTtcclxuXHJcbiAgICAgICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NEU4Qlx1NEVGNlx1NzZEMVx1NTQyQ1x1NTY2OFxyXG4gICAgICAgICAgICBjaGVja2JveC5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHVwZGF0ZVNlbGVjdGVkQVBJcygpO1xyXG4gICAgICAgICAgICAgICAgY2hlY2tBZHVsdEFQSXNTZWxlY3RlZCgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoYWR1bHRkaXYpO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyBcdTY4QzBcdTY3RTVcdTY2MkZcdTU0MjZcdTY3MDlcdTYyMTBcdTRFQkFBUElcdTg4QUJcdTkwMDlcdTRFMkRcclxuZnVuY3Rpb24gY2hlY2tBZHVsdEFQSXNTZWxlY3RlZCgpIHtcclxuICAgIC8vIFx1NjdFNVx1NjI3RVx1NjI0MFx1NjcwOVx1NTE4NVx1N0Y2RVx1NjIxMFx1NEVCQUFQSVx1NTkwRFx1OTAwOVx1Njg0NlxyXG4gICAgY29uc3QgYWR1bHRCdWlsdGluQ2hlY2tib3hlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJyNhcGlDaGVja2JveGVzIC5hcGktYWR1bHQ6Y2hlY2tlZCcpO1xyXG5cclxuICAgIC8vIFx1NjdFNVx1NjI3RVx1NjI0MFx1NjcwOVx1ODFFQVx1NUI5QVx1NEU0OVx1NjIxMFx1NEVCQUFQSVx1NTkwRFx1OTAwOVx1Njg0NlxyXG4gICAgY29uc3QgY3VzdG9tQXBpQ2hlY2tib3hlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJyNjdXN0b21BcGlzTGlzdCAuYXBpLWFkdWx0OmNoZWNrZWQnKTtcclxuXHJcbiAgICBjb25zdCBoYXNBZHVsdFNlbGVjdGVkID0gYWR1bHRCdWlsdGluQ2hlY2tib3hlcy5sZW5ndGggPiAwIHx8IGN1c3RvbUFwaUNoZWNrYm94ZXMubGVuZ3RoID4gMDtcclxuXHJcbiAgICBjb25zdCB5ZWxsb3dGaWx0ZXJUb2dnbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgneWVsbG93RmlsdGVyVG9nZ2xlJyk7XHJcbiAgICBjb25zdCB5ZWxsb3dGaWx0ZXJDb250YWluZXIgPSB5ZWxsb3dGaWx0ZXJUb2dnbGUuY2xvc2VzdCgnZGl2JykucGFyZW50Tm9kZTtcclxuICAgIGNvbnN0IGZpbHRlckRlc2NyaXB0aW9uID0geWVsbG93RmlsdGVyQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ3AuZmlsdGVyLWRlc2NyaXB0aW9uJyk7XHJcblxyXG4gICAgLy8gXHU1OTgyXHU2NzlDXHU5MDA5XHU2MkU5XHU0RTg2XHU2MjEwXHU0RUJBQVBJXHVGRjBDXHU3OTgxXHU3NTI4XHU5RUM0XHU4MjcyXHU1MTg1XHU1QkI5XHU4RkM3XHU2RUU0XHU1NjY4XHJcbiAgICBpZiAoaGFzQWR1bHRTZWxlY3RlZCkge1xyXG4gICAgICAgIHllbGxvd0ZpbHRlclRvZ2dsZS5jaGVja2VkID0gZmFsc2U7XHJcbiAgICAgICAgeWVsbG93RmlsdGVyVG9nZ2xlLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgneWVsbG93RmlsdGVyRW5hYmxlZCcsICdmYWxzZScpO1xyXG5cclxuICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTc5ODFcdTc1MjhcdTY4MzdcdTVGMEZcclxuICAgICAgICB5ZWxsb3dGaWx0ZXJDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnZmlsdGVyLWRpc2FibGVkJyk7XHJcblxyXG4gICAgICAgIC8vIFx1NEZFRVx1NjUzOVx1NjNDRlx1OEZGMFx1NjU4N1x1NUI1N1xyXG4gICAgICAgIGlmIChmaWx0ZXJEZXNjcmlwdGlvbikge1xyXG4gICAgICAgICAgICBmaWx0ZXJEZXNjcmlwdGlvbi5pbm5lckhUTUwgPSAnPHN0cm9uZyBjbGFzcz1cInRleHQtcGluay0zMDBcIj5cdTkwMDlcdTRFMkRcdTlFQzRcdTgyNzJcdThENDRcdTZFOTBcdTdBRDlcdTY1RjZcdTY1RTBcdTZDRDVcdTU0MkZcdTc1MjhcdTZCNjRcdThGQzdcdTZFRTQ8L3N0cm9uZz4nO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gXHU3OUZCXHU5NjY0XHU2M0QwXHU3OTNBXHU0RkUxXHU2MDZGXHVGRjA4XHU1OTgyXHU2NzlDXHU1QjU4XHU1NzI4XHVGRjA5XHJcbiAgICAgICAgY29uc3QgZXhpc3RpbmdUb29sdGlwID0geWVsbG93RmlsdGVyQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5maWx0ZXItdG9vbHRpcCcpO1xyXG4gICAgICAgIGlmIChleGlzdGluZ1Rvb2x0aXApIHtcclxuICAgICAgICAgICAgZXhpc3RpbmdUb29sdGlwLnJlbW92ZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gXHU1NDJGXHU3NTI4XHU5RUM0XHU4MjcyXHU1MTg1XHU1QkI5XHU4RkM3XHU2RUU0XHU1NjY4XHJcbiAgICAgICAgeWVsbG93RmlsdGVyVG9nZ2xlLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgICAgeWVsbG93RmlsdGVyQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ2ZpbHRlci1kaXNhYmxlZCcpO1xyXG5cclxuICAgICAgICAvLyBcdTYwNjJcdTU5MERcdTUzOUZcdTY3NjVcdTc2ODRcdTYzQ0ZcdThGRjBcdTY1ODdcdTVCNTdcclxuICAgICAgICBpZiAoZmlsdGVyRGVzY3JpcHRpb24pIHtcclxuICAgICAgICAgICAgZmlsdGVyRGVzY3JpcHRpb24uaW5uZXJIVE1MID0gJ1x1OEZDN1x1NkVFNFwiXHU0RjI2XHU3NDA2XHU3MjQ3XCJcdTdCNDlcdTlFQzRcdTgyNzJcdTUxODVcdTVCQjknO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gXHU3OUZCXHU5NjY0XHU2M0QwXHU3OTNBXHU0RkUxXHU2MDZGXHJcbiAgICAgICAgY29uc3QgZXhpc3RpbmdUb29sdGlwID0geWVsbG93RmlsdGVyQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5maWx0ZXItdG9vbHRpcCcpO1xyXG4gICAgICAgIGlmIChleGlzdGluZ1Rvb2x0aXApIHtcclxuICAgICAgICAgICAgZXhpc3RpbmdUb29sdGlwLnJlbW92ZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuLy8gXHU2RTMyXHU2N0QzXHU4MUVBXHU1QjlBXHU0RTQ5QVBJXHU1MjE3XHU4ODY4XHJcbmZ1bmN0aW9uIHJlbmRlckN1c3RvbUFQSXNMaXN0KCkge1xyXG4gICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1c3RvbUFwaXNMaXN0Jyk7XHJcbiAgICBpZiAoIWNvbnRhaW5lcikgcmV0dXJuO1xyXG5cclxuICAgIGlmIChjdXN0b21BUElzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSAnPHAgY2xhc3M9XCJ0ZXh0LXhzIHRleHQtZ3JheS01MDAgdGV4dC1jZW50ZXIgbXktMlwiPlx1NjcyQVx1NkRGQlx1NTJBMFx1ODFFQVx1NUI5QVx1NEU0OUFQSTwvcD4nO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBjb250YWluZXIuaW5uZXJIVE1MID0gJyc7XHJcbiAgICBjdXN0b21BUElzLmZvckVhY2goKGFwaSwgaW5kZXgpID0+IHtcclxuICAgICAgICBjb25zdCBhcGlJdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgYXBpSXRlbS5jbGFzc05hbWUgPSAnZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIHAtMSBtYi0xIGJnLVsjMjIyXSByb3VuZGVkJztcclxuICAgICAgICBjb25zdCB0ZXh0Q29sb3JDbGFzcyA9IGFwaS5pc0FkdWx0ID8gJ3RleHQtcGluay00MDAnIDogJ3RleHQtd2hpdGUnO1xyXG4gICAgICAgIGNvbnN0IGFkdWx0VGFnID0gYXBpLmlzQWR1bHQgPyAnPHNwYW4gY2xhc3M9XCJ0ZXh0LXhzIHRleHQtcGluay00MDAgbXItMVwiPigxOCspPC9zcGFuPicgOiAnJztcclxuICAgICAgICAvLyBcdTY1QjBcdTU4OUUgZGV0YWlsIFx1NTczMFx1NTc0MFx1NjYzRVx1NzkzQVxyXG4gICAgICAgIGNvbnN0IGRldGFpbExpbmUgPSBhcGkuZGV0YWlsID8gYDxkaXYgY2xhc3M9XCJ0ZXh0LXhzIHRleHQtZ3JheS00MDAgdHJ1bmNhdGVcIj5kZXRhaWw6ICR7YXBpLmRldGFpbH08L2Rpdj5gIDogJyc7XHJcbiAgICAgICAgYXBpSXRlbS5pbm5lckhUTUwgPSBgXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmbGV4IGl0ZW1zLWNlbnRlciBmbGV4LTEgbWluLXctMFwiPlxyXG4gICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIGlkPVwiY3VzdG9tX2FwaV8ke2luZGV4fVwiIFxyXG4gICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwiZm9ybS1jaGVja2JveCBoLTMgdy0zIHRleHQtYmx1ZS02MDAgbXItMSAke2FwaS5pc0FkdWx0ID8gJ2FwaS1hZHVsdCcgOiAnJ31cIiBcclxuICAgICAgICAgICAgICAgICAgICAgICAke3NlbGVjdGVkQVBJcy5pbmNsdWRlcygnY3VzdG9tXycgKyBpbmRleCkgPyAnY2hlY2tlZCcgOiAnJ30gXHJcbiAgICAgICAgICAgICAgICAgICAgICAgZGF0YS1jdXN0b20taW5kZXg9XCIke2luZGV4fVwiPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZsZXgtMSBtaW4tdy0wXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRleHQteHMgZm9udC1tZWRpdW0gJHt0ZXh0Q29sb3JDbGFzc30gdHJ1bmNhdGVcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgJHthZHVsdFRhZ30ke2FwaS5uYW1lfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0ZXh0LXhzIHRleHQtZ3JheS01MDAgdHJ1bmNhdGVcIj4ke2FwaS51cmx9PC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgJHtkZXRhaWxMaW5lfVxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleCBpdGVtcy1jZW50ZXJcIj5cclxuICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJ0ZXh0LWJsdWUtNTAwIGhvdmVyOnRleHQtYmx1ZS03MDAgdGV4dC14cyBweC0xXCIgb25jbGljaz1cImVkaXRDdXN0b21BcGkoJHtpbmRleH0pXCI+XHUyNzBFPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwidGV4dC1yZWQtNTAwIGhvdmVyOnRleHQtcmVkLTcwMCB0ZXh0LXhzIHB4LTFcIiBvbmNsaWNrPVwicmVtb3ZlQ3VzdG9tQXBpKCR7aW5kZXh9KVwiPlx1MjcxNTwvYnV0dG9uPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICBgO1xyXG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChhcGlJdGVtKTtcclxuICAgICAgICBhcGlJdGVtLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0JykuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB1cGRhdGVTZWxlY3RlZEFQSXMoKTtcclxuICAgICAgICAgICAgY2hlY2tBZHVsdEFQSXNTZWxlY3RlZCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8vIFx1N0YxNlx1OEY5MVx1ODFFQVx1NUI5QVx1NEU0OUFQSVxyXG5mdW5jdGlvbiBlZGl0Q3VzdG9tQXBpKGluZGV4KSB7XHJcbiAgICBpZiAoaW5kZXggPCAwIHx8IGluZGV4ID49IGN1c3RvbUFQSXMubGVuZ3RoKSByZXR1cm47XHJcbiAgICBjb25zdCBhcGkgPSBjdXN0b21BUElzW2luZGV4XTtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdXN0b21BcGlOYW1lJykudmFsdWUgPSBhcGkubmFtZTtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdXN0b21BcGlVcmwnKS52YWx1ZSA9IGFwaS51cmw7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3VzdG9tQXBpRGV0YWlsJykudmFsdWUgPSBhcGkuZGV0YWlsIHx8ICcnO1xyXG4gICAgY29uc3QgaXNBZHVsdElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1c3RvbUFwaUlzQWR1bHQnKTtcclxuICAgIGlmIChpc0FkdWx0SW5wdXQpIGlzQWR1bHRJbnB1dC5jaGVja2VkID0gYXBpLmlzQWR1bHQgfHwgZmFsc2U7XHJcbiAgICBjb25zdCBmb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkZEN1c3RvbUFwaUZvcm0nKTtcclxuICAgIGlmIChmb3JtKSB7XHJcbiAgICAgICAgZm9ybS5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcclxuICAgICAgICBjb25zdCBidXR0b25Db250YWluZXIgPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoJ2RpdjpsYXN0LWNoaWxkJyk7XHJcbiAgICAgICAgYnV0dG9uQ29udGFpbmVyLmlubmVySFRNTCA9IGBcclxuICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPVwidXBkYXRlQ3VzdG9tQXBpKCR7aW5kZXh9KVwiIGNsYXNzPVwiYmctYmx1ZS02MDAgaG92ZXI6YmctYmx1ZS03MDAgdGV4dC13aGl0ZSBweC0zIHB5LTEgcm91bmRlZCB0ZXh0LXhzXCI+XHU2NkY0XHU2NUIwPC9idXR0b24+XHJcbiAgICAgICAgICAgIDxidXR0b24gb25jbGljaz1cImNhbmNlbEVkaXRDdXN0b21BcGkoKVwiIGNsYXNzPVwiYmctWyM0NDRdIGhvdmVyOmJnLVsjNTU1XSB0ZXh0LXdoaXRlIHB4LTMgcHktMSByb3VuZGVkIHRleHQteHNcIj5cdTUzRDZcdTZEODg8L2J1dHRvbj5cclxuICAgICAgICBgO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyBcdTY2RjRcdTY1QjBcdTgxRUFcdTVCOUFcdTRFNDlBUElcclxuZnVuY3Rpb24gdXBkYXRlQ3VzdG9tQXBpKGluZGV4KSB7XHJcbiAgICBpZiAoaW5kZXggPCAwIHx8IGluZGV4ID49IGN1c3RvbUFQSXMubGVuZ3RoKSByZXR1cm47XHJcbiAgICBjb25zdCBuYW1lSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3VzdG9tQXBpTmFtZScpO1xyXG4gICAgY29uc3QgdXJsSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3VzdG9tQXBpVXJsJyk7XHJcbiAgICBjb25zdCBkZXRhaWxJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdXN0b21BcGlEZXRhaWwnKTtcclxuICAgIGNvbnN0IGlzQWR1bHRJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdXN0b21BcGlJc0FkdWx0Jyk7XHJcbiAgICBjb25zdCBuYW1lID0gbmFtZUlucHV0LnZhbHVlLnRyaW0oKTtcclxuICAgIGxldCB1cmwgPSB1cmxJbnB1dC52YWx1ZS50cmltKCk7XHJcbiAgICBjb25zdCBkZXRhaWwgPSBkZXRhaWxJbnB1dCA/IGRldGFpbElucHV0LnZhbHVlLnRyaW0oKSA6ICcnO1xyXG4gICAgY29uc3QgaXNBZHVsdCA9IGlzQWR1bHRJbnB1dCA/IGlzQWR1bHRJbnB1dC5jaGVja2VkIDogZmFsc2U7XHJcbiAgICBpZiAoIW5hbWUgfHwgIXVybCkge1xyXG4gICAgICAgIHNob3dUb2FzdCgnXHU4QkY3XHU4RjkzXHU1MTY1QVBJXHU1NDBEXHU3OUYwXHU1NDhDXHU5NEZFXHU2M0E1JywgJ3dhcm5pbmcnKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAoIS9eaHR0cHM/OlxcL1xcLy4rLy50ZXN0KHVybCkpIHtcclxuICAgICAgICBzaG93VG9hc3QoJ0FQSVx1OTRGRVx1NjNBNVx1NjgzQ1x1NUYwRlx1NEUwRFx1NkI2M1x1Nzg2RVx1RkYwQ1x1OTcwMFx1NEVFNWh0dHA6Ly9cdTYyMTZodHRwczovL1x1NUYwMFx1NTkzNCcsICd3YXJuaW5nJyk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKHVybC5lbmRzV2l0aCgnLycpKSB1cmwgPSB1cmwuc2xpY2UoMCwgLTEpO1xyXG4gICAgLy8gXHU0RkREXHU1QjU4IGRldGFpbCBcdTVCNTdcdTZCQjVcclxuICAgIGN1c3RvbUFQSXNbaW5kZXhdID0geyBuYW1lLCB1cmwsIGRldGFpbCwgaXNBZHVsdCB9O1xyXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2N1c3RvbUFQSXMnLCBKU09OLnN0cmluZ2lmeShjdXN0b21BUElzKSk7XHJcbiAgICByZW5kZXJDdXN0b21BUElzTGlzdCgpO1xyXG4gICAgY2hlY2tBZHVsdEFQSXNTZWxlY3RlZCgpO1xyXG4gICAgcmVzdG9yZUFkZEN1c3RvbUFwaUJ1dHRvbnMoKTtcclxuICAgIG5hbWVJbnB1dC52YWx1ZSA9ICcnO1xyXG4gICAgdXJsSW5wdXQudmFsdWUgPSAnJztcclxuICAgIGlmIChkZXRhaWxJbnB1dCkgZGV0YWlsSW5wdXQudmFsdWUgPSAnJztcclxuICAgIGlmIChpc0FkdWx0SW5wdXQpIGlzQWR1bHRJbnB1dC5jaGVja2VkID0gZmFsc2U7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRkQ3VzdG9tQXBpRm9ybScpLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xyXG4gICAgc2hvd1RvYXN0KCdcdTVERjJcdTY2RjRcdTY1QjBcdTgxRUFcdTVCOUFcdTRFNDlBUEk6ICcgKyBuYW1lLCAnc3VjY2VzcycpO1xyXG59XHJcblxyXG4vLyBcdTUzRDZcdTZEODhcdTdGMTZcdThGOTFcdTgxRUFcdTVCOUFcdTRFNDlBUElcclxuZnVuY3Rpb24gY2FuY2VsRWRpdEN1c3RvbUFwaSgpIHtcclxuICAgIC8vIFx1NkUwNVx1N0E3QVx1ODg2OFx1NTM1NVxyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1c3RvbUFwaU5hbWUnKS52YWx1ZSA9ICcnO1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1c3RvbUFwaVVybCcpLnZhbHVlID0gJyc7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3VzdG9tQXBpRGV0YWlsJykudmFsdWUgPSAnJztcclxuICAgIGNvbnN0IGlzQWR1bHRJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdXN0b21BcGlJc0FkdWx0Jyk7XHJcbiAgICBpZiAoaXNBZHVsdElucHV0KSBpc0FkdWx0SW5wdXQuY2hlY2tlZCA9IGZhbHNlO1xyXG5cclxuICAgIC8vIFx1OTY5MFx1ODVDRlx1ODg2OFx1NTM1NVxyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkZEN1c3RvbUFwaUZvcm0nKS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcclxuXHJcbiAgICAvLyBcdTYwNjJcdTU5MERcdTZERkJcdTUyQTBcdTYzMDlcdTk0QUVcclxuICAgIHJlc3RvcmVBZGRDdXN0b21BcGlCdXR0b25zKCk7XHJcbn1cclxuXHJcbi8vIFx1NjA2Mlx1NTkwRFx1ODFFQVx1NUI5QVx1NEU0OUFQSVx1NkRGQlx1NTJBMFx1NjMwOVx1OTRBRVxyXG5mdW5jdGlvbiByZXN0b3JlQWRkQ3VzdG9tQXBpQnV0dG9ucygpIHtcclxuICAgIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRkQ3VzdG9tQXBpRm9ybScpO1xyXG4gICAgY29uc3QgYnV0dG9uQ29udGFpbmVyID0gZm9ybS5xdWVyeVNlbGVjdG9yKCdkaXY6bGFzdC1jaGlsZCcpO1xyXG4gICAgYnV0dG9uQ29udGFpbmVyLmlubmVySFRNTCA9IGBcclxuICAgICAgICA8YnV0dG9uIG9uY2xpY2s9XCJhZGRDdXN0b21BcGkoKVwiIGNsYXNzPVwiYmctYmx1ZS02MDAgaG92ZXI6YmctYmx1ZS03MDAgdGV4dC13aGl0ZSBweC0zIHB5LTEgcm91bmRlZCB0ZXh0LXhzXCI+XHU2REZCXHU1MkEwPC9idXR0b24+XHJcbiAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPVwiY2FuY2VsQWRkQ3VzdG9tQXBpKClcIiBjbGFzcz1cImJnLVsjNDQ0XSBob3ZlcjpiZy1bIzU1NV0gdGV4dC13aGl0ZSBweC0zIHB5LTEgcm91bmRlZCB0ZXh0LXhzXCI+XHU1M0Q2XHU2RDg4PC9idXR0b24+XHJcbiAgICBgO1xyXG59XHJcblxyXG4vLyBcdTY2RjRcdTY1QjBcdTkwMDlcdTRFMkRcdTc2ODRBUElcdTUyMTdcdTg4NjhcclxuZnVuY3Rpb24gdXBkYXRlU2VsZWN0ZWRBUElzKCkge1xyXG4gICAgLy8gXHU4M0I3XHU1M0Q2XHU2MjQwXHU2NzA5XHU1MTg1XHU3RjZFQVBJXHU1OTBEXHU5MDA5XHU2ODQ2XHJcbiAgICBjb25zdCBidWlsdEluQXBpQ2hlY2tib3hlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJyNhcGlDaGVja2JveGVzIGlucHV0OmNoZWNrZWQnKTtcclxuXHJcbiAgICAvLyBcdTgzQjdcdTUzRDZcdTkwMDlcdTRFMkRcdTc2ODRcdTUxODVcdTdGNkVBUElcclxuICAgIGNvbnN0IGJ1aWx0SW5BcGlzID0gQXJyYXkuZnJvbShidWlsdEluQXBpQ2hlY2tib3hlcykubWFwKGlucHV0ID0+IGlucHV0LmRhdGFzZXQuYXBpKTtcclxuXHJcbiAgICAvLyBcdTgzQjdcdTUzRDZcdTkwMDlcdTRFMkRcdTc2ODRcdTgxRUFcdTVCOUFcdTRFNDlBUElcclxuICAgIGNvbnN0IGN1c3RvbUFwaUNoZWNrYm94ZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcjY3VzdG9tQXBpc0xpc3QgaW5wdXQ6Y2hlY2tlZCcpO1xyXG4gICAgY29uc3QgY3VzdG9tQXBpSW5kaWNlcyA9IEFycmF5LmZyb20oY3VzdG9tQXBpQ2hlY2tib3hlcykubWFwKGlucHV0ID0+ICdjdXN0b21fJyArIGlucHV0LmRhdGFzZXQuY3VzdG9tSW5kZXgpO1xyXG5cclxuICAgIC8vIFx1NTQwOFx1NUU3Nlx1NTE4NVx1N0Y2RVx1NTQ4Q1x1ODFFQVx1NUI5QVx1NEU0OUFQSVxyXG4gICAgc2VsZWN0ZWRBUElzID0gWy4uLmJ1aWx0SW5BcGlzLCAuLi5jdXN0b21BcGlJbmRpY2VzXTtcclxuXHJcbiAgICAvLyBcdTRGRERcdTVCNThcdTUyMzBsb2NhbFN0b3JhZ2VcclxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdzZWxlY3RlZEFQSXMnLCBKU09OLnN0cmluZ2lmeShzZWxlY3RlZEFQSXMpKTtcclxuXHJcbiAgICAvLyBcdTY2RjRcdTY1QjBcdTY2M0VcdTc5M0FcdTkwMDlcdTRFMkRcdTc2ODRBUElcdTY1NzBcdTkxQ0ZcclxuICAgIHVwZGF0ZVNlbGVjdGVkQXBpQ291bnQoKTtcclxufVxyXG5cclxuLy8gXHU2NkY0XHU2NUIwXHU5MDA5XHU0RTJEXHU3Njg0QVBJXHU2NTcwXHU5MUNGXHU2NjNFXHU3OTNBXHJcbmZ1bmN0aW9uIHVwZGF0ZVNlbGVjdGVkQXBpQ291bnQoKSB7XHJcbiAgICBjb25zdCBjb3VudEVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlbGVjdGVkQXBpQ291bnQnKTtcclxuICAgIGlmIChjb3VudEVsKSB7XHJcbiAgICAgICAgY291bnRFbC50ZXh0Q29udGVudCA9IHNlbGVjdGVkQVBJcy5sZW5ndGg7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIFx1NTE2OFx1OTAwOVx1NjIxNlx1NTNENlx1NkQ4OFx1NTE2OFx1OTAwOUFQSVxyXG5mdW5jdGlvbiBzZWxlY3RBbGxBUElzKHNlbGVjdEFsbCA9IHRydWUsIGV4Y2x1ZGVBZHVsdCA9IGZhbHNlKSB7XHJcbiAgICBjb25zdCBjaGVja2JveGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnI2FwaUNoZWNrYm94ZXMgaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdJyk7XHJcblxyXG4gICAgY2hlY2tib3hlcy5mb3JFYWNoKGNoZWNrYm94ID0+IHtcclxuICAgICAgICBpZiAoZXhjbHVkZUFkdWx0ICYmIGNoZWNrYm94LmNsYXNzTGlzdC5jb250YWlucygnYXBpLWFkdWx0JykpIHtcclxuICAgICAgICAgICAgY2hlY2tib3guY2hlY2tlZCA9IGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNoZWNrYm94LmNoZWNrZWQgPSBzZWxlY3RBbGw7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgdXBkYXRlU2VsZWN0ZWRBUElzKCk7XHJcbiAgICBjaGVja0FkdWx0QVBJc1NlbGVjdGVkKCk7XHJcbn1cclxuXHJcbi8vIFx1NjYzRVx1NzkzQVx1NkRGQlx1NTJBMFx1ODFFQVx1NUI5QVx1NEU0OUFQSVx1ODg2OFx1NTM1NVxyXG5mdW5jdGlvbiBzaG93QWRkQ3VzdG9tQXBpRm9ybSgpIHtcclxuICAgIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRkQ3VzdG9tQXBpRm9ybScpO1xyXG4gICAgaWYgKGZvcm0pIHtcclxuICAgICAgICBmb3JtLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyBcdTUzRDZcdTZEODhcdTZERkJcdTUyQTBcdTgxRUFcdTVCOUFcdTRFNDlBUEkgLSBcdTRGRUVcdTY1MzlcdTUxRkRcdTY1NzBcdTY3NjVcdTkxQ0RcdTc1MjhcdTYwNjJcdTU5MERcdTYzMDlcdTk0QUVcdTkwM0JcdThGOTFcclxuZnVuY3Rpb24gY2FuY2VsQWRkQ3VzdG9tQXBpKCkge1xyXG4gICAgY29uc3QgZm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGRDdXN0b21BcGlGb3JtJyk7XHJcbiAgICBpZiAoZm9ybSkge1xyXG4gICAgICAgIGZvcm0uY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1c3RvbUFwaU5hbWUnKS52YWx1ZSA9ICcnO1xyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdXN0b21BcGlVcmwnKS52YWx1ZSA9ICcnO1xyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdXN0b21BcGlEZXRhaWwnKS52YWx1ZSA9ICcnO1xyXG4gICAgICAgIGNvbnN0IGlzQWR1bHRJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdXN0b21BcGlJc0FkdWx0Jyk7XHJcbiAgICAgICAgaWYgKGlzQWR1bHRJbnB1dCkgaXNBZHVsdElucHV0LmNoZWNrZWQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgLy8gXHU3ODZFXHU0RkREXHU2MzA5XHU5NEFFXHU2NjJGXHU2REZCXHU1MkEwXHU2MzA5XHU5NEFFXHJcbiAgICAgICAgcmVzdG9yZUFkZEN1c3RvbUFwaUJ1dHRvbnMoKTtcclxuICAgIH1cclxufVxyXG5cclxuLy8gXHU2REZCXHU1MkEwXHU4MUVBXHU1QjlBXHU0RTQ5QVBJXHJcbmZ1bmN0aW9uIGFkZEN1c3RvbUFwaSgpIHtcclxuICAgIGNvbnN0IG5hbWVJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdXN0b21BcGlOYW1lJyk7XHJcbiAgICBjb25zdCB1cmxJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdXN0b21BcGlVcmwnKTtcclxuICAgIGNvbnN0IGRldGFpbElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1c3RvbUFwaURldGFpbCcpO1xyXG4gICAgY29uc3QgaXNBZHVsdElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1c3RvbUFwaUlzQWR1bHQnKTtcclxuICAgIGNvbnN0IG5hbWUgPSBuYW1lSW5wdXQudmFsdWUudHJpbSgpO1xyXG4gICAgbGV0IHVybCA9IHVybElucHV0LnZhbHVlLnRyaW0oKTtcclxuICAgIGNvbnN0IGRldGFpbCA9IGRldGFpbElucHV0ID8gZGV0YWlsSW5wdXQudmFsdWUudHJpbSgpIDogJyc7XHJcbiAgICBjb25zdCBpc0FkdWx0ID0gaXNBZHVsdElucHV0ID8gaXNBZHVsdElucHV0LmNoZWNrZWQgOiBmYWxzZTtcclxuICAgIGlmICghbmFtZSB8fCAhdXJsKSB7XHJcbiAgICAgICAgc2hvd1RvYXN0KCdcdThCRjdcdThGOTNcdTUxNjVBUElcdTU0MERcdTc5RjBcdTU0OENcdTk0RkVcdTYzQTUnLCAnd2FybmluZycpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmICghL15odHRwcz86XFwvXFwvLisvLnRlc3QodXJsKSkge1xyXG4gICAgICAgIHNob3dUb2FzdCgnQVBJXHU5NEZFXHU2M0E1XHU2ODNDXHU1RjBGXHU0RTBEXHU2QjYzXHU3ODZFXHVGRjBDXHU5NzAwXHU0RUU1aHR0cDovL1x1NjIxNmh0dHBzOi8vXHU1RjAwXHU1OTM0JywgJ3dhcm5pbmcnKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAodXJsLmVuZHNXaXRoKCcvJykpIHtcclxuICAgICAgICB1cmwgPSB1cmwuc2xpY2UoMCwgLTEpO1xyXG4gICAgfVxyXG4gICAgLy8gXHU0RkREXHU1QjU4IGRldGFpbCBcdTVCNTdcdTZCQjVcclxuICAgIGN1c3RvbUFQSXMucHVzaCh7IG5hbWUsIHVybCwgZGV0YWlsLCBpc0FkdWx0IH0pO1xyXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2N1c3RvbUFQSXMnLCBKU09OLnN0cmluZ2lmeShjdXN0b21BUElzKSk7XHJcbiAgICBjb25zdCBuZXdBcGlJbmRleCA9IGN1c3RvbUFQSXMubGVuZ3RoIC0gMTtcclxuICAgIHNlbGVjdGVkQVBJcy5wdXNoKCdjdXN0b21fJyArIG5ld0FwaUluZGV4KTtcclxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdzZWxlY3RlZEFQSXMnLCBKU09OLnN0cmluZ2lmeShzZWxlY3RlZEFQSXMpKTtcclxuXHJcbiAgICAvLyBcdTkxQ0RcdTY1QjBcdTZFMzJcdTY3RDNcdTgxRUFcdTVCOUFcdTRFNDlBUElcdTUyMTdcdTg4NjhcclxuICAgIHJlbmRlckN1c3RvbUFQSXNMaXN0KCk7XHJcbiAgICB1cGRhdGVTZWxlY3RlZEFwaUNvdW50KCk7XHJcbiAgICBjaGVja0FkdWx0QVBJc1NlbGVjdGVkKCk7XHJcbiAgICBuYW1lSW5wdXQudmFsdWUgPSAnJztcclxuICAgIHVybElucHV0LnZhbHVlID0gJyc7XHJcbiAgICBpZiAoZGV0YWlsSW5wdXQpIGRldGFpbElucHV0LnZhbHVlID0gJyc7XHJcbiAgICBpZiAoaXNBZHVsdElucHV0KSBpc0FkdWx0SW5wdXQuY2hlY2tlZCA9IGZhbHNlO1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkZEN1c3RvbUFwaUZvcm0nKS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcclxuICAgIHNob3dUb2FzdCgnXHU1REYyXHU2REZCXHU1MkEwXHU4MUVBXHU1QjlBXHU0RTQ5QVBJOiAnICsgbmFtZSwgJ3N1Y2Nlc3MnKTtcclxufVxyXG5cclxuLy8gXHU3OUZCXHU5NjY0XHU4MUVBXHU1QjlBXHU0RTQ5QVBJXHJcbmZ1bmN0aW9uIHJlbW92ZUN1c3RvbUFwaShpbmRleCkge1xyXG4gICAgaWYgKGluZGV4IDwgMCB8fCBpbmRleCA+PSBjdXN0b21BUElzLmxlbmd0aCkgcmV0dXJuO1xyXG5cclxuICAgIGNvbnN0IGFwaU5hbWUgPSBjdXN0b21BUElzW2luZGV4XS5uYW1lO1xyXG5cclxuICAgIC8vIFx1NEVDRVx1NTIxN1x1ODg2OFx1NEUyRFx1NzlGQlx1OTY2NEFQSVxyXG4gICAgY3VzdG9tQVBJcy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2N1c3RvbUFQSXMnLCBKU09OLnN0cmluZ2lmeShjdXN0b21BUElzKSk7XHJcblxyXG4gICAgLy8gXHU0RUNFXHU5MDA5XHU0RTJEXHU1MjE3XHU4ODY4XHU0RTJEXHU3OUZCXHU5NjY0XHU2QjY0QVBJXHJcbiAgICBjb25zdCBjdXN0b21BcGlJZCA9ICdjdXN0b21fJyArIGluZGV4O1xyXG4gICAgc2VsZWN0ZWRBUElzID0gc2VsZWN0ZWRBUElzLmZpbHRlcihpZCA9PiBpZCAhPT0gY3VzdG9tQXBpSWQpO1xyXG5cclxuICAgIC8vIFx1NjZGNFx1NjVCMFx1NTkyN1x1NEU4RVx1NkI2NFx1N0QyMlx1NUYxNVx1NzY4NFx1ODFFQVx1NUI5QVx1NEU0OUFQSVx1N0QyMlx1NUYxNVxyXG4gICAgc2VsZWN0ZWRBUElzID0gc2VsZWN0ZWRBUElzLm1hcChpZCA9PiB7XHJcbiAgICAgICAgaWYgKGlkLnN0YXJ0c1dpdGgoJ2N1c3RvbV8nKSkge1xyXG4gICAgICAgICAgICBjb25zdCBjdXJyZW50SW5kZXggPSBwYXJzZUludChpZC5yZXBsYWNlKCdjdXN0b21fJywgJycpKTtcclxuICAgICAgICAgICAgaWYgKGN1cnJlbnRJbmRleCA+IGluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ2N1c3RvbV8nICsgKGN1cnJlbnRJbmRleCAtIDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpZDtcclxuICAgIH0pO1xyXG5cclxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdzZWxlY3RlZEFQSXMnLCBKU09OLnN0cmluZ2lmeShzZWxlY3RlZEFQSXMpKTtcclxuXHJcbiAgICAvLyBcdTkxQ0RcdTY1QjBcdTZFMzJcdTY3RDNcdTgxRUFcdTVCOUFcdTRFNDlBUElcdTUyMTdcdTg4NjhcclxuICAgIHJlbmRlckN1c3RvbUFQSXNMaXN0KCk7XHJcblxyXG4gICAgLy8gXHU2NkY0XHU2NUIwXHU5MDA5XHU0RTJEXHU3Njg0QVBJXHU2NTcwXHU5MUNGXHJcbiAgICB1cGRhdGVTZWxlY3RlZEFwaUNvdW50KCk7XHJcblxyXG4gICAgLy8gXHU5MUNEXHU2NUIwXHU2OEMwXHU2N0U1XHU2MjEwXHU0RUJBQVBJXHU5MDA5XHU0RTJEXHU3MkI2XHU2MDAxXHJcbiAgICBjaGVja0FkdWx0QVBJc1NlbGVjdGVkKCk7XHJcblxyXG4gICAgc2hvd1RvYXN0KCdcdTVERjJcdTc5RkJcdTk2NjRcdTgxRUFcdTVCOUFcdTRFNDlBUEk6ICcgKyBhcGlOYW1lLCAnaW5mbycpO1xyXG59XHJcblxyXG5mdW5jdGlvbiB0b2dnbGVTZXR0aW5ncyhlKSB7XHJcbiAgICBjb25zdCBzZXR0aW5nc1BhbmVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NldHRpbmdzUGFuZWwnKTtcclxuICAgIGlmICghc2V0dGluZ3NQYW5lbCkgcmV0dXJuO1xyXG5cclxuICAgIGlmIChzZXR0aW5nc1BhbmVsLmNsYXNzTGlzdC5jb250YWlucygnc2hvdycpKSB7XHJcbiAgICAgICAgc2V0dGluZ3NQYW5lbC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHNldHRpbmdzUGFuZWwuY2xhc3NMaXN0LmFkZCgnc2hvdycpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIFx1OEJCRVx1N0Y2RVx1NEU4Qlx1NEVGNlx1NzZEMVx1NTQyQ1x1NTY2OFxyXG5mdW5jdGlvbiBzZXR1cEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgLy8gXHU1NkRFXHU4RjY2XHU2NDFDXHU3RDIyXHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VhcmNoSW5wdXQnKS5hZGRFdmVudExpc3RlbmVyKCdrZXlwcmVzcycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgaWYgKGUua2V5ID09PSAnRW50ZXInKSB7XHJcbiAgICAgICAgICAgIHNlYXJjaCgpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIC8vIFx1NzBCOVx1NTFGQlx1NTkxNlx1OTBFOFx1NTE3M1x1OTVFRFx1OEJCRVx1N0Y2RVx1OTc2Mlx1Njc3Rlx1NTQ4Q1x1NTM4Nlx1NTNGMlx1OEJCMFx1NUY1NVx1OTc2Mlx1Njc3RlxyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIC8vIFx1NTE3M1x1OTVFRFx1OEJCRVx1N0Y2RVx1OTc2Mlx1Njc3RlxyXG4gICAgICAgIGNvbnN0IHNldHRpbmdzUGFuZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2V0dGluZ3NQYW5lbC5zaG93Jyk7XHJcbiAgICAgICAgY29uc3Qgc2V0dGluZ3NCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2V0dGluZ3NQYW5lbCAuY2xvc2UtYnRuJyk7XHJcblxyXG4gICAgICAgIGlmIChzZXR0aW5nc1BhbmVsICYmIHNldHRpbmdzQnV0dG9uICYmXHJcbiAgICAgICAgICAgICFzZXR0aW5nc1BhbmVsLmNvbnRhaW5zKGUudGFyZ2V0KSAmJlxyXG4gICAgICAgICAgICAhc2V0dGluZ3NCdXR0b24uY29udGFpbnMoZS50YXJnZXQpKSB7XHJcbiAgICAgICAgICAgIHNldHRpbmdzUGFuZWwuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gXHU1MTczXHU5NUVEXHU1Mzg2XHU1M0YyXHU4QkIwXHU1RjU1XHU5NzYyXHU2NzdGXHJcbiAgICAgICAgY29uc3QgaGlzdG9yeVBhbmVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2hpc3RvcnlQYW5lbC5zaG93Jyk7XHJcbiAgICAgICAgY29uc3QgaGlzdG9yeUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNoaXN0b3J5UGFuZWwgLmNsb3NlLWJ0bicpO1xyXG5cclxuICAgICAgICBpZiAoaGlzdG9yeVBhbmVsICYmIGhpc3RvcnlCdXR0b24gJiZcclxuICAgICAgICAgICAgIWhpc3RvcnlQYW5lbC5jb250YWlucyhlLnRhcmdldCkgJiZcclxuICAgICAgICAgICAgIWhpc3RvcnlCdXR0b24uY29udGFpbnMoZS50YXJnZXQpKSB7XHJcbiAgICAgICAgICAgIGhpc3RvcnlQYW5lbC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gXHU5RUM0XHU4MjcyXHU1MTg1XHU1QkI5XHU4RkM3XHU2RUU0XHU1RjAwXHU1MTczXHU0RThCXHU0RUY2XHU3RUQxXHU1QjlBXHJcbiAgICBjb25zdCB5ZWxsb3dGaWx0ZXJUb2dnbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgneWVsbG93RmlsdGVyVG9nZ2xlJyk7XHJcbiAgICBpZiAoeWVsbG93RmlsdGVyVG9nZ2xlKSB7XHJcbiAgICAgICAgeWVsbG93RmlsdGVyVG9nZ2xlLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd5ZWxsb3dGaWx0ZXJFbmFibGVkJywgZS50YXJnZXQuY2hlY2tlZCk7XHJcblxyXG4gICAgICAgICAgICAvLyBcdTYzQTdcdTUyMzZcdTlFQzRcdTgyNzJcdTUxODVcdTVCQjlcdTYzQTVcdTUzRTNcdTc2ODRcdTY2M0VcdTc5M0FcdTcyQjZcdTYwMDFcclxuICAgICAgICAgICAgY29uc3QgYWR1bHRkaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWR1bHRkaXYnKTtcclxuICAgICAgICAgICAgaWYgKGFkdWx0ZGl2KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQuY2hlY2tlZCA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFkdWx0ZGl2LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGUudGFyZ2V0LmNoZWNrZWQgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWR1bHRkaXYuc3R5bGUuZGlzcGxheSA9ICcnXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTYyMTBcdTRFQkFBUElcdTUyMTdcdTg4NjhcclxuICAgICAgICAgICAgICAgIGFkZEFkdWx0QVBJKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdTVFN0ZcdTU0NEFcdThGQzdcdTZFRTRcdTVGMDBcdTUxNzNcdTRFOEJcdTRFRjZcdTdFRDFcdTVCOUFcclxuICAgIGNvbnN0IGFkRmlsdGVyVG9nZ2xlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkRmlsdGVyVG9nZ2xlJyk7XHJcbiAgICBpZiAoYWRGaWx0ZXJUb2dnbGUpIHtcclxuICAgICAgICBhZEZpbHRlclRvZ2dsZS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShQTEFZRVJfQ09ORklHLmFkRmlsdGVyaW5nU3RvcmFnZSwgZS50YXJnZXQuY2hlY2tlZCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIFx1OTFDRFx1N0Y2RVx1NjQxQ1x1N0QyMlx1NTMzQVx1NTdERlxyXG5mdW5jdGlvbiByZXNldFNlYXJjaEFyZWEoKSB7XHJcbiAgICAvLyBcdTZFMDVcdTc0MDZcdTY0MUNcdTdEMjJcdTdFRDNcdTY3OUNcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN1bHRzJykuaW5uZXJIVE1MID0gJyc7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VhcmNoSW5wdXQnKS52YWx1ZSA9ICcnO1xyXG5cclxuICAgIC8vIFx1NjA2Mlx1NTkwRFx1NjQxQ1x1N0QyMlx1NTMzQVx1NTdERlx1NzY4NFx1NjgzN1x1NUYwRlxyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlYXJjaEFyZWEnKS5jbGFzc0xpc3QuYWRkKCdmbGV4LTEnKTtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWFyY2hBcmVhJykuY2xhc3NMaXN0LnJlbW92ZSgnbWItOCcpO1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3VsdHNBcmVhJykuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XHJcblxyXG4gICAgLy8gXHU3ODZFXHU0RkREXHU5ODc1XHU4MTFBXHU2QjYzXHU3ODZFXHU2NjNFXHU3OTNBXHVGRjBDXHU3OUZCXHU5NjY0XHU3NkY4XHU1QkY5XHU1QjlBXHU0RjREXHJcbiAgICBjb25zdCBmb290ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZm9vdGVyJyk7XHJcbiAgICBpZiAoZm9vdGVyKSB7XHJcbiAgICAgICAgZm9vdGVyLnN0eWxlLnBvc2l0aW9uID0gJyc7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHU1OTgyXHU2NzlDXHU2NzA5XHU4QzQ2XHU3NEUzXHU1MjlGXHU4MEZEXHVGRjBDXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU5NzAwXHU4OTgxXHU2NjNFXHU3OTNBXHU4QzQ2XHU3NEUzXHU2M0E4XHU4MzUwXHU1MzNBXHU1N0RGXHJcbiAgICBpZiAodHlwZW9mIHVwZGF0ZURvdWJhblZpc2liaWxpdHkgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICB1cGRhdGVEb3ViYW5WaXNpYmlsaXR5KCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHU5MUNEXHU3RjZFVVJMXHU0RTNBXHU0RTNCXHU5ODc1XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZShcclxuICAgICAgICAgICAge30sXHJcbiAgICAgICAgICAgIGBMaWJyZVRWIC0gXHU1MTREXHU4RDM5XHU1NzI4XHU3RUJGXHU4OUM2XHU5ODkxXHU2NDFDXHU3RDIyXHU0RTBFXHU4OUMyXHU3NzBCXHU1RTczXHU1M0YwYCxcclxuICAgICAgICAgICAgYC9gXHJcbiAgICAgICAgKTtcclxuICAgICAgICAvLyBcdTY2RjRcdTY1QjBcdTk4NzVcdTk3NjJcdTY4MDdcdTk4OThcclxuICAgICAgICBkb2N1bWVudC50aXRsZSA9IGBMaWJyZVRWIC0gXHU1MTREXHU4RDM5XHU1NzI4XHU3RUJGXHU4OUM2XHU5ODkxXHU2NDFDXHU3RDIyXHU0RTBFXHU4OUMyXHU3NzBCXHU1RTczXHU1M0YwYDtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdcdTY2RjRcdTY1QjBcdTZENEZcdTg5QzhcdTU2NjhcdTUzODZcdTUzRjJcdTU5MzFcdThEMjU6JywgZSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIFx1ODNCN1x1NTNENlx1ODFFQVx1NUI5QVx1NEU0OUFQSVx1NEZFMVx1NjA2RlxyXG5mdW5jdGlvbiBnZXRDdXN0b21BcGlJbmZvKGN1c3RvbUFwaUluZGV4KSB7XHJcbiAgICBjb25zdCBpbmRleCA9IHBhcnNlSW50KGN1c3RvbUFwaUluZGV4KTtcclxuICAgIGlmIChpc05hTihpbmRleCkgfHwgaW5kZXggPCAwIHx8IGluZGV4ID49IGN1c3RvbUFQSXMubGVuZ3RoKSB7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gY3VzdG9tQVBJc1tpbmRleF07XHJcbn1cclxuXHJcbi8vIFx1NjQxQ1x1N0QyMlx1NTI5Rlx1ODBGRCAtIFx1NEZFRVx1NjUzOVx1NEUzQVx1NjUyRlx1NjMwMVx1NTkxQVx1OTAwOUFQSVx1NTQ4Q1x1NTkxQVx1OTg3NVx1N0VEM1x1Njc5Q1xyXG5hc3luYyBmdW5jdGlvbiBzZWFyY2goKSB7XHJcbiAgICAvLyBcdTVGM0FcdTUzMTZcdTc2ODRcdTVCQzZcdTc4MDFcdTRGRERcdTYyQTRcdTY4MjFcdTlBOEMgLSBcdTk2MzJcdTZCNjJcdTdFRDVcdThGQzdcclxuICAgIHRyeSB7XHJcbiAgICAgICAgaWYgKHdpbmRvdy5lbnN1cmVQYXNzd29yZFByb3RlY3Rpb24pIHtcclxuICAgICAgICAgICAgd2luZG93LmVuc3VyZVBhc3N3b3JkUHJvdGVjdGlvbigpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFx1NTE3Q1x1NUJCOVx1NjAyN1x1NjhDMFx1NjdFNVxyXG4gICAgICAgICAgICBpZiAod2luZG93LmlzUGFzc3dvcmRQcm90ZWN0ZWQgJiYgd2luZG93LmlzUGFzc3dvcmRWZXJpZmllZCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHdpbmRvdy5pc1Bhc3N3b3JkUHJvdGVjdGVkKCkgJiYgIXdpbmRvdy5pc1Bhc3N3b3JkVmVyaWZpZWQoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNob3dQYXNzd29yZE1vZGFsICYmIHNob3dQYXNzd29yZE1vZGFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2hvd1RvYXN0KCdcdThCRjdcdTUxNDhcdTVCOENcdTYyMTBcdThCQkZcdTk1RUVcdTlBOENcdThCQzFcdTU0MEVcdTUxOERcdTY0MUNcdTdEMjInLCAnZXJyb3InKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUud2FybignUGFzc3dvcmQgcHJvdGVjdGlvbiBjaGVjayBmYWlsZWQ6JywgZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgc2hvd1Bhc3N3b3JkTW9kYWwgJiYgc2hvd1Bhc3N3b3JkTW9kYWwoKTtcclxuICAgICAgICBzaG93VG9hc3QoJ1x1OEJGN1x1NTE0OFx1NUI4Q1x1NjIxMFx1OEJCRlx1OTVFRVx1OUE4Q1x1OEJDMVx1NTQwRVx1NTE4RFx1NjQxQ1x1N0QyMicsICdlcnJvcicpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IHF1ZXJ5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlYXJjaElucHV0JykudmFsdWUudHJpbSgpO1xyXG5cclxuICAgIGlmICghcXVlcnkpIHtcclxuICAgICAgICBzaG93VG9hc3QoJ1x1OEJGN1x1OEY5M1x1NTE2NVx1NjQxQ1x1N0QyMlx1NTE4NVx1NUJCOScsICdpbmZvJyk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChzZWxlY3RlZEFQSXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgc2hvd1RvYXN0KCdcdThCRjdcdTgxRjNcdTVDMTFcdTkwMDlcdTYyRTlcdTRFMDBcdTRFMkFBUElcdTZFOTAnLCAnd2FybmluZycpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBzaG93TG9hZGluZygpO1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgLy8gXHU0RkREXHU1QjU4XHU2NDFDXHU3RDIyXHU1Mzg2XHU1M0YyXHJcbiAgICAgICAgc2F2ZVNlYXJjaEhpc3RvcnkocXVlcnkpO1xyXG5cclxuICAgICAgICAvLyBcdTRFQ0VcdTYyNDBcdTY3MDlcdTkwMDlcdTRFMkRcdTc2ODRBUElcdTZFOTBcdTY0MUNcdTdEMjJcclxuICAgICAgICBsZXQgYWxsUmVzdWx0cyA9IFtdO1xyXG4gICAgICAgIGNvbnN0IHNlYXJjaFByb21pc2VzID0gc2VsZWN0ZWRBUElzLm1hcChhcGlJZCA9PiBcclxuICAgICAgICAgICAgc2VhcmNoQnlBUElBbmRLZXlXb3JkKGFwaUlkLCBxdWVyeSlcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICAvLyBcdTdCNDlcdTVGODVcdTYyNDBcdTY3MDlcdTY0MUNcdTdEMjJcdThCRjdcdTZDNDJcdTVCOENcdTYyMTBcclxuICAgICAgICBjb25zdCByZXN1bHRzQXJyYXkgPSBhd2FpdCBQcm9taXNlLmFsbChzZWFyY2hQcm9taXNlcyk7XHJcblxyXG4gICAgICAgIC8vIFx1NTQwOFx1NUU3Nlx1NjI0MFx1NjcwOVx1N0VEM1x1Njc5Q1xyXG4gICAgICAgIHJlc3VsdHNBcnJheS5mb3JFYWNoKHJlc3VsdHMgPT4ge1xyXG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShyZXN1bHRzKSAmJiByZXN1bHRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGFsbFJlc3VsdHMgPSBhbGxSZXN1bHRzLmNvbmNhdChyZXN1bHRzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBcdTVCRjlcdTY0MUNcdTdEMjJcdTdFRDNcdTY3OUNcdThGREJcdTg4NENcdTYzOTJcdTVFOEZcdUZGMUFcdTYzMDlcdTU0MERcdTc5RjBcdTRGMThcdTUxNDhcdUZGMENcdTU0MERcdTc5RjBcdTc2RjhcdTU0MENcdTY1RjZcdTYzMDlcdTYzQTVcdTUzRTNcdTZFOTBcdTYzOTJcdTVFOEZcclxuICAgICAgICBhbGxSZXN1bHRzLnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgICAgICAgLy8gXHU5OTk2XHU1MTQ4XHU2MzA5XHU3MTY3XHU4OUM2XHU5ODkxXHU1NDBEXHU3OUYwXHU2MzkyXHU1RThGXHJcbiAgICAgICAgICAgIGNvbnN0IG5hbWVDb21wYXJlID0gKGEudm9kX25hbWUgfHwgJycpLmxvY2FsZUNvbXBhcmUoYi52b2RfbmFtZSB8fCAnJyk7XHJcbiAgICAgICAgICAgIGlmIChuYW1lQ29tcGFyZSAhPT0gMCkgcmV0dXJuIG5hbWVDb21wYXJlO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU1NDBEXHU3OUYwXHU3NkY4XHU1NDBDXHVGRjBDXHU1MjE5XHU2MzA5XHU3MTY3XHU2NzY1XHU2RTkwXHU2MzkyXHU1RThGXHJcbiAgICAgICAgICAgIHJldHVybiAoYS5zb3VyY2VfbmFtZSB8fCAnJykubG9jYWxlQ29tcGFyZShiLnNvdXJjZV9uYW1lIHx8ICcnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gXHU2NkY0XHU2NUIwXHU2NDFDXHU3RDIyXHU3RUQzXHU2NzlDXHU4QkExXHU2NTcwXHJcbiAgICAgICAgY29uc3Qgc2VhcmNoUmVzdWx0c0NvdW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlYXJjaFJlc3VsdHNDb3VudCcpO1xyXG4gICAgICAgIGlmIChzZWFyY2hSZXN1bHRzQ291bnQpIHtcclxuICAgICAgICAgICAgc2VhcmNoUmVzdWx0c0NvdW50LnRleHRDb250ZW50ID0gYWxsUmVzdWx0cy5sZW5ndGg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBcdTY2M0VcdTc5M0FcdTdFRDNcdTY3OUNcdTUzM0FcdTU3REZcdUZGMENcdThDMDNcdTY1NzRcdTY0MUNcdTdEMjJcdTUzM0FcdTU3REZcclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VhcmNoQXJlYScpLmNsYXNzTGlzdC5yZW1vdmUoJ2ZsZXgtMScpO1xyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWFyY2hBcmVhJykuY2xhc3NMaXN0LmFkZCgnbWItOCcpO1xyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN1bHRzQXJlYScpLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xyXG5cclxuICAgICAgICAvLyBcdTk2OTBcdTg1Q0ZcdThDNDZcdTc0RTNcdTYzQThcdTgzNTBcdTUzM0FcdTU3REZcdUZGMDhcdTU5ODJcdTY3OUNcdTVCNThcdTU3MjhcdUZGMDlcclxuICAgICAgICBjb25zdCBkb3ViYW5BcmVhID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RvdWJhbkFyZWEnKTtcclxuICAgICAgICBpZiAoZG91YmFuQXJlYSkge1xyXG4gICAgICAgICAgICBkb3ViYW5BcmVhLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgcmVzdWx0c0RpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN1bHRzJyk7XHJcblxyXG4gICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NkNBMVx1NjcwOVx1N0VEM1x1Njc5Q1xyXG4gICAgICAgIGlmICghYWxsUmVzdWx0cyB8fCBhbGxSZXN1bHRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXN1bHRzRGl2LmlubmVySFRNTCA9IGBcclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtc3Bhbi1mdWxsIHRleHQtY2VudGVyIHB5LTE2XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHN2ZyBjbGFzcz1cIm14LWF1dG8gaC0xMiB3LTEyIHRleHQtZ3JheS01MDBcIiBmaWxsPVwibm9uZVwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCIgc3Ryb2tlLXdpZHRoPVwiMlwiIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkPVwiTTkuMTcyIDE2LjE3MmE0IDQgMCAwMTUuNjU2IDBNOSAxMGguMDFNMTUgMTBoLjAxTTIxIDEyYTkgOSAwIDExLTE4IDAgOSA5IDAgMDExOCAwelwiIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9zdmc+XHJcbiAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzPVwibXQtMiB0ZXh0LWxnIGZvbnQtbWVkaXVtIHRleHQtZ3JheS00MDBcIj5cdTZDQTFcdTY3MDlcdTYyN0VcdTUyMzBcdTUzMzlcdTkxNERcdTc2ODRcdTdFRDNcdTY3OUM8L2gzPlxyXG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwibXQtMSB0ZXh0LXNtIHRleHQtZ3JheS01MDBcIj5cdThCRjdcdTVDMURcdThCRDVcdTUxNzZcdTRFRDZcdTUxNzNcdTk1MkVcdThCQ0RcdTYyMTZcdTY2RjRcdTYzNjJcdTY1NzBcdTYzNkVcdTZFOTA8L3A+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgYDtcclxuICAgICAgICAgICAgaGlkZUxvYWRpbmcoKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gXHU2NzA5XHU2NDFDXHU3RDIyXHU3RUQzXHU2NzlDXHU2NUY2XHVGRjBDXHU2MjREXHU2NkY0XHU2NUIwVVJMXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gXHU0RjdGXHU3NTI4VVJJXHU3RjE2XHU3ODAxXHU3ODZFXHU0RkREXHU3Mjc5XHU2QjhBXHU1QjU3XHU3QjI2XHU4MEZEXHU1OTFGXHU2QjYzXHU3ODZFXHU2NjNFXHU3OTNBXHJcbiAgICAgICAgICAgIGNvbnN0IGVuY29kZWRRdWVyeSA9IGVuY29kZVVSSUNvbXBvbmVudChxdWVyeSk7XHJcbiAgICAgICAgICAgIC8vIFx1NEY3Rlx1NzUyOEhUTUw1IEhpc3RvcnkgQVBJXHU2NkY0XHU2NUIwVVJMXHVGRjBDXHU0RTBEXHU1MjM3XHU2NUIwXHU5ODc1XHU5NzYyXHJcbiAgICAgICAgICAgIHdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZShcclxuICAgICAgICAgICAgICAgIHsgc2VhcmNoOiBxdWVyeSB9LFxyXG4gICAgICAgICAgICAgICAgYFx1NjQxQ1x1N0QyMjogJHtxdWVyeX0gLSBMaWJyZVRWYCxcclxuICAgICAgICAgICAgICAgIGAvcz0ke2VuY29kZWRRdWVyeX1gXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIC8vIFx1NjZGNFx1NjVCMFx1OTg3NVx1OTc2Mlx1NjgwN1x1OTg5OFxyXG4gICAgICAgICAgICBkb2N1bWVudC50aXRsZSA9IGBcdTY0MUNcdTdEMjI6ICR7cXVlcnl9IC0gTGlicmVUVmA7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdTY2RjRcdTY1QjBcdTZENEZcdTg5QzhcdTU2NjhcdTUzODZcdTUzRjJcdTU5MzFcdThEMjU6JywgZSk7XHJcbiAgICAgICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NjZGNFx1NjVCMFVSTFx1NTkzMVx1OEQyNVx1RkYwQ1x1N0VFN1x1N0VFRFx1NjI2N1x1ODg0Q1x1NjQxQ1x1N0QyMlxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gXHU1OTA0XHU3NDA2XHU2NDFDXHU3RDIyXHU3RUQzXHU2NzlDXHU4RkM3XHU2RUU0XHVGRjFBXHU1OTgyXHU2NzlDXHU1NDJGXHU3NTI4XHU0RTg2XHU5RUM0XHU4MjcyXHU1MTg1XHU1QkI5XHU4RkM3XHU2RUU0XHVGRjBDXHU1MjE5XHU4RkM3XHU2RUU0XHU2Mzg5XHU1MjA2XHU3QzdCXHU1NDJCXHU2NzA5XHU2NTRGXHU2MTFGXHU1MTg1XHU1QkI5XHU3Njg0XHU5ODc5XHU3NkVFXHJcbiAgICAgICAgY29uc3QgeWVsbG93RmlsdGVyRW5hYmxlZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd5ZWxsb3dGaWx0ZXJFbmFibGVkJykgPT09ICd0cnVlJztcclxuICAgICAgICBpZiAoeWVsbG93RmlsdGVyRW5hYmxlZCkge1xyXG4gICAgICAgICAgICBjb25zdCBiYW5uZWQgPSBbJ1x1NEYyNlx1NzQwNlx1NzI0NycsICdcdTc5OEZcdTUyMjknLCAnXHU5MUNDXHU3NTZBXHU1MkE4XHU2RjJCJywgJ1x1OTVFOFx1NEU4Qlx1NEVGNicsICdcdTg0MURcdTgzODlcdTVDMTFcdTU5NzMnLCAnXHU1MjM2XHU2NzBEXHU4QkYxXHU2MEQxJywgJ1x1NTZGRFx1NEVBN1x1NEYyMFx1NUE5MicsICdjb3NwbGF5JywgJ1x1OUVEMVx1NEUxRFx1OEJGMVx1NjBEMScsICdcdTY1RTBcdTc4MDEnLCAnXHU2NUU1XHU2NzJDXHU2NUUwXHU3ODAxJywgJ1x1NjcwOVx1NzgwMScsICdcdTY1RTVcdTY3MkNcdTY3MDlcdTc4MDEnLCAnU1dBRycsICdcdTdGNTFcdTdFQTJcdTRFM0JcdTY0QUQnLCAnXHU4MjcyXHU2MEM1XHU3MjQ3JywgJ1x1NTQwQ1x1NjAyN1x1NzI0NycsICdcdTc5OEZcdTUyMjlcdTg5QzZcdTk4OTEnLCAnXHU3OThGXHU1MjI5XHU3MjQ3J107XHJcbiAgICAgICAgICAgIGFsbFJlc3VsdHMgPSBhbGxSZXN1bHRzLmZpbHRlcihpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHR5cGVOYW1lID0gaXRlbS50eXBlX25hbWUgfHwgJyc7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gIWJhbm5lZC5zb21lKGtleXdvcmQgPT4gdHlwZU5hbWUuaW5jbHVkZXMoa2V5d29yZCkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFx1NkRGQlx1NTJBMFhTU1x1NEZERFx1NjJBNFx1RkYwQ1x1NEY3Rlx1NzUyOHRleHRDb250ZW50XHU1NDhDXHU1QzVFXHU2MDI3XHU4RjZDXHU0RTQ5XHJcbiAgICAgICAgY29uc3Qgc2FmZVJlc3VsdHMgPSBhbGxSZXN1bHRzLm1hcChpdGVtID0+IHtcclxuICAgICAgICAgICAgY29uc3Qgc2FmZUlkID0gaXRlbS52b2RfaWQgPyBpdGVtLnZvZF9pZC50b1N0cmluZygpLnJlcGxhY2UoL1teXFx3LV0vZywgJycpIDogJyc7XHJcbiAgICAgICAgICAgIGNvbnN0IHNhZmVOYW1lID0gKGl0ZW0udm9kX25hbWUgfHwgJycpLnRvU3RyaW5nKClcclxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKC88L2csICcmbHQ7JylcclxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKC8+L2csICcmZ3Q7JylcclxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cIi9nLCAnJnF1b3Q7Jyk7XHJcbiAgICAgICAgICAgIGNvbnN0IHNvdXJjZUluZm8gPSBpdGVtLnNvdXJjZV9uYW1lID9cclxuICAgICAgICAgICAgICAgIGA8c3BhbiBjbGFzcz1cImJnLVsjMjIyXSB0ZXh0LXhzIHB4LTEuNSBweS0wLjUgcm91bmRlZC1mdWxsXCI+JHtpdGVtLnNvdXJjZV9uYW1lfTwvc3Bhbj5gIDogJyc7XHJcbiAgICAgICAgICAgIGNvbnN0IHNvdXJjZUNvZGUgPSBpdGVtLnNvdXJjZV9jb2RlIHx8ICcnO1xyXG5cclxuICAgICAgICAgICAgLy8gXHU2REZCXHU1MkEwQVBJIFVSTFx1NUM1RVx1NjAyN1x1RkYwQ1x1NzUyOFx1NEU4RVx1OEJFNlx1NjBDNVx1ODNCN1x1NTNENlxyXG4gICAgICAgICAgICBjb25zdCBhcGlVcmxBdHRyID0gaXRlbS5hcGlfdXJsID9cclxuICAgICAgICAgICAgICAgIGBkYXRhLWFwaS11cmw9XCIke2l0ZW0uYXBpX3VybC5yZXBsYWNlKC9cIi9nLCAnJnF1b3Q7Jyl9XCJgIDogJyc7XHJcblxyXG4gICAgICAgICAgICAvLyBcdTRGRUVcdTY1MzlcdTRFM0FcdTZDMzRcdTVFNzNcdTUzNjFcdTcyNDdcdTVFMDNcdTVDNDBcdUZGMENcdTU2RkVcdTcyNDdcdTU3MjhcdTVERTZcdTRGQTdcdUZGMENcdTY1ODdcdTY3MkNcdTU3MjhcdTUzRjNcdTRGQTdcdUZGMENcdTVFNzZcdTRGMThcdTUzMTZcdTY4MzdcdTVGMEZcclxuICAgICAgICAgICAgY29uc3QgaGFzQ292ZXIgPSBpdGVtLnZvZF9waWMgJiYgaXRlbS52b2RfcGljLnN0YXJ0c1dpdGgoJ2h0dHAnKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBgXHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2FyZC1ob3ZlciBiZy1bIzExMV0gcm91bmRlZC1sZyBvdmVyZmxvdy1oaWRkZW4gY3Vyc29yLXBvaW50ZXIgdHJhbnNpdGlvbi1hbGwgaG92ZXI6c2NhbGUtWzEuMDJdIGgtZnVsbCBzaGFkb3ctc20gaG92ZXI6c2hhZG93LW1kXCIgXHJcbiAgICAgICAgICAgICAgICAgICAgIG9uY2xpY2s9XCJzaG93RGV0YWlscygnJHtzYWZlSWR9JywnJHtzYWZlTmFtZX0nLCcke3NvdXJjZUNvZGV9JylcIiAke2FwaVVybEF0dHJ9PlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmbGV4IGgtZnVsbFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAke2hhc0NvdmVyID8gYFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicmVsYXRpdmUgZmxleC1zaHJpbmstMCBzZWFyY2gtY2FyZC1pbWctY29udGFpbmVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cIiR7aXRlbS52b2RfcGljfVwiIGFsdD1cIiR7c2FmZU5hbWV9XCIgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwiaC1mdWxsIHctZnVsbCBvYmplY3QtY292ZXIgdHJhbnNpdGlvbi10cmFuc2Zvcm0gaG92ZXI6c2NhbGUtMTEwXCIgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uZXJyb3I9XCJ0aGlzLm9uZXJyb3I9bnVsbDsgdGhpcy5zcmM9J2h0dHBzOi8vdmlhLnBsYWNlaG9sZGVyLmNvbS8zMDB4NDUwP3RleHQ9XHU2NUUwXHU1QzAxXHU5NzYyJzsgdGhpcy5jbGFzc0xpc3QuYWRkKCdvYmplY3QtY29udGFpbicpO1wiIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2FkaW5nPVwibGF6eVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImFic29sdXRlIGluc2V0LTAgYmctZ3JhZGllbnQtdG8tciBmcm9tLWJsYWNrLzMwIHRvLXRyYW5zcGFyZW50XCI+PC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PmAgOiAnJ31cclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwLTIgZmxleCBmbGV4LWNvbCBmbGV4LWdyb3dcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmbGV4LWdyb3dcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDMgY2xhc3M9XCJmb250LXNlbWlib2xkIG1iLTIgYnJlYWstd29yZHMgbGluZS1jbGFtcC0yICR7aGFzQ292ZXIgPyAnJyA6ICd0ZXh0LWNlbnRlcid9XCIgdGl0bGU9XCIke3NhZmVOYW1lfVwiPiR7c2FmZU5hbWV9PC9oMz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleCBmbGV4LXdyYXAgJHtoYXNDb3ZlciA/ICcnIDogJ2p1c3RpZnktY2VudGVyJ30gZ2FwLTEgbWItMlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkeyhpdGVtLnR5cGVfbmFtZSB8fCAnJykudG9TdHJpbmcoKS5yZXBsYWNlKC88L2csICcmbHQ7JykgP1xyXG4gICAgICAgICAgICAgICAgICAgIGA8c3BhbiBjbGFzcz1cInRleHQteHMgcHktMC41IHB4LTEuNSByb3VuZGVkIGJnLW9wYWNpdHktMjAgYmctYmx1ZS01MDAgdGV4dC1ibHVlLTMwMFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkeyhpdGVtLnR5cGVfbmFtZSB8fCAnJykudG9TdHJpbmcoKS5yZXBsYWNlKC88L2csICcmbHQ7Jyl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPmAgOiAnJ31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHsoaXRlbS52b2RfeWVhciB8fCAnJykgP1xyXG4gICAgICAgICAgICAgICAgICAgIGA8c3BhbiBjbGFzcz1cInRleHQteHMgcHktMC41IHB4LTEuNSByb3VuZGVkIGJnLW9wYWNpdHktMjAgYmctcHVycGxlLTUwMCB0ZXh0LXB1cnBsZS0zMDBcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtpdGVtLnZvZF95ZWFyfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5gIDogJyd9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJ0ZXh0LWdyYXktNDAwIGxpbmUtY2xhbXAtMiBvdmVyZmxvdy1oaWRkZW4gJHtoYXNDb3ZlciA/ICcnIDogJ3RleHQtY2VudGVyJ30gbWItMlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkeyhpdGVtLnZvZF9yZW1hcmtzIHx8ICdcdTY2ODJcdTY1RTBcdTRFQ0JcdTdFQ0QnKS50b1N0cmluZygpLnJlcGxhY2UoLzwvZywgJyZsdDsnKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlciBtdC0xIHB0LTEgYm9yZGVyLXQgYm9yZGVyLWdyYXktODAwXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtzb3VyY2VJbmZvID8gYDxkaXY+JHtzb3VyY2VJbmZvfTwvZGl2PmAgOiAnPGRpdj48L2Rpdj4nfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwhLS0gXHU2M0E1XHU1M0UzXHU1NDBEXHU3OUYwXHU4RkM3XHU5NTdGXHU0RjFBXHU4OEFCXHU2MzI0XHU1M0Q4XHU1RjYyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJ0ZXh0LWdyYXktNTAwIGZsZXggaXRlbXMtY2VudGVyIGhvdmVyOnRleHQtYmx1ZS00MDAgdHJhbnNpdGlvbi1jb2xvcnNcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGNsYXNzPVwiaC00IHctNCBtci0xXCIgZmlsbD1cIm5vbmVcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCIgc3Ryb2tlLXdpZHRoPVwiMlwiIGQ9XCJNMTQuNzUyIDExLjE2OGwtMy4xOTctMi4xMzJBMSAxIDAgMDAxMCA5Ljg3djQuMjYzYTEgMSAwIDAwMS41NTUuODMybDMuMTk3LTIuMTMyYTEgMSAwIDAwMC0xLjY2NHpcIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zdmc+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcdTY0QURcdTY1M0VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0tPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIGA7XHJcbiAgICAgICAgfSkuam9pbignJyk7XHJcblxyXG4gICAgICAgIHJlc3VsdHNEaXYuaW5uZXJIVE1MID0gc2FmZVJlc3VsdHM7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1NjQxQ1x1N0QyMlx1OTUxOVx1OEJFRjonLCBlcnJvcik7XHJcbiAgICAgICAgaWYgKGVycm9yLm5hbWUgPT09ICdBYm9ydEVycm9yJykge1xyXG4gICAgICAgICAgICBzaG93VG9hc3QoJ1x1NjQxQ1x1N0QyMlx1OEJGN1x1NkM0Mlx1OEQ4NVx1NjVGNlx1RkYwQ1x1OEJGN1x1NjhDMFx1NjdFNVx1N0Y1MVx1N0VEQ1x1OEZERVx1NjNBNScsICdlcnJvcicpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciBtc2cgPSAnXHU2NDFDXHU3RDIyXHU4QkY3XHU2QzQyXHU1OTMxXHU4RDI1XHVGRjBDXHU4QkY3XHU3QTBEXHU1NDBFXHU5MUNEXHU4QkQ1JztcclxuICAgICAgICAgICAgaWYgKHdpbmRvdy5pc1Bhc3N3b3JkUHJvdGVjdGVkICYmIHdpbmRvdy5pc1Bhc3N3b3JkVmVyaWZpZWQgJiYgd2luZG93LmlzUGFzc3dvcmRQcm90ZWN0ZWQoKSAmJiAhd2luZG93LmlzUGFzc3dvcmRWZXJpZmllZCgpKSB7XHJcbiAgICAgICAgICAgICAgICBtc2cgPSAnXHU4QkY3XHU1MTQ4XHU1QjhDXHU2MjEwXHU4QkJGXHU5NUVFXHU5QThDXHU4QkMxXHU1NDBFXHU1MThEXHU2NDFDXHU3RDIyJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzaG93VG9hc3QobXNnLCAnZXJyb3InKTtcclxuICAgICAgICB9XHJcbiAgICB9IGZpbmFsbHkge1xyXG4gICAgICAgIGhpZGVMb2FkaW5nKCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIFx1NTIwN1x1NjM2Mlx1NkUwNVx1N0E3QVx1NjMwOVx1OTRBRVx1NzY4NFx1NjYzRVx1NzkzQVx1NzJCNlx1NjAwMVxyXG5mdW5jdGlvbiB0b2dnbGVDbGVhckJ1dHRvbigpIHtcclxuICAgIGNvbnN0IHNlYXJjaElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlYXJjaElucHV0Jyk7XHJcbiAgICBjb25zdCBjbGVhckJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjbGVhclNlYXJjaElucHV0Jyk7XHJcbiAgICBpZiAoc2VhcmNoSW5wdXQudmFsdWUgIT09ICcnKSB7XHJcbiAgICAgICAgY2xlYXJCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNsZWFyQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyBcdTZFMDVcdTdBN0FcdTY0MUNcdTdEMjJcdTY4NDZcdTUxODVcdTVCQjlcclxuZnVuY3Rpb24gY2xlYXJTZWFyY2hJbnB1dCgpIHtcclxuICAgIGNvbnN0IHNlYXJjaElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlYXJjaElucHV0Jyk7XHJcbiAgICBzZWFyY2hJbnB1dC52YWx1ZSA9ICcnO1xyXG4gICAgY29uc3QgY2xlYXJCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2xlYXJTZWFyY2hJbnB1dCcpO1xyXG4gICAgY2xlYXJCdXR0b24uY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XHJcbn1cclxuXHJcbi8vIFx1NTJBQlx1NjMwMVx1NjQxQ1x1N0QyMlx1Njg0Nlx1NzY4NHZhbHVlXHU1QzVFXHU2MDI3XHU0RUU1XHU2OEMwXHU2RDRCXHU1OTE2XHU5MEU4XHU0RkVFXHU2NTM5XHJcbmZ1bmN0aW9uIGhvb2tJbnB1dCgpIHtcclxuICAgIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlYXJjaElucHV0Jyk7XHJcbiAgICBjb25zdCBkZXNjcmlwdG9yID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihIVE1MSW5wdXRFbGVtZW50LnByb3RvdHlwZSwgJ3ZhbHVlJyk7XHJcblxyXG4gICAgLy8gXHU5MUNEXHU1MTk5IHZhbHVlIFx1NUM1RVx1NjAyN1x1NzY4NCBnZXR0ZXIgXHU1NDhDIHNldHRlclxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGlucHV0LCAndmFsdWUnLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8vIFx1Nzg2RVx1NEZERFx1OEJGQlx1NTNENlx1NjVGNlx1OEZENFx1NTZERVx1NUI1N1x1N0IyNlx1NEUzMlx1RkYwOFx1NTM3M1x1NEY3Rlx1NTM5Rlx1NTlDQlx1NTAzQ1x1NEUzQSB1bmRlZmluZWQvbnVsbFx1RkYwOVxyXG4gICAgICAgICAgICBjb25zdCBvcmlnaW5hbFZhbHVlID0gZGVzY3JpcHRvci5nZXQuY2FsbCh0aGlzKTtcclxuICAgICAgICAgICAgcmV0dXJuIG9yaWdpbmFsVmFsdWUgIT0gbnVsbCA/IFN0cmluZyhvcmlnaW5hbFZhbHVlKSA6ICcnO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgLy8gXHU2NjNFXHU1RjBGXHU1QzA2XHU1MDNDXHU4RjZDXHU2MzYyXHU0RTNBXHU1QjU3XHU3QjI2XHU0RTMyXHU1NDBFXHU1MTk5XHU1MTY1XHJcbiAgICAgICAgICAgIGNvbnN0IHN0clZhbHVlID0gU3RyaW5nKHZhbHVlKTtcclxuICAgICAgICAgICAgZGVzY3JpcHRvci5zZXQuY2FsbCh0aGlzLCBzdHJWYWx1ZSk7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ2lucHV0JywgeyBidWJibGVzOiB0cnVlIH0pKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBcdTUyMURcdTU5Q0JcdTUzMTZcdThGOTNcdTUxNjVcdTY4NDZcdTUwM0NcdTRFM0FcdTdBN0FcdTVCNTdcdTdCMjZcdTRFMzJcdUZGMDhcdTkwN0ZcdTUxNERcdTUyMURcdTU5Q0JcdTUwM0NcdTRFM0EgdW5kZWZpbmVkXHVGRjA5XHJcbiAgICBpbnB1dC52YWx1ZSA9ICcnO1xyXG59XHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBob29rSW5wdXQpO1xyXG5cclxuLy8gXHU2NjNFXHU3OTNBXHU4QkU2XHU2MEM1IC0gXHU0RkVFXHU2NTM5XHU0RTNBXHU2NTJGXHU2MzAxXHU4MUVBXHU1QjlBXHU0RTQ5QVBJXHJcbmFzeW5jIGZ1bmN0aW9uIHNob3dEZXRhaWxzKGlkLCB2b2RfbmFtZSwgc291cmNlQ29kZSkge1xyXG4gICAgLy8gXHU1QkM2XHU3ODAxXHU0RkREXHU2MkE0XHU2ODIxXHU5QThDXHJcbiAgICBpZiAod2luZG93LmlzUGFzc3dvcmRQcm90ZWN0ZWQgJiYgd2luZG93LmlzUGFzc3dvcmRWZXJpZmllZCkge1xyXG4gICAgICAgIGlmICh3aW5kb3cuaXNQYXNzd29yZFByb3RlY3RlZCgpICYmICF3aW5kb3cuaXNQYXNzd29yZFZlcmlmaWVkKCkpIHtcclxuICAgICAgICAgICAgc2hvd1Bhc3N3b3JkTW9kYWwgJiYgc2hvd1Bhc3N3b3JkTW9kYWwoKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmICghaWQpIHtcclxuICAgICAgICBzaG93VG9hc3QoJ1x1ODlDNlx1OTg5MUlEXHU2NUUwXHU2NTQ4JywgJ2Vycm9yJyk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHNob3dMb2FkaW5nKCk7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIC8vIFx1Njc4NFx1NUVGQUFQSVx1NTNDMlx1NjU3MFxyXG4gICAgICAgIGxldCBhcGlQYXJhbXMgPSAnJztcclxuXHJcbiAgICAgICAgLy8gXHU1OTA0XHU3NDA2XHU4MUVBXHU1QjlBXHU0RTQ5QVBJXHU2RTkwXHJcbiAgICAgICAgaWYgKHNvdXJjZUNvZGUuc3RhcnRzV2l0aCgnY3VzdG9tXycpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGN1c3RvbUluZGV4ID0gc291cmNlQ29kZS5yZXBsYWNlKCdjdXN0b21fJywgJycpO1xyXG4gICAgICAgICAgICBjb25zdCBjdXN0b21BcGkgPSBnZXRDdXN0b21BcGlJbmZvKGN1c3RvbUluZGV4KTtcclxuICAgICAgICAgICAgaWYgKCFjdXN0b21BcGkpIHtcclxuICAgICAgICAgICAgICAgIHNob3dUb2FzdCgnXHU4MUVBXHU1QjlBXHU0RTQ5QVBJXHU5MTREXHU3RjZFXHU2NUUwXHU2NTQ4JywgJ2Vycm9yJyk7XHJcbiAgICAgICAgICAgICAgICBoaWRlTG9hZGluZygpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIFx1NEYyMFx1OTAxMiBkZXRhaWwgXHU1QjU3XHU2QkI1XHJcbiAgICAgICAgICAgIGlmIChjdXN0b21BcGkuZGV0YWlsKSB7XHJcbiAgICAgICAgICAgICAgICBhcGlQYXJhbXMgPSAnJmN1c3RvbUFwaT0nICsgZW5jb2RlVVJJQ29tcG9uZW50KGN1c3RvbUFwaS51cmwpICsgJyZjdXN0b21EZXRhaWw9JyArIGVuY29kZVVSSUNvbXBvbmVudChjdXN0b21BcGkuZGV0YWlsKSArICcmc291cmNlPWN1c3RvbSc7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBhcGlQYXJhbXMgPSAnJmN1c3RvbUFwaT0nICsgZW5jb2RlVVJJQ29tcG9uZW50KGN1c3RvbUFwaS51cmwpICsgJyZzb3VyY2U9Y3VzdG9tJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFx1NTE4NVx1N0Y2RUFQSVxyXG4gICAgICAgICAgICBhcGlQYXJhbXMgPSAnJnNvdXJjZT0nICsgc291cmNlQ29kZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEFkZCBhIHRpbWVzdGFtcCB0byBwcmV2ZW50IGNhY2hpbmdcclxuICAgICAgICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcclxuICAgICAgICBjb25zdCBjYWNoZUJ1c3RlciA9IGAmX3Q9JHt0aW1lc3RhbXB9YDtcclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAvYXBpL2RldGFpbD9pZD0ke2VuY29kZVVSSUNvbXBvbmVudChpZCl9JHthcGlQYXJhbXN9JHtjYWNoZUJ1c3Rlcn1gKTtcclxuXHJcbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuXHJcbiAgICAgICAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9kYWwnKTtcclxuICAgICAgICBjb25zdCBtb2RhbFRpdGxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZGFsVGl0bGUnKTtcclxuICAgICAgICBjb25zdCBtb2RhbENvbnRlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9kYWxDb250ZW50Jyk7XHJcblxyXG4gICAgICAgIC8vIFx1NjYzRVx1NzkzQVx1Njc2NVx1NkU5MFx1NEZFMVx1NjA2RlxyXG4gICAgICAgIGNvbnN0IHNvdXJjZU5hbWUgPSBkYXRhLnZpZGVvSW5mbyAmJiBkYXRhLnZpZGVvSW5mby5zb3VyY2VfbmFtZSA/XHJcbiAgICAgICAgICAgIGAgPHNwYW4gY2xhc3M9XCJ0ZXh0LXNtIGZvbnQtbm9ybWFsIHRleHQtZ3JheS00MDBcIj4oJHtkYXRhLnZpZGVvSW5mby5zb3VyY2VfbmFtZX0pPC9zcGFuPmAgOiAnJztcclxuXHJcbiAgICAgICAgLy8gXHU0RTBEXHU1QkY5XHU2ODA3XHU5ODk4XHU4RkRCXHU4ODRDXHU2MjJBXHU2NUFEXHU1OTA0XHU3NDA2XHVGRjBDXHU1MTQxXHU4QkI4XHU1QjhDXHU2NTc0XHU2NjNFXHU3OTNBXHJcbiAgICAgICAgbW9kYWxUaXRsZS5pbm5lckhUTUwgPSBgPHNwYW4gY2xhc3M9XCJicmVhay13b3Jkc1wiPiR7dm9kX25hbWUgfHwgJ1x1NjcyQVx1NzdFNVx1ODlDNlx1OTg5MSd9PC9zcGFuPiR7c291cmNlTmFtZX1gO1xyXG4gICAgICAgIGN1cnJlbnRWaWRlb1RpdGxlID0gdm9kX25hbWUgfHwgJ1x1NjcyQVx1NzdFNVx1ODlDNlx1OTg5MSc7XHJcblxyXG4gICAgICAgIGlmIChkYXRhLmVwaXNvZGVzICYmIGRhdGEuZXBpc29kZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAvLyBcdTY3ODRcdTVFRkFcdThCRTZcdTYwQzVcdTRGRTFcdTYwNkZIVE1MXHJcbiAgICAgICAgICAgIGxldCBkZXRhaWxJbmZvSHRtbCA9ICcnO1xyXG4gICAgICAgICAgICBpZiAoZGF0YS52aWRlb0luZm8pIHtcclxuICAgICAgICAgICAgICAgIC8vIFByZXBhcmUgZGVzY3JpcHRpb24gdGV4dCwgc3RyaXAgSFRNTCBhbmQgdHJpbSB3aGl0ZXNwYWNlXHJcbiAgICAgICAgICAgICAgICBjb25zdCBkZXNjcmlwdGlvblRleHQgPSBkYXRhLnZpZGVvSW5mby5kZXNjID8gZGF0YS52aWRlb0luZm8uZGVzYy5yZXBsYWNlKC88W14+XSs+L2csICcnKS50cmltKCkgOiAnJztcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB0aGVyZSdzIGFueSBhY3R1YWwgZ3JpZCBjb250ZW50XHJcbiAgICAgICAgICAgICAgICBjb25zdCBoYXNHcmlkQ29udGVudCA9IGRhdGEudmlkZW9JbmZvLnR5cGUgfHwgZGF0YS52aWRlb0luZm8ueWVhciB8fCBkYXRhLnZpZGVvSW5mby5hcmVhIHx8IGRhdGEudmlkZW9JbmZvLmRpcmVjdG9yIHx8IGRhdGEudmlkZW9JbmZvLmFjdG9yIHx8IGRhdGEudmlkZW9JbmZvLnJlbWFya3M7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGhhc0dyaWRDb250ZW50IHx8IGRlc2NyaXB0aW9uVGV4dCkgeyAvLyBPbmx5IGJ1aWxkIGlmIHRoZXJlJ3Mgc29tZXRoaW5nIHRvIHNob3dcclxuICAgICAgICAgICAgICAgICAgICBkZXRhaWxJbmZvSHRtbCA9IGBcclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1kZXRhaWwtaW5mb1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICR7aGFzR3JpZENvbnRlbnQgPyBgXHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRldGFpbC1ncmlkXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICR7ZGF0YS52aWRlb0luZm8udHlwZSA/IGA8ZGl2IGNsYXNzPVwiZGV0YWlsLWl0ZW1cIj48c3BhbiBjbGFzcz1cImRldGFpbC1sYWJlbFwiPlx1N0M3Qlx1NTc4Qjo8L3NwYW4+IDxzcGFuIGNsYXNzPVwiZGV0YWlsLXZhbHVlXCI+JHtkYXRhLnZpZGVvSW5mby50eXBlfTwvc3Bhbj48L2Rpdj5gIDogJyd9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICR7ZGF0YS52aWRlb0luZm8ueWVhciA/IGA8ZGl2IGNsYXNzPVwiZGV0YWlsLWl0ZW1cIj48c3BhbiBjbGFzcz1cImRldGFpbC1sYWJlbFwiPlx1NUU3NFx1NEVGRDo8L3NwYW4+IDxzcGFuIGNsYXNzPVwiZGV0YWlsLXZhbHVlXCI+JHtkYXRhLnZpZGVvSW5mby55ZWFyfTwvc3Bhbj48L2Rpdj5gIDogJyd9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICR7ZGF0YS52aWRlb0luZm8uYXJlYSA/IGA8ZGl2IGNsYXNzPVwiZGV0YWlsLWl0ZW1cIj48c3BhbiBjbGFzcz1cImRldGFpbC1sYWJlbFwiPlx1NTczMFx1NTMzQTo8L3NwYW4+IDxzcGFuIGNsYXNzPVwiZGV0YWlsLXZhbHVlXCI+JHtkYXRhLnZpZGVvSW5mby5hcmVhfTwvc3Bhbj48L2Rpdj5gIDogJyd9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICR7ZGF0YS52aWRlb0luZm8uZGlyZWN0b3IgPyBgPGRpdiBjbGFzcz1cImRldGFpbC1pdGVtXCI+PHNwYW4gY2xhc3M9XCJkZXRhaWwtbGFiZWxcIj5cdTVCRkNcdTZGMTQ6PC9zcGFuPiA8c3BhbiBjbGFzcz1cImRldGFpbC12YWx1ZVwiPiR7ZGF0YS52aWRlb0luZm8uZGlyZWN0b3J9PC9zcGFuPjwvZGl2PmAgOiAnJ31cclxuICAgICAgICAgICAgICAgICAgICAgICAgJHtkYXRhLnZpZGVvSW5mby5hY3RvciA/IGA8ZGl2IGNsYXNzPVwiZGV0YWlsLWl0ZW1cIj48c3BhbiBjbGFzcz1cImRldGFpbC1sYWJlbFwiPlx1NEUzQlx1NkYxNDo8L3NwYW4+IDxzcGFuIGNsYXNzPVwiZGV0YWlsLXZhbHVlXCI+JHtkYXRhLnZpZGVvSW5mby5hY3Rvcn08L3NwYW4+PC9kaXY+YCA6ICcnfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAke2RhdGEudmlkZW9JbmZvLnJlbWFya3MgPyBgPGRpdiBjbGFzcz1cImRldGFpbC1pdGVtXCI+PHNwYW4gY2xhc3M9XCJkZXRhaWwtbGFiZWxcIj5cdTU5MDdcdTZDRTg6PC9zcGFuPiA8c3BhbiBjbGFzcz1cImRldGFpbC12YWx1ZVwiPiR7ZGF0YS52aWRlb0luZm8ucmVtYXJrc308L3NwYW4+PC9kaXY+YCA6ICcnfVxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PmAgOiAnJ31cclxuICAgICAgICAgICAgICAgICAgICAke2Rlc2NyaXB0aW9uVGV4dCA/IGBcclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGV0YWlsLWRlc2NcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJkZXRhaWwtbGFiZWxcIj5cdTdCODBcdTRFQ0I6PC9wPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cImRldGFpbC1kZXNjLWNvbnRlbnRcIj4ke2Rlc2NyaXB0aW9uVGV4dH08L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+YCA6ICcnfVxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICBgO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjdXJyZW50RXBpc29kZXMgPSBkYXRhLmVwaXNvZGVzO1xyXG4gICAgICAgICAgICBjdXJyZW50RXBpc29kZUluZGV4ID0gMDtcclxuXHJcbiAgICAgICAgICAgIG1vZGFsQ29udGVudC5pbm5lckhUTUwgPSBgXHJcbiAgICAgICAgICAgICAgICAke2RldGFpbEluZm9IdG1sfVxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZsZXggZmxleC13cmFwIGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWJldHdlZW4gbWItNCBnYXAtMlwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9XCJ0b2dnbGVFcGlzb2RlT3JkZXIoJyR7c291cmNlQ29kZX0nLCAnJHtpZH0nKVwiIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwicHgtMyBweS0xLjUgYmctWyMzMzNdIGhvdmVyOmJnLVsjNDQ0XSBib3JkZXIgYm9yZGVyLVsjNDQ0XSByb3VuZGVkIHRleHQtc20gdHJhbnNpdGlvbi1jb2xvcnMgZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTFcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdmcgY2xhc3M9XCJ3LTQgaC00IHRyYW5zZm9ybSAke2VwaXNvZGVzUmV2ZXJzZWQgPyAncm90YXRlLTE4MCcgOiAnJ31cIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBzdHJva2UtbGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIiBzdHJva2Utd2lkdGg9XCIyXCIgZD1cIk0xOSAxNGwtNyA3bTAgMGwtNy03bTcgN1YzXCI+PC9wYXRoPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zdmc+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj4ke2VwaXNvZGVzUmV2ZXJzZWQgPyAnXHU2QjYzXHU1RThGXHU2MzkyXHU1MjE3JyA6ICdcdTUwMTJcdTVFOEZcdTYzOTJcdTUyMTcnfTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwidGV4dC1ncmF5LTQwMCB0ZXh0LXNtXCI+XHU1MTcxICR7ZGF0YS5lcGlzb2Rlcy5sZW5ndGh9IFx1OTZDNjwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9XCJjb3B5TGlua3MoKVwiIGNsYXNzPVwicHgtMyBweS0xLjUgYmctYmx1ZS02MDAgaG92ZXI6YmctYmx1ZS03MDAgdGV4dC13aGl0ZSByb3VuZGVkIHRleHQtc20gdHJhbnNpdGlvbi1jb2xvcnNcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgXHU1OTBEXHU1MjM2XHU5NEZFXHU2M0E1XHJcbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxkaXYgaWQ9XCJlcGlzb2Rlc0dyaWRcIiBjbGFzcz1cImdyaWQgZ3JpZC1jb2xzLTIgc206Z3JpZC1jb2xzLTQgbWQ6Z3JpZC1jb2xzLTYgbGc6Z3JpZC1jb2xzLTggZ2FwLTJcIj5cclxuICAgICAgICAgICAgICAgICAgICAke3JlbmRlckVwaXNvZGVzKHZvZF9uYW1lLCBzb3VyY2VDb2RlLCBpZCl9XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgYDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBtb2RhbENvbnRlbnQuaW5uZXJIVE1MID0gYFxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRleHQtY2VudGVyIHB5LThcIj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGV4dC1yZWQtNDAwIG1iLTJcIj5cdTI3NEMgXHU2NzJBXHU2MjdFXHU1MjMwXHU2NEFEXHU2NTNFXHU4RDQ0XHU2RTkwPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRleHQtZ3JheS01MDAgdGV4dC1zbVwiPlx1OEJFNVx1ODlDNlx1OTg5MVx1NTNFRlx1ODBGRFx1NjY4Mlx1NjVGNlx1NjVFMFx1NkNENVx1NjRBRFx1NjUzRVx1RkYwQ1x1OEJGN1x1NUMxRFx1OEJENVx1NTE3Nlx1NEVENlx1ODlDNlx1OTg5MTwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIGA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignXHU4M0I3XHU1M0Q2XHU4QkU2XHU2MEM1XHU5NTE5XHU4QkVGOicsIGVycm9yKTtcclxuICAgICAgICBzaG93VG9hc3QoJ1x1ODNCN1x1NTNENlx1OEJFNlx1NjBDNVx1NTkzMVx1OEQyNVx1RkYwQ1x1OEJGN1x1N0EwRFx1NTQwRVx1OTFDRFx1OEJENScsICdlcnJvcicpO1xyXG4gICAgfSBmaW5hbGx5IHtcclxuICAgICAgICBoaWRlTG9hZGluZygpO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyBcdTY2RjRcdTY1QjBcdTY0QURcdTY1M0VcdTg5QzZcdTk4OTFcdTUxRkRcdTY1NzBcdUZGMENcdTRGRUVcdTY1MzlcdTRFM0FcdTRGN0ZcdTc1Mjgvd2F0Y2hcdThERUZcdTVGODRcdTgwMENcdTRFMERcdTY2MkZcdTc2RjRcdTYzQTVcdTYyNTNcdTVGMDBwbGF5ZXIuaHRtbFxyXG5mdW5jdGlvbiBwbGF5VmlkZW8odXJsLCB2b2RfbmFtZSwgc291cmNlQ29kZSwgZXBpc29kZUluZGV4ID0gMCwgdm9kSWQgPSAnJykge1xyXG4gICAgLy8gXHU1QkM2XHU3ODAxXHU0RkREXHU2MkE0XHU2ODIxXHU5QThDXHJcbiAgICBpZiAod2luZG93LmlzUGFzc3dvcmRQcm90ZWN0ZWQgJiYgd2luZG93LmlzUGFzc3dvcmRWZXJpZmllZCkge1xyXG4gICAgICAgIGlmICh3aW5kb3cuaXNQYXNzd29yZFByb3RlY3RlZCgpICYmICF3aW5kb3cuaXNQYXNzd29yZFZlcmlmaWVkKCkpIHtcclxuICAgICAgICAgICAgc2hvd1Bhc3N3b3JkTW9kYWwgJiYgc2hvd1Bhc3N3b3JkTW9kYWwoKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBcdTgzQjdcdTUzRDZcdTVGNTNcdTUyNERcdThERUZcdTVGODRcdTRGNUNcdTRFM0FcdThGRDRcdTU2REVcdTk4NzVcdTk3NjJcclxuICAgIGxldCBjdXJyZW50UGF0aCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xyXG5cclxuICAgIC8vIFx1Njc4NFx1NUVGQVx1NjRBRFx1NjUzRVx1OTg3NVx1OTc2MlVSTFx1RkYwQ1x1NEY3Rlx1NzUyOHdhdGNoLmh0bWxcdTRGNUNcdTRFM0FcdTRFMkRcdTk1RjRcdThERjNcdThGNkNcdTk4NzVcclxuICAgIGxldCB3YXRjaFVybCA9IGB3YXRjaC5odG1sP2lkPSR7dm9kSWQgfHwgJyd9JnNvdXJjZT0ke3NvdXJjZUNvZGUgfHwgJyd9JnVybD0ke2VuY29kZVVSSUNvbXBvbmVudCh1cmwpfSZpbmRleD0ke2VwaXNvZGVJbmRleH0mdGl0bGU9JHtlbmNvZGVVUklDb21wb25lbnQodm9kX25hbWUgfHwgJycpfWA7XHJcblxyXG4gICAgLy8gXHU2REZCXHU1MkEwXHU4RkQ0XHU1NkRFVVJMXHU1M0MyXHU2NTcwXHJcbiAgICBpZiAoY3VycmVudFBhdGguaW5jbHVkZXMoJ2luZGV4Lmh0bWwnKSB8fCBjdXJyZW50UGF0aC5lbmRzV2l0aCgnLycpKSB7XHJcbiAgICAgICAgd2F0Y2hVcmwgKz0gYCZiYWNrPSR7ZW5jb2RlVVJJQ29tcG9uZW50KGN1cnJlbnRQYXRoKX1gO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1NEZERFx1NUI1OFx1NUY1M1x1NTI0RFx1NzJCNlx1NjAwMVx1NTIzMGxvY2FsU3RvcmFnZVxyXG4gICAgdHJ5IHtcclxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnY3VycmVudFZpZGVvVGl0bGUnLCB2b2RfbmFtZSB8fCAnXHU2NzJBXHU3N0U1XHU4OUM2XHU5ODkxJyk7XHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2N1cnJlbnRFcGlzb2RlcycsIEpTT04uc3RyaW5naWZ5KGN1cnJlbnRFcGlzb2RlcykpO1xyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjdXJyZW50RXBpc29kZUluZGV4JywgZXBpc29kZUluZGV4KTtcclxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnY3VycmVudFNvdXJjZUNvZGUnLCBzb3VyY2VDb2RlIHx8ICcnKTtcclxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnbGFzdFBsYXlUaW1lJywgRGF0ZS5ub3coKSk7XHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2xhc3RTZWFyY2hQYWdlJywgY3VycmVudFBhdGgpO1xyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdsYXN0UGFnZVVybCcsIGN1cnJlbnRQYXRoKTsgIC8vIFx1Nzg2RVx1NEZERFx1NEZERFx1NUI1OFx1OEZENFx1NTZERVx1OTg3NVx1OTc2MlVSTFxyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1NEZERFx1NUI1OFx1NjRBRFx1NjUzRVx1NzJCNlx1NjAwMVx1NTkzMVx1OEQyNTonLCBlKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdTU3MjhcdTVGNTNcdTUyNERcdTY4MDdcdTdCN0VcdTk4NzVcdTRFMkRcdTYyNTNcdTVGMDBcdTY0QURcdTY1M0VcdTk4NzVcdTk3NjJcclxuICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gd2F0Y2hVcmw7XHJcbn1cclxuXHJcbi8vIFx1NUYzOVx1NTFGQVx1NjRBRFx1NjUzRVx1NTY2OFx1OTg3NVx1OTc2MlxyXG5mdW5jdGlvbiBzaG93VmlkZW9QbGF5ZXIodXJsKSB7XHJcbiAgICAvLyBcdTU3MjhcdTYyNTNcdTVGMDBcdTY0QURcdTY1M0VcdTU2NjhcdTUyNERcdUZGMENcdTk2OTBcdTg1Q0ZcdThCRTZcdTYwQzVcdTVGMzlcdTdBOTdcclxuICAgIGNvbnN0IGRldGFpbE1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZGFsJyk7XHJcbiAgICBpZiAoZGV0YWlsTW9kYWwpIHtcclxuICAgICAgICBkZXRhaWxNb2RhbC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcclxuICAgIH1cclxuICAgIC8vIFx1NEUzNFx1NjVGNlx1OTY5MFx1ODVDRlx1NjQxQ1x1N0QyMlx1N0VEM1x1Njc5Q1x1NTQ4Q1x1OEM0Nlx1NzRFM1x1NTMzQVx1NTdERlx1RkYwQ1x1OTYzMlx1NkI2Mlx1OUFEOFx1NUVBNlx1OEQ4NVx1NTFGQVx1NjRBRFx1NjUzRVx1NTY2OFx1ODAwQ1x1NTFGQVx1NzNCMFx1NkVEQVx1NTJBOFx1Njc2MVxyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3VsdHNBcmVhJykuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZG91YmFuQXJlYScpLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xyXG4gICAgLy8gXHU1NzI4XHU2ODQ2XHU2N0I2XHU0RTJEXHU2MjUzXHU1RjAwXHU2NEFEXHU2NTNFXHU5ODc1XHU5NzYyXHJcbiAgICB2aWRlb1BsYXllckZyYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaWZyYW1lJyk7XHJcbiAgICB2aWRlb1BsYXllckZyYW1lLmlkID0gJ1ZpZGVvUGxheWVyRnJhbWUnO1xyXG4gICAgdmlkZW9QbGF5ZXJGcmFtZS5jbGFzc05hbWUgPSAnZml4ZWQgdy1mdWxsIGgtc2NyZWVuIHotNDAnO1xyXG4gICAgdmlkZW9QbGF5ZXJGcmFtZS5zcmMgPSB1cmw7XHJcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHZpZGVvUGxheWVyRnJhbWUpO1xyXG4gICAgLy8gXHU1QzA2XHU3MTI2XHU3MEI5XHU3OUZCXHU1MTY1aWZyYW1lXHJcbiAgICB2aWRlb1BsYXllckZyYW1lLmZvY3VzKCk7XHJcbn1cclxuXHJcbi8vIFx1NTE3M1x1OTVFRFx1NjRBRFx1NjUzRVx1NTY2OFx1OTg3NVx1OTc2MlxyXG5mdW5jdGlvbiBjbG9zZVZpZGVvUGxheWVyKGhvbWUgPSBmYWxzZSkge1xyXG4gICAgdmlkZW9QbGF5ZXJGcmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdWaWRlb1BsYXllckZyYW1lJyk7XHJcbiAgICBpZiAodmlkZW9QbGF5ZXJGcmFtZSkge1xyXG4gICAgICAgIHZpZGVvUGxheWVyRnJhbWUucmVtb3ZlKCk7XHJcbiAgICAgICAgLy8gXHU2MDYyXHU1OTBEXHU2NDFDXHU3RDIyXHU3RUQzXHU2NzlDXHU2NjNFXHU3OTNBXHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3VsdHNBcmVhJykuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XHJcbiAgICAgICAgLy8gXHU1MTczXHU5NUVEXHU2NEFEXHU2NTNFXHU1NjY4XHU2NUY2XHU0RTVGXHU5NjkwXHU4NUNGXHU4QkU2XHU2MEM1XHU1RjM5XHU3QTk3XHJcbiAgICAgICAgY29uc3QgZGV0YWlsTW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9kYWwnKTtcclxuICAgICAgICBpZiAoZGV0YWlsTW9kYWwpIHtcclxuICAgICAgICAgICAgZGV0YWlsTW9kYWwuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NTQyRlx1NzUyOFx1OEM0Nlx1NzRFM1x1NTMzQVx1NTdERlx1NTIxOVx1NjYzRVx1NzkzQVx1OEM0Nlx1NzRFM1x1NTMzQVx1NTdERlxyXG4gICAgICAgIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZG91YmFuRW5hYmxlZCcpID09PSAndHJ1ZScpIHtcclxuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RvdWJhbkFyZWEnKS5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoaG9tZSkge1xyXG4gICAgICAgIC8vIFx1NTIzN1x1NjVCMFx1NEUzQlx1OTg3NVxyXG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy8nXHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIFx1NjRBRFx1NjUzRVx1NEUwQVx1NEUwMFx1OTZDNlxyXG5mdW5jdGlvbiBwbGF5UHJldmlvdXNFcGlzb2RlKHNvdXJjZUNvZGUpIHtcclxuICAgIGlmIChjdXJyZW50RXBpc29kZUluZGV4ID4gMCkge1xyXG4gICAgICAgIGNvbnN0IHByZXZJbmRleCA9IGN1cnJlbnRFcGlzb2RlSW5kZXggLSAxO1xyXG4gICAgICAgIGNvbnN0IHByZXZVcmwgPSBjdXJyZW50RXBpc29kZXNbcHJldkluZGV4XTtcclxuICAgICAgICBwbGF5VmlkZW8ocHJldlVybCwgY3VycmVudFZpZGVvVGl0bGUsIHNvdXJjZUNvZGUsIHByZXZJbmRleCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIFx1NjRBRFx1NjUzRVx1NEUwQlx1NEUwMFx1OTZDNlxyXG5mdW5jdGlvbiBwbGF5TmV4dEVwaXNvZGUoc291cmNlQ29kZSkge1xyXG4gICAgaWYgKGN1cnJlbnRFcGlzb2RlSW5kZXggPCBjdXJyZW50RXBpc29kZXMubGVuZ3RoIC0gMSkge1xyXG4gICAgICAgIGNvbnN0IG5leHRJbmRleCA9IGN1cnJlbnRFcGlzb2RlSW5kZXggKyAxO1xyXG4gICAgICAgIGNvbnN0IG5leHRVcmwgPSBjdXJyZW50RXBpc29kZXNbbmV4dEluZGV4XTtcclxuICAgICAgICBwbGF5VmlkZW8obmV4dFVybCwgY3VycmVudFZpZGVvVGl0bGUsIHNvdXJjZUNvZGUsIG5leHRJbmRleCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIFx1NTkwNFx1NzQwNlx1NjRBRFx1NjUzRVx1NTY2OFx1NTJBMFx1OEY3RFx1OTUxOVx1OEJFRlxyXG5mdW5jdGlvbiBoYW5kbGVQbGF5ZXJFcnJvcigpIHtcclxuICAgIGhpZGVMb2FkaW5nKCk7XHJcbiAgICBzaG93VG9hc3QoJ1x1ODlDNlx1OTg5MVx1NjRBRFx1NjUzRVx1NTJBMFx1OEY3RFx1NTkzMVx1OEQyNVx1RkYwQ1x1OEJGN1x1NUMxRFx1OEJENVx1NTE3Nlx1NEVENlx1ODlDNlx1OTg5MVx1NkU5MCcsICdlcnJvcicpO1xyXG59XHJcblxyXG4vLyBcdThGODVcdTUyQTlcdTUxRkRcdTY1NzBcdTc1MjhcdTRFOEVcdTZFMzJcdTY3RDNcdTUyNjdcdTk2QzZcdTYzMDlcdTk0QUVcdUZGMDhcdTRGN0ZcdTc1MjhcdTVGNTNcdTUyNERcdTc2ODRcdTYzOTJcdTVFOEZcdTcyQjZcdTYwMDFcdUZGMDlcclxuZnVuY3Rpb24gcmVuZGVyRXBpc29kZXModm9kTmFtZSwgc291cmNlQ29kZSwgdm9kSWQpIHtcclxuICAgIGNvbnN0IGVwaXNvZGVzID0gZXBpc29kZXNSZXZlcnNlZCA/IFsuLi5jdXJyZW50RXBpc29kZXNdLnJldmVyc2UoKSA6IGN1cnJlbnRFcGlzb2RlcztcclxuICAgIHJldHVybiBlcGlzb2Rlcy5tYXAoKGVwaXNvZGUsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgLy8gXHU2ODM5XHU2MzZFXHU1MDEyXHU1RThGXHU3MkI2XHU2MDAxXHU4QkExXHU3Qjk3XHU3NzFGXHU1QjlFXHU3Njg0XHU1MjY3XHU5NkM2XHU3RDIyXHU1RjE1XHJcbiAgICAgICAgY29uc3QgcmVhbEluZGV4ID0gZXBpc29kZXNSZXZlcnNlZCA/IGN1cnJlbnRFcGlzb2Rlcy5sZW5ndGggLSAxIC0gaW5kZXggOiBpbmRleDtcclxuICAgICAgICByZXR1cm4gYFxyXG4gICAgICAgICAgICA8YnV0dG9uIGlkPVwiZXBpc29kZS0ke3JlYWxJbmRleH1cIiBvbmNsaWNrPVwicGxheVZpZGVvKCcke2VwaXNvZGV9JywnJHt2b2ROYW1lLnJlcGxhY2UoL1wiL2csICcmcXVvdDsnKX0nLCAnJHtzb3VyY2VDb2RlfScsICR7cmVhbEluZGV4fSwgJyR7dm9kSWR9JylcIiBcclxuICAgICAgICAgICAgICAgICAgICBjbGFzcz1cInB4LTQgcHktMiBiZy1bIzIyMl0gaG92ZXI6YmctWyMzMzNdIGJvcmRlciBib3JkZXItWyMzMzNdIHJvdW5kZWQtbGcgdHJhbnNpdGlvbi1jb2xvcnMgdGV4dC1jZW50ZXIgZXBpc29kZS1idG5cIj5cclxuICAgICAgICAgICAgICAgICR7cmVhbEluZGV4ICsgMX1cclxuICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgYDtcclxuICAgIH0pLmpvaW4oJycpO1xyXG59XHJcblxyXG4vLyBcdTU5MERcdTUyMzZcdTg5QzZcdTk4OTFcdTk0RkVcdTYzQTVcdTUyMzBcdTUyNkFcdThEMzRcdTY3N0ZcclxuZnVuY3Rpb24gY29weUxpbmtzKCkge1xyXG4gICAgY29uc3QgZXBpc29kZXMgPSBlcGlzb2Rlc1JldmVyc2VkID8gWy4uLmN1cnJlbnRFcGlzb2Rlc10ucmV2ZXJzZSgpIDogY3VycmVudEVwaXNvZGVzO1xyXG4gICAgY29uc3QgbGlua0xpc3QgPSBlcGlzb2Rlcy5qb2luKCdcXHJcXG4nKTtcclxuICAgIG5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0KGxpbmtMaXN0KS50aGVuKCgpID0+IHtcclxuICAgICAgICBzaG93VG9hc3QoJ1x1NjRBRFx1NjUzRVx1OTRGRVx1NjNBNVx1NURGMlx1NTkwRFx1NTIzNicsICdzdWNjZXNzJyk7XHJcbiAgICB9KS5jYXRjaChlcnIgPT4ge1xyXG4gICAgICAgIHNob3dUb2FzdCgnXHU1OTBEXHU1MjM2XHU1OTMxXHU4RDI1XHVGRjBDXHU4QkY3XHU2OEMwXHU2N0U1XHU2RDRGXHU4OUM4XHU1NjY4XHU2NzQzXHU5NjUwJywgJ2Vycm9yJyk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuLy8gXHU1MjA3XHU2MzYyXHU2MzkyXHU1RThGXHU3MkI2XHU2MDAxXHU3Njg0XHU1MUZEXHU2NTcwXHJcbmZ1bmN0aW9uIHRvZ2dsZUVwaXNvZGVPcmRlcihzb3VyY2VDb2RlLCB2b2RJZCkge1xyXG4gICAgZXBpc29kZXNSZXZlcnNlZCA9ICFlcGlzb2Rlc1JldmVyc2VkO1xyXG4gICAgLy8gXHU5MUNEXHU2NUIwXHU2RTMyXHU2N0QzXHU1MjY3XHU5NkM2XHU1MzNBXHU1N0RGXHVGRjBDXHU0RjdGXHU3NTI4IGN1cnJlbnRWaWRlb1RpdGxlIFx1NEY1Q1x1NEUzQVx1ODlDNlx1OTg5MVx1NjgwN1x1OTg5OFxyXG4gICAgY29uc3QgZXBpc29kZXNHcmlkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VwaXNvZGVzR3JpZCcpO1xyXG4gICAgaWYgKGVwaXNvZGVzR3JpZCkge1xyXG4gICAgICAgIGVwaXNvZGVzR3JpZC5pbm5lckhUTUwgPSByZW5kZXJFcGlzb2RlcyhjdXJyZW50VmlkZW9UaXRsZSwgc291cmNlQ29kZSwgdm9kSWQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1NjZGNFx1NjVCMFx1NjMwOVx1OTRBRVx1NjU4N1x1NjcyQ1x1NTQ4Q1x1N0JBRFx1NTkzNFx1NjVCOVx1NTQxMVxyXG4gICAgY29uc3QgdG9nZ2xlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgYnV0dG9uW29uY2xpY2s9XCJ0b2dnbGVFcGlzb2RlT3JkZXIoJyR7c291cmNlQ29kZX0nLCAnJHt2b2RJZH0nKVwiXWApO1xyXG4gICAgaWYgKHRvZ2dsZUJ0bikge1xyXG4gICAgICAgIHRvZ2dsZUJ0bi5xdWVyeVNlbGVjdG9yKCdzcGFuJykudGV4dENvbnRlbnQgPSBlcGlzb2Rlc1JldmVyc2VkID8gJ1x1NkI2M1x1NUU4Rlx1NjM5Mlx1NTIxNycgOiAnXHU1MDEyXHU1RThGXHU2MzkyXHU1MjE3JztcclxuICAgICAgICBjb25zdCBhcnJvd0ljb24gPSB0b2dnbGVCdG4ucXVlcnlTZWxlY3Rvcignc3ZnJyk7XHJcbiAgICAgICAgaWYgKGFycm93SWNvbikge1xyXG4gICAgICAgICAgICBhcnJvd0ljb24uc3R5bGUudHJhbnNmb3JtID0gZXBpc29kZXNSZXZlcnNlZCA/ICdyb3RhdGUoMTgwZGVnKScgOiAncm90YXRlKDBkZWcpJztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIFx1NEVDRVVSTFx1NUJGQ1x1NTE2NVx1OTE0RFx1N0Y2RVxyXG5hc3luYyBmdW5jdGlvbiBpbXBvcnRDb25maWdGcm9tVXJsKCkge1xyXG4gICAgLy8gXHU1MjFCXHU1RUZBXHU2QTIxXHU2MDAxXHU2ODQ2XHU1MTQzXHU3RDIwXHJcbiAgICBsZXQgbW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW1wb3J0VXJsTW9kYWwnKTtcclxuICAgIGlmIChtb2RhbCkge1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobW9kYWwpO1xyXG4gICAgfVxyXG5cclxuICAgIG1vZGFsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICBtb2RhbC5pZCA9ICdpbXBvcnRVcmxNb2RhbCc7XHJcbiAgICBtb2RhbC5jbGFzc05hbWUgPSAnZml4ZWQgaW5zZXQtMCBiZy1ibGFjayBiZy1vcGFjaXR5LTc1IGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHotNDAnO1xyXG5cclxuICAgIG1vZGFsLmlubmVySFRNTCA9IGBcclxuICAgICAgICA8ZGl2IGNsYXNzPVwiYmctWyMxOTE5MTldIHJvdW5kZWQtbGcgcC02IG1heC13LW1kIHctZnVsbCBtYXgtaC1bOTB2aF0gb3ZlcmZsb3cteS1hdXRvIHJlbGF0aXZlXCI+XHJcbiAgICAgICAgICAgIDxidXR0b24gaWQ9XCJjbG9zZVVybE1vZGFsXCIgY2xhc3M9XCJhYnNvbHV0ZSB0b3AtNCByaWdodC00IHRleHQtZ3JheS00MDAgaG92ZXI6dGV4dC13aGl0ZSB0ZXh0LXhsXCI+JnRpbWVzOzwvYnV0dG9uPlxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgPGgzIGNsYXNzPVwidGV4dC14bCBmb250LWJvbGQgbWItNFwiPlx1NEVDRVVSTFx1NUJGQ1x1NTE2NVx1OTE0RFx1N0Y2RTwvaDM+XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwibWItNFwiPlxyXG4gICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgaWQ9XCJjb25maWdVcmxcIiBwbGFjZWhvbGRlcj1cIlx1OEY5M1x1NTE2NVx1OTE0RFx1N0Y2RVx1NjU4N1x1NEVGNlVSTFwiIFxyXG4gICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwidy1mdWxsIHB4LTMgcHktMiBiZy1bIzIyMl0gYm9yZGVyIGJvcmRlci1bIzMzM10gcm91bmRlZC1sZyB0ZXh0LXdoaXRlIGZvY3VzOm91dGxpbmUtbm9uZSBmb2N1czpyaW5nLTEgZm9jdXM6cmluZy1ibHVlLTUwMFwiPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmbGV4IGp1c3RpZnktZW5kIHNwYWNlLXgtMlwiPlxyXG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD1cImNvbmZpcm1VcmxJbXBvcnRcIiBjbGFzcz1cImJnLWJsdWUtNjAwIGhvdmVyOmJnLWJsdWUtNzAwIHRleHQtd2hpdGUgcHgtNCBweS0yIHJvdW5kZWRcIj5cdTVCRkNcdTUxNjU8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9XCJjYW5jZWxVcmxJbXBvcnRcIiBjbGFzcz1cImJnLVsjNDQ0XSBob3ZlcjpiZy1bIzU1NV0gdGV4dC13aGl0ZSBweC00IHB5LTIgcm91bmRlZFwiPlx1NTNENlx1NkQ4ODwvYnV0dG9uPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5gO1xyXG5cclxuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobW9kYWwpO1xyXG5cclxuICAgIC8vIFx1NTE3M1x1OTVFRFx1NjMwOVx1OTRBRVx1NEU4Qlx1NEVGNlxyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Nsb3NlVXJsTW9kYWwnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKG1vZGFsKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIFx1NTNENlx1NkQ4OFx1NjMwOVx1OTRBRVx1NEU4Qlx1NEVGNlxyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhbmNlbFVybEltcG9ydCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobW9kYWwpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gXHU3ODZFXHU4QkE0XHU1QkZDXHU1MTY1XHU2MzA5XHU5NEFFXHU0RThCXHU0RUY2XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29uZmlybVVybEltcG9ydCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHVybCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb25maWdVcmwnKS52YWx1ZS50cmltKCk7XHJcbiAgICAgICAgaWYgKCF1cmwpIHtcclxuICAgICAgICAgICAgc2hvd1RvYXN0KCdcdThCRjdcdThGOTNcdTUxNjVcdTkxNERcdTdGNkVcdTY1ODdcdTRFRjZVUkwnLCAnd2FybmluZycpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBcdTlBOENcdThCQzFVUkxcdTY4M0NcdTVGMEZcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCB1cmxPYmogPSBuZXcgVVJMKHVybCk7XHJcbiAgICAgICAgICAgIGlmICh1cmxPYmoucHJvdG9jb2wgIT09ICdodHRwOicgJiYgdXJsT2JqLnByb3RvY29sICE9PSAnaHR0cHM6Jykge1xyXG4gICAgICAgICAgICAgICAgc2hvd1RvYXN0KCdVUkxcdTVGQzVcdTk4N0JcdTRFRTVodHRwOi8vXHU2MjE2aHR0cHM6Ly9cdTVGMDBcdTU5MzQnLCAnd2FybmluZycpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBzaG93VG9hc3QoJ1VSTFx1NjgzQ1x1NUYwRlx1NEUwRFx1NkI2M1x1Nzg2RScsICd3YXJuaW5nJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHNob3dMb2FkaW5nKCdcdTZCNjNcdTU3MjhcdTRFQ0VVUkxcdTVCRkNcdTUxNjVcdTkxNERcdTdGNkUuLi4nKTtcclxuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gXHU4M0I3XHU1M0Q2XHU5MTREXHU3RjZFXHU2NTg3XHU0RUY2IC0gXHU3NkY0XHU2M0E1XHU4QkY3XHU2QzQyVVJMXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLCB7XHJcbiAgICAgICAgICAgICAgICBtb2RlOiAnY29ycycsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykgdGhyb3cgJ1x1ODNCN1x1NTNENlx1OTE0RFx1N0Y2RVx1NjU4N1x1NEVGNlx1NTkzMVx1OEQyNSc7XHJcblxyXG4gICAgICAgICAgICAvLyBcdTlBOENcdThCQzFcdTU0Q0RcdTVFOTRcdTUxODVcdTVCQjlcdTdDN0JcdTU3OEJcclxuICAgICAgICAgICAgY29uc3QgY29udGVudFR5cGUgPSByZXNwb25zZS5oZWFkZXJzLmdldCgnY29udGVudC10eXBlJyk7XHJcbiAgICAgICAgICAgIGlmICghY29udGVudFR5cGUgfHwgIWNvbnRlbnRUeXBlLmluY2x1ZGVzKCdhcHBsaWNhdGlvbi9qc29uJykpIHtcclxuICAgICAgICAgICAgICAgIHRocm93ICdcdTU0Q0RcdTVFOTRcdTRFMERcdTY2MkZcdTY3MDlcdTY1NDhcdTc2ODRKU09OXHU2ODNDXHU1RjBGJztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgY29uZmlnID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgICAgICAgICBpZiAoY29uZmlnLm5hbWUgIT09ICdMaWJyZVRWLVNldHRpbmdzJykgdGhyb3cgJ1x1OTE0RFx1N0Y2RVx1NjU4N1x1NEVGNlx1NjgzQ1x1NUYwRlx1NEUwRFx1NkI2M1x1Nzg2RSc7XHJcblxyXG4gICAgICAgICAgICAvLyBcdTlBOENcdThCQzFcdTU0QzhcdTVFMENcclxuICAgICAgICAgICAgY29uc3QgZGF0YUhhc2ggPSBhd2FpdCBzaGEyNTYoSlNPTi5zdHJpbmdpZnkoY29uZmlnLmRhdGEpKTtcclxuICAgICAgICAgICAgaWYgKGRhdGFIYXNoICE9PSBjb25maWcuaGFzaCkgdGhyb3cgJ1x1OTE0RFx1N0Y2RVx1NjU4N1x1NEVGNlx1NTRDOFx1NUUwQ1x1NTAzQ1x1NEUwRFx1NTMzOVx1OTE0RCc7XHJcblxyXG4gICAgICAgICAgICAvLyBcdTVCRkNcdTUxNjVcdTkxNERcdTdGNkVcclxuICAgICAgICAgICAgZm9yIChsZXQgaXRlbSBpbiBjb25maWcuZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oaXRlbSwgY29uZmlnLmRhdGFbaXRlbV0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBzaG93VG9hc3QoJ1x1OTE0RFx1N0Y2RVx1NjU4N1x1NEVGNlx1NUJGQ1x1NTE2NVx1NjIxMFx1NTI5Rlx1RkYwQzMgXHU3OUQyXHU1NDBFXHU4MUVBXHU1MkE4XHU1MjM3XHU2NUIwXHU2NzJDXHU5ODc1XHU5NzYyXHUzMDAyJywgJ3N1Y2Nlc3MnKTtcclxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgIH0sIDMwMDApO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSB0eXBlb2YgZXJyb3IgPT09ICdzdHJpbmcnID8gZXJyb3IgOiAnXHU1QkZDXHU1MTY1XHU5MTREXHU3RjZFXHU1OTMxXHU4RDI1JztcclxuICAgICAgICAgICAgc2hvd1RvYXN0KGBcdTRFQ0VVUkxcdTVCRkNcdTUxNjVcdTkxNERcdTdGNkVcdTUxRkFcdTk1MTkgKCR7bWVzc2FnZX0pYCwgJ2Vycm9yJyk7XHJcbiAgICAgICAgfSBmaW5hbGx5IHtcclxuICAgICAgICAgICAgaGlkZUxvYWRpbmcoKTtcclxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChtb2RhbCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gXHU3MEI5XHU1MUZCXHU2QTIxXHU2MDAxXHU2ODQ2XHU1OTE2XHU5MEU4XHU1MTczXHU5NUVEXHJcbiAgICBtb2RhbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICAgICAgaWYgKGUudGFyZ2V0ID09PSBtb2RhbCkge1xyXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKG1vZGFsKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuLy8gXHU5MTREXHU3RjZFXHU2NTg3XHU0RUY2XHU1QkZDXHU1MTY1XHU1MjlGXHU4MEZEXHJcbmFzeW5jIGZ1bmN0aW9uIGltcG9ydENvbmZpZygpIHtcclxuICAgIHNob3dJbXBvcnRCb3goYXN5bmMgKGZpbGUpID0+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTY1ODdcdTRFRjZcdTdDN0JcdTU3OEJcclxuICAgICAgICAgICAgaWYgKCEoZmlsZS50eXBlID09PSAnYXBwbGljYXRpb24vanNvbicgfHwgZmlsZS5uYW1lLmVuZHNXaXRoKCcuanNvbicpKSkgdGhyb3cgJ1x1NjU4N1x1NEVGNlx1N0M3Qlx1NTc4Qlx1NEUwRFx1NkI2M1x1Nzg2RSc7XHJcblxyXG4gICAgICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTY1ODdcdTRFRjZcdTU5MjdcdTVDMEZcclxuICAgICAgICAgICAgaWYgKGZpbGUuc2l6ZSA+IDEwMjQgKiAxMDI0ICogMTApIHRocm93IG5ldyBFcnJvcignXHU2NTg3XHU0RUY2XHU1OTI3XHU1QzBGXHU4RDg1XHU4RkM3IDEwTUInKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFx1OEJGQlx1NTNENlx1NjU4N1x1NEVGNlx1NTE4NVx1NUJCOVxyXG4gICAgICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcclxuICAgICAgICAgICAgICAgIHJlYWRlci5vbmxvYWQgPSAoKSA9PiByZXNvbHZlKHJlYWRlci5yZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgcmVhZGVyLm9uZXJyb3IgPSAoKSA9PiByZWplY3QoJ1x1NjU4N1x1NEVGNlx1OEJGQlx1NTNENlx1NTkzMVx1OEQyNScpO1xyXG4gICAgICAgICAgICAgICAgcmVhZGVyLnJlYWRBc1RleHQoZmlsZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8gXHU4OUUzXHU2NzkwXHU1RTc2XHU5QThDXHU4QkMxXHU5MTREXHU3RjZFXHJcbiAgICAgICAgICAgIGNvbnN0IGNvbmZpZyA9IEpTT04ucGFyc2UoY29udGVudCk7XHJcbiAgICAgICAgICAgIGlmIChjb25maWcubmFtZSAhPT0gJ0xpYnJlVFYtU2V0dGluZ3MnKSB0aHJvdyAnXHU5MTREXHU3RjZFXHU2NTg3XHU0RUY2XHU2ODNDXHU1RjBGXHU0RTBEXHU2QjYzXHU3ODZFJztcclxuXHJcbiAgICAgICAgICAgIC8vIFx1OUE4Q1x1OEJDMVx1NTRDOFx1NUUwQ1xyXG4gICAgICAgICAgICBjb25zdCBkYXRhSGFzaCA9IGF3YWl0IHNoYTI1NihKU09OLnN0cmluZ2lmeShjb25maWcuZGF0YSkpO1xyXG4gICAgICAgICAgICBpZiAoZGF0YUhhc2ggIT09IGNvbmZpZy5oYXNoKSB0aHJvdyAnXHU5MTREXHU3RjZFXHU2NTg3XHU0RUY2XHU1NEM4XHU1RTBDXHU1MDNDXHU0RTBEXHU1MzM5XHU5MTREJztcclxuXHJcbiAgICAgICAgICAgIC8vIFx1NUJGQ1x1NTE2NVx1OTE0RFx1N0Y2RVxyXG4gICAgICAgICAgICBmb3IgKGxldCBpdGVtIGluIGNvbmZpZy5kYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShpdGVtLCBjb25maWcuZGF0YVtpdGVtXSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHNob3dUb2FzdCgnXHU5MTREXHU3RjZFXHU2NTg3XHU0RUY2XHU1QkZDXHU1MTY1XHU2MjEwXHU1MjlGXHVGRjBDMyBcdTc5RDJcdTU0MEVcdTgxRUFcdTUyQThcdTUyMzdcdTY1QjBcdTY3MkNcdTk4NzVcdTk3NjJcdTMwMDInLCAnc3VjY2VzcycpO1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgfSwgMzAwMCk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IHR5cGVvZiBlcnJvciA9PT0gJ3N0cmluZycgPyBlcnJvciA6ICdcdTkxNERcdTdGNkVcdTY1ODdcdTRFRjZcdTY4M0NcdTVGMEZcdTk1MTlcdThCRUYnO1xyXG4gICAgICAgICAgICBzaG93VG9hc3QoYFx1OTE0RFx1N0Y2RVx1NjU4N1x1NEVGNlx1OEJGQlx1NTNENlx1NTFGQVx1OTUxOSAoJHttZXNzYWdlfSlgLCAnZXJyb3InKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuLy8gXHU5MTREXHU3RjZFXHU2NTg3XHU0RUY2XHU1QkZDXHU1MUZBXHU1MjlGXHU4MEZEXHJcbmFzeW5jIGZ1bmN0aW9uIGV4cG9ydENvbmZpZygpIHtcclxuICAgIC8vIFx1NUI1OFx1NTBBOFx1OTE0RFx1N0Y2RVx1NjU3MFx1NjM2RVxyXG4gICAgY29uc3QgY29uZmlnID0ge307XHJcbiAgICBjb25zdCBpdGVtcyA9IHt9O1xyXG5cclxuICAgIGNvbnN0IHNldHRpbmdzVG9FeHBvcnQgPSBbXHJcbiAgICAgICAgJ3NlbGVjdGVkQVBJcycsXHJcbiAgICAgICAgJ2N1c3RvbUFQSXMnLFxyXG4gICAgICAgICd5ZWxsb3dGaWx0ZXJFbmFibGVkJyxcclxuICAgICAgICAnYWRGaWx0ZXJpbmdFbmFibGVkJyxcclxuICAgICAgICAnZG91YmFuRW5hYmxlZCcsXHJcbiAgICAgICAgJ2hhc0luaXRpYWxpemVkRGVmYXVsdHMnXHJcbiAgICBdO1xyXG5cclxuICAgIC8vIFx1NUJGQ1x1NTFGQVx1OEJCRVx1N0Y2RVx1OTg3OVxyXG4gICAgc2V0dGluZ3NUb0V4cG9ydC5mb3JFYWNoKGtleSA9PiB7XHJcbiAgICAgICAgY29uc3QgdmFsdWUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpO1xyXG4gICAgICAgIGlmICh2YWx1ZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBpdGVtc1trZXldID0gdmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gXHU1QkZDXHU1MUZBXHU1Mzg2XHU1M0YyXHU4QkIwXHU1RjU1XHJcbiAgICBjb25zdCB2aWV3aW5nSGlzdG9yeSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd2aWV3aW5nSGlzdG9yeScpO1xyXG4gICAgaWYgKHZpZXdpbmdIaXN0b3J5KSB7XHJcbiAgICAgICAgaXRlbXNbJ3ZpZXdpbmdIaXN0b3J5J10gPSB2aWV3aW5nSGlzdG9yeTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBzZWFyY2hIaXN0b3J5ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oU0VBUkNIX0hJU1RPUllfS0VZKTtcclxuICAgIGlmIChzZWFyY2hIaXN0b3J5KSB7XHJcbiAgICAgICAgaXRlbXNbU0VBUkNIX0hJU1RPUllfS0VZXSA9IHNlYXJjaEhpc3Rvcnk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgdGltZXMgPSBEYXRlLm5vdygpLnRvU3RyaW5nKCk7XHJcbiAgICBjb25maWdbJ25hbWUnXSA9ICdMaWJyZVRWLVNldHRpbmdzJzsgIC8vIFx1OTE0RFx1N0Y2RVx1NjU4N1x1NEVGNlx1NTQwRFx1RkYwQ1x1NzUyOFx1NEU4RVx1NjgyMVx1OUE4Q1xyXG4gICAgY29uZmlnWyd0aW1lJ10gPSB0aW1lczsgICAgICAgICAgICAgICAvLyBcdTkxNERcdTdGNkVcdTY1ODdcdTRFRjZcdTc1MUZcdTYyMTBcdTY1RjZcdTk1RjRcclxuICAgIGNvbmZpZ1snY2ZnVmVyJ10gPSAnMS4wLjAnOyAgICAgICAgICAgLy8gXHU5MTREXHU3RjZFXHU2NTg3XHU0RUY2XHU3MjQ4XHU2NzJDXHJcbiAgICBjb25maWdbJ2RhdGEnXSA9IGl0ZW1zOyAgICAgICAgICAgICAgIC8vIFx1OTE0RFx1N0Y2RVx1NjU4N1x1NEVGNlx1NjU3MFx1NjM2RVxyXG4gICAgY29uZmlnWydoYXNoJ10gPSBhd2FpdCBzaGEyNTYoSlNPTi5zdHJpbmdpZnkoY29uZmlnWydkYXRhJ10pKTsgIC8vIFx1OEJBMVx1N0I5N1x1NjU3MFx1NjM2RVx1NzY4NFx1NTRDOFx1NUUwQ1x1NTAzQ1x1RkYwQ1x1NzUyOFx1NEU4RVx1NjgyMVx1OUE4Q1xyXG5cclxuICAgIC8vIFx1NUMwNlx1OTE0RFx1N0Y2RVx1NjU3MFx1NjM2RVx1NEZERFx1NUI1OFx1NEUzQSBKU09OIFx1NjU4N1x1NEVGNlxyXG4gICAgc2F2ZVN0cmluZ0FzRmlsZShKU09OLnN0cmluZ2lmeShjb25maWcpLCAnTGlicmVUVi1TZXR0aW5nc18nICsgdGltZXMgKyAnLmpzb24nKTtcclxufVxyXG5cclxuLy8gXHU1QzA2XHU1QjU3XHU3QjI2XHU0RTMyXHU0RkREXHU1QjU4XHU0RTNBXHU2NTg3XHU0RUY2XHJcbmZ1bmN0aW9uIHNhdmVTdHJpbmdBc0ZpbGUoY29udGVudCwgZmlsZU5hbWUpIHtcclxuICAgIC8vIFx1NTIxQlx1NUVGQUJsb2JcdTVCRjlcdThDNjFcdTVFNzZcdTYzMDdcdTVCOUFcdTdDN0JcdTU3OEJcclxuICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbY29udGVudF0sIHsgdHlwZTogJ3RleHQvcGxhaW47Y2hhcnNldD11dGYtOCcgfSk7XHJcbiAgICAvLyBcdTc1MUZcdTYyMTBcdTRFMzRcdTY1RjZVUkxcclxuICAgIGNvbnN0IHVybCA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xyXG4gICAgLy8gXHU1MjFCXHU1RUZBPGE+XHU2ODA3XHU3QjdFXHU1RTc2XHU4OUU2XHU1M0QxXHU0RTBCXHU4RjdEXHJcbiAgICBjb25zdCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xyXG4gICAgYS5ocmVmID0gdXJsO1xyXG4gICAgYS5kb3dubG9hZCA9IGZpbGVOYW1lO1xyXG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhKTtcclxuICAgIGEuY2xpY2soKTtcclxuICAgIC8vIFx1NkUwNVx1NzQwNlx1NEUzNFx1NjVGNlx1NUJGOVx1OEM2MVxyXG4gICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChhKTtcclxuICAgIHdpbmRvdy5VUkwucmV2b2tlT2JqZWN0VVJMKHVybCk7XHJcbn1cclxuXHJcbi8vIFx1NzlGQlx1OTY2NE5vZGUuanNcdTc2ODRyZXF1aXJlXHU4QkVEXHU1M0U1XHVGRjBDXHU1NkUwXHU0RTNBXHU4RkQ5XHU2NjJGXHU1NzI4XHU2RDRGXHU4OUM4XHU1NjY4XHU3M0FGXHU1ODgzXHU0RTJEXHU4RkQwXHU4ODRDXHU3Njg0XHJcbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFRQSxNQUFNQSxtQkFBa0I7QUFBQSxJQUNwQixpQkFBaUI7QUFBQTtBQUFBLElBQ2pCLGlCQUFpQixLQUFLLEtBQUssS0FBSyxLQUFLO0FBQUE7QUFBQSxFQUN6QztBQVlBLE1BQU1DLGFBQVk7QUFBQSxJQUNkLFlBQVk7QUFBQSxNQUNSLEtBQUs7QUFBQSxNQUNMLE1BQU07QUFBQSxNQUNOLE9BQU87QUFBQSxJQUNYO0FBQUE7QUFBQSxFQUVKO0FBR0EsV0FBUyxlQUFlLFVBQVU7QUFDOUIsV0FBTyxPQUFPQSxZQUFXLFFBQVE7QUFBQSxFQUNyQztBQUdBLFNBQU8sWUFBWUE7QUFDbkIsU0FBTyxpQkFBaUI7OztBQ2pDeEIsTUFBSSxxQkFBcUI7QUFLekIsaUJBQWUsa0JBQWtCO0FBQzdCLFFBQUksb0JBQW9CO0FBQ3BCLGFBQU87QUFBQSxJQUNYO0FBR0EsVUFBTSxhQUFhLGFBQWEsUUFBUSxlQUFlO0FBQ3ZELFFBQUksWUFBWTtBQUNaLDJCQUFxQjtBQUNyQixhQUFP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QUFBQTtBQUFBLE1BZ0JqRixDQUFDLEVBQUUsS0FBSyxFQUFFO0FBRVYsaUJBQVcsWUFBWTtBQUFBLElBQzNCLFNBQVMsT0FBTztBQUNaLGNBQVEsTUFBTSw2QkFBUyxLQUFLO0FBQzVCLFVBQUksTUFBTSxTQUFTLGNBQWM7QUFDN0Isa0JBQVUsd0ZBQWtCLE9BQU87QUFBQSxNQUN2QyxPQUFPO0FBQ0gsWUFBSSxNQUFNO0FBQ1YsWUFBSSxPQUFPLHVCQUF1QixPQUFPLHNCQUFzQixPQUFPLG9CQUFvQixLQUFLLENBQUMsT0FBTyxtQkFBbUIsR0FBRztBQUN6SCxnQkFBTTtBQUFBLFFBQ1Y7QUFDQSxrQkFBVSxLQUFLLE9BQU87QUFBQSxNQUMxQjtBQUFBLElBQ0osVUFBRTtBQUNFLGtCQUFZO0FBQUEsSUFDaEI7QUFBQSxFQUNKO0FBc0JBLFdBQVMsWUFBWTtBQUNqQixVQUFNLFFBQVEsU0FBUyxlQUFlLGFBQWE7QUFDbkQsVUFBTSxhQUFhLE9BQU8seUJBQXlCLGlCQUFpQixXQUFXLE9BQU87QUFHdEYsV0FBTyxlQUFlLE9BQU8sU0FBUztBQUFBLE1BQ2xDLEtBQUssV0FBWTtBQUViLGNBQU0sZ0JBQWdCLFdBQVcsSUFBSSxLQUFLLElBQUk7QUFDOUMsZUFBTyxpQkFBaUIsT0FBTyxPQUFPLGFBQWEsSUFBSTtBQUFBLE1BQzNEO0FBQUEsTUFDQSxLQUFLLFNBQVUsT0FBTztBQUVsQixjQUFNLFdBQVcsT0FBTyxLQUFLO0FBQzdCLG1CQUFXLElBQUksS0FBSyxNQUFNLFFBQVE7QUFDbEMsYUFBSyxjQUFjLElBQUksTUFBTSxTQUFTLEVBQUUsU0FBUyxLQUFLLENBQUMsQ0FBQztBQUFBLE1BQzVEO0FBQUEsSUFDSixDQUFDO0FBR0QsVUFBTSxRQUFRO0FBQUEsRUFDbEI7QUFDQSxXQUFTLGlCQUFpQixvQkFBb0IsU0FBUzsiLAogICJuYW1lcyI6IFsiUEFTU1dPUkRfQ09ORklHIiwgIkFQSV9TSVRFUyIsICJzaGEyNTYiLCAidXJsIiwgImluaXREb3ViYW4iLCAidXBkYXRlRG91YmFuVmlzaWJpbGl0eSIsICJpbml0RG91YmFuIiwgInNob3dQYXNzd29yZE1vZGFsIiwgInNoYTI1NiIsICJzZWxlY3RlZEFQSXMiLCAic2VsZWN0ZWRBUElzIiwgInVwZGF0ZVNlbGVjdGVkQVBJcyIsICJ1cGRhdGVTZWxlY3RlZEFQSXMiLCAic2VsZWN0ZWRBUElzIiwgInNlYXJjaCIsICJzZWFyY2giLCAic2VsZWN0ZWRBUElzIl0KfQo=
